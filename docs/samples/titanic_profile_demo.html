<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Data Quality Report - titanic.csv</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.min.js" defer></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            /* ═══════════════════════════════════════════════════════════════
               DARK-ONLY DESIGN TOKENS (v3)
               Single theme - no light mode, no toggle
            ═══════════════════════════════════════════════════════════════ */

            /* Core backgrounds - deep navy/slate palette */
            --dq-color-bg: #020617;
            --dq-color-bg-alt: #020617;
            --dq-color-surface: #0b1120;
            --dq-color-surface-alt: #111827;

            /* Legacy compatibility aliases */
            --bg-main: var(--dq-color-bg);
            --bg-elevated: var(--dq-color-surface);
            --bg-card: linear-gradient(180deg, var(--dq-color-surface) 0%, var(--dq-color-bg) 100%);
            --bg-hover: #1e293b;
            --bg-tertiary: #151d30;
            --card-bg: var(--dq-color-surface);

            /* Borders */
            --dq-color-border-subtle: #1f2937;
            --dq-color-border-strong: #374151;
            --border-subtle: rgba(148, 163, 184, 0.08);
            --border-color: rgba(148, 163, 184, 0.15);
            --border-focus: rgba(96, 165, 250, 0.4);

            /* Text colors */
            --dq-color-text-main: #e5e7eb;
            --dq-color-text-muted: #9ca3af;
            --dq-color-text-subtle: #6b7280;
            --dq-color-text-inverse: #020617;
            --text-primary: var(--dq-color-text-main);
            --text-secondary: #94a3b8;
            --text-tertiary: #64748b;
            --text-muted: var(--dq-color-text-subtle);

            /* Accent colors */
            --dq-color-accent: #60a5fa;
            --dq-color-accent-soft: rgba(37, 99, 235, 0.18);
            --dq-color-accent-strong: #3b82f6;
            --accent: var(--dq-color-accent);
            --accent-soft: var(--dq-color-accent-soft);
            --accent-gradient: linear-gradient(135deg, #3b82f6, #8b5cf6);
            --primary: #8b5cf6;

            /* Status colors */
            --dq-color-good: #22c55e;
            --dq-color-good-soft: rgba(34, 197, 94, 0.18);
            --dq-color-caution: #fbbf24;
            --dq-color-caution-soft: rgba(251, 191, 36, 0.18);
            --dq-color-danger: #f97373;
            --dq-color-danger-soft: rgba(248, 113, 113, 0.20);
            --good: var(--dq-color-good);
            --good-soft: var(--dq-color-good-soft);
            --warning: var(--dq-color-caution);
            --warning-soft: var(--dq-color-caution-soft);
            --critical: var(--dq-color-danger);
            --critical-soft: var(--dq-color-danger-soft);
            --info: var(--dq-color-accent-strong);
            --info-soft: rgba(59, 130, 246, 0.12);

            /* Shadows */
            --dq-shadow-soft: 0 1px 3px rgba(15, 23, 42, 0.50);
            --dq-shadow-medium: 0 8px 16px rgba(15, 23, 42, 0.70);
            --shadow-card: var(--dq-shadow-medium);
            --shadow-glow: 0 0 40px rgba(96, 165, 250, 0.08);

            /* Border radius */
            --dq-radius-sm: 4px;
            --dq-radius-md: 8px;
            --dq-radius-lg: 12px;
            --radius-sm: var(--dq-radius-sm);
            --radius-md: var(--dq-radius-md);
            --radius-lg: var(--dq-radius-lg);
            --radius-xl: 20px;

            /* Spacing */
            --dq-space-1: 4px;
            --dq-space-2: 8px;
            --dq-space-3: 12px;
            --dq-space-4: 16px;
            --dq-space-5: 20px;
            --dq-space-6: 24px;

            /* Typography */
            --dq-font-family-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            --dq-font-size-xs: 11px;
            --dq-font-size-sm: 13px;
            --dq-font-size-md: 15px;
            --dq-font-size-lg: 18px;
            --dq-font-size-xl: 22px;
            --dq-line-height-tight: 1.15;
            --dq-line-height-normal: 1.4;
            --dq-line-height-relaxed: 1.6;

            /* Transitions */
            --transition-fast: 0.15s ease-out;
            --transition-med: 0.25s ease-out;

            /* Layout */
            --dq-sidebar-width: 260px;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: radial-gradient(ellipse at top left, #111827 0%, #030712 50%, #030712 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
        }

        .top-nav {
            background: rgba(11, 16, 32, 0.85);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border-subtle);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .top-inner {
            max-width: 1600px;
            margin: 0 auto;
            padding: 14px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 24px;
            flex-wrap: wrap;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .brand-mark {
            width: 42px;
            height: 42px;
            background: var(--accent-gradient);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1em;
            color: #fff;
            box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
        }

        .brand-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .brand-text span:first-child {
            font-weight: 700;
            font-size: 1.05em;
            color: var(--text-primary);
        }

        .brand-text span:last-child {
            font-size: 0.75em;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .file-meta {
            display: flex;
            align-items: center;
            gap: 20px;
            font-size: 0.85em;
            color: var(--text-secondary);
            flex-wrap: wrap;
        }

        .file-name-pill {
            background: var(--accent-soft);
            color: var(--accent);
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85em;
            border: 1px solid rgba(96, 165, 250, 0.2);
        }

        .pill-dot {
            display: inline-block;
            width: 6px;
            height: 6px;
            background: var(--text-muted);
            border-radius: 50%;
            margin-right: 8px;
        }

        .page {
            max-width: 1600px;
            margin: 0 auto;
            padding: 32px;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title-block h1 {
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 6px;
            background: linear-gradient(135deg, #f1f5f9 0%, #94a3b8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-title-block p {
            color: var(--text-secondary);
            font-size: 0.95em;
        }

        .kpi-belt {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        @media (max-width: 768px) {
            .kpi-belt {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .kpi-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: 20px;
            text-align: center;
        }

        .kpi-label {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .kpi-value {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .kpi-value.critical {
            color: var(--critical);
        }

        .kpi-trend {
            font-size: 0.75em;
            margin-top: 8px;
        }

        .kpi-trend.good { color: var(--good); }
        .kpi-trend.warning { color: var(--warning); }
        .kpi-trend.critical { color: var(--critical); }

        .sampling-bar {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: 16px 24px;
            margin-bottom: 24px;
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
            align-items: center;
        }

        .sampling-bar-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .sampling-stat {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .sampling-stat-label {
            font-size: 0.7em;
            text-transform: uppercase;
            color: var(--text-muted);
        }

        .sampling-stat-value {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .sampling-stat-value.highlight {
            color: var(--accent);
            font-weight: 600;
        }

        .hint-box {
            background: var(--bg-elevated);
            border-left: 3px solid var(--accent);
            padding: 12px 16px;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            font-size: 0.82em;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        /* FIBO Section Styles */
        .fibo-section {
            background: linear-gradient(135deg, #1e1b4b 0%, var(--bg-card) 100%);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin: 16px 0;
        }

        .fibo-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 16px;
        }

        .fibo-icon {
            font-size: 2em;
        }

        .fibo-title h3 {
            color: #c4b5fd;
            font-size: 1.1em;
            margin: 0;
        }

        .fibo-title p {
            color: var(--text-muted);
            font-size: 0.85em;
            margin: 2px 0 0 0;
        }

        .fibo-content {
            font-size: 0.9em;
        }

        .fibo-description {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .fibo-description strong {
            color: #a5b4fc;
        }

        .fibo-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .fibo-stat {
            background: var(--bg-elevated);
            padding: 14px;
            border-radius: var(--radius-md);
            text-align: center;
        }

        .fibo-stat-value {
            font-size: 1.2em;
            font-weight: 600;
            color: #c4b5fd;
        }

        .fibo-stat-label {
            font-size: 0.75em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 4px;
        }

        .fibo-stat-note {
            font-size: 0.7em;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .fibo-categories {
            margin-bottom: 8px;
        }

        .fibo-categories-label {
            font-size: 0.8em;
            color: var(--text-muted);
            margin-right: 8px;
        }

        .fibo-category-tag {
            display: inline-block;
            background: rgba(139, 92, 246, 0.15);
            color: #c4b5fd;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }

        .layout-grid {
            display: block;
            max-width: 100%;
            overflow: hidden;
        }

        .main-column {
            min-width: 0;
        }

        /* Quality Alerts */
        .quality-alert-item {
            display: grid;
            grid-template-columns: auto auto 1fr;
            gap: 12px;
            padding: 10px 14px;
            border-radius: var(--radius-sm);
            align-items: center;
            font-size: 0.9em;
        }

        .quality-alert-item.critical {
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid var(--critical);
        }

        .quality-alert-item.warning {
            background: rgba(245, 158, 11, 0.08);
            border-left: 3px solid var(--warning);
        }

        .quality-alert-item.info {
            background: rgba(59, 130, 246, 0.08);
            border-left: 3px solid var(--info);
        }

        .alert-icon { font-size: 1.1em; }
        .alert-column { font-weight: 600; color: var(--text-primary); min-width: 100px; }
        .alert-issue { color: var(--text-secondary); font-weight: 500; }
        .alert-detail { color: var(--text-muted); font-size: 0.9em; grid-column: 2 / -1; }

        @media (max-width: 768px) {
            .quality-alert-item {
                grid-template-columns: auto 1fr;
            }
            .alert-detail {
                grid-column: 1 / -1;
                margin-top: 4px;
            }
        }

        .accordion {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            margin-bottom: 16px;
            overflow: hidden;
        }

        .accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .accordion-header:hover {
            background: var(--bg-hover);
        }

        .accordion-title-group {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .accordion-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
        }

        .accordion-icon.overview { background: var(--info-soft); }
        .accordion-icon.quality { background: var(--good-soft); }
        .accordion-icon.columns { background: var(--accent-soft); }
        .accordion-icon.issues { background: var(--critical-soft); }

        .accordion-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .accordion-subtitle {
            font-size: 0.8em;
            color: var(--text-muted);
        }

        .accordion-meta {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .accordion-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .accordion-badge.good { background: var(--good-soft); color: var(--good); }
        .accordion-badge.warning { background: var(--warning-soft); color: var(--warning); }
        .accordion-badge.critical { background: var(--critical-soft); color: var(--critical); }
        .accordion-badge.info { background: var(--info-soft); color: var(--info); }

        .accordion-chevron {
            color: var(--text-muted);
            transition: transform var(--transition-fast);
        }

        .accordion.open .accordion-chevron {
            transform: rotate(180deg);
        }

        /* Accordion content - visible by default, hidden when collapsed */
        .accordion-body {
            display: block;
            border-top: 1px solid var(--border-subtle);
        }

        .accordion > .accordion-content {
            display: block;
            border-top: 1px solid var(--border-subtle);
        }

        /* Hide content when accordion has 'collapsed' class - Safari compatible */
        .accordion.collapsed .accordion-body {
            height: 0;
            overflow: hidden;
            padding: 0;
            border-top: none;
        }

        .accordion.collapsed > .accordion-content {
            height: 0;
            overflow: hidden;
            padding: 0;
            border-top: none;
        }

        .accordion.collapsed .accordion-chevron {
            transform: rotate(-90deg);
        }

        .accordion-content {
            padding: 20px;
        }

        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .overview-stat {
            background: var(--bg-elevated);
            padding: 16px;
            border-radius: var(--radius-md);
        }

        .overview-stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .overview-stat-label {
            font-size: 0.8em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .overview-stat-value {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .overview-stat-bar {
            height: 6px;
            background: var(--bg-main);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }

        .overview-stat-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .overview-stat-fill.good { background: var(--good); }
        .overview-stat-fill.warning { background: var(--warning); }
        .overview-stat-fill.critical { background: var(--critical); }

        .overview-stat-hint {
            font-size: 0.75em;
            color: var(--text-muted);
            margin-top: 8px;
        }

        .chart-container {
            background: var(--bg-elevated);
            padding: 20px;
            border-radius: var(--radius-md);
            margin-bottom: 16px;
        }

        .chart-title {
            font-size: 0.9em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .column-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .column-row {
            background: var(--bg-elevated);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .column-row-header {
            display: grid;
            grid-template-columns: auto auto 1fr auto auto auto;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        @media (min-width: 1200px) {
            .column-row-header {
                grid-template-columns: auto auto minmax(200px, 1fr) minmax(150px, auto) minmax(200px, auto) auto;
            }
        }

        @media (max-width: 768px) {
            .column-row-header {
                grid-template-columns: auto auto 1fr auto;
                grid-template-rows: auto auto auto auto;
                padding: 12px;
            }
            .column-quick-stats {
                grid-column: 3 / -1;
                grid-row: 2;
                justify-self: start;
            }
            .column-tags {
                grid-column: 1 / -1;
                grid-row: 3;
                margin-top: 8px;
                padding-top: 8px;
                border-top: 1px solid var(--border-subtle);
            }
            .column-quality-score {
                grid-column: 1 / -1;
                grid-row: 4;
                justify-self: end;
                margin-top: 8px;
            }
            .column-tag {
                font-size: 0.7em;
                padding: 4px 10px;
            }
            .column-tag.fibo {
                font-size: 0.65em;
                max-width: 100%;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        }

        .column-row-header:hover {
            background: var(--bg-hover);
        }

        .column-expand-icon {
            color: var(--text-muted);
            font-size: 0.7em;
            transition: transform var(--transition-fast);
        }

        .column-row.expanded .column-expand-icon {
            transform: rotate(90deg);
        }

        .column-type-icon {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
        }

        .column-type-icon.string { background: rgba(139, 92, 246, 0.2); }
        .column-type-icon.number { background: rgba(59, 130, 246, 0.2); }
        .column-type-icon.date { background: rgba(245, 158, 11, 0.2); }

        .column-info {
            flex: 1;
            min-width: 0;
        }

        .column-name {
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .column-type {
            font-size: 0.75em;
            color: var(--text-muted);
        }

        .column-quick-stats {
            display: flex;
            gap: 16px;
            font-size: 0.75em;
            color: var(--text-secondary);
        }

        .column-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .column-tag {
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.65em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .column-tag.pii { background: var(--critical-soft); color: var(--critical); }
        .column-tag.temporal { background: var(--warning-soft); color: var(--warning); }
        .column-tag.semantic { background: var(--info-soft); color: var(--info); }
        .column-tag.sparse { background: rgba(239, 68, 68, 0.2); color: #f87171; border: 1px solid rgba(239, 68, 68, 0.4); }
        .column-tag.incomplete { background: rgba(245, 158, 11, 0.15); color: #fbbf24; }
        .column-tag.duplicate-risk { background: rgba(168, 85, 247, 0.15); color: #c084fc; }
        .column-tag.fibo {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%);
            color: #7c3aed;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        .column-tag.fibo .fibo-icon { margin-right: 4px; }
        .column-tag.fibo-domain {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
            font-size: 0.6em;
        }

        .column-quality-score {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
        }

        .column-quality-score.good { background: var(--good-soft); color: var(--good); }
        .column-quality-score.warning { background: var(--warning-soft); color: var(--warning); }
        .column-quality-score.critical { background: var(--critical-soft); color: var(--critical); }

        .column-details {
            display: none;
            border-top: 1px solid var(--border-subtle);
        }

        .column-row.expanded .column-details {
            display: block;
        }

        .column-details-content {
            padding: 16px;
        }

        .column-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }

        .column-stat {
            background: var(--bg-main);
            padding: 10px;
            border-radius: var(--radius-sm);
        }

        .column-stat-label {
            font-size: 0.7em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .column-stat-value {
            font-size: 0.9em;
            color: var(--text-primary);
            font-weight: 500;
        }

        .top-values-section {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border-subtle);
        }

        .top-values-title {
            font-size: 0.75em;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .top-values-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 6px;
        }

        .top-value-item {
            background: var(--bg-main);
            padding: 6px 10px;
            border-radius: var(--radius-sm);
            display: flex;
            justify-content: space-between;
            font-size: 0.8em;
        }

        .top-value-name {
            color: var(--text-secondary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 100px;
        }

        .top-value-count {
            color: var(--text-muted);
        }

        .sampled-note {
            font-size: 0.7em;
            color: var(--text-muted);
            font-style: italic;
            margin-top: 6px;
        }

        .suggestion-card {
            background: var(--bg-elevated);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-bottom: 12px;
            border-left: 3px solid var(--info);
        }

        .suggestion-card.high-priority {
            border-left-color: #8b5cf6;
        }

        .suggestion-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .suggestion-type {
            font-weight: 600;
            color: var(--text-primary);
        }

        .suggestion-confidence {
            font-size: 0.75em;
            color: var(--text-muted);
        }

        .suggestion-reason {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .suggestion-field {
            font-size: 0.8em;
            color: var(--text-muted);
            margin-bottom: 6px;
            padding: 4px 8px;
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            display: inline-block;
        }

        .suggestion-field strong {
            color: var(--accent);
        }

        .suggestion-yaml-container {
            display: flex;
            gap: 8px;
            align-items: flex-start;
            margin-top: 8px;
        }

        .suggestion-yaml {
            flex: 1;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            padding: 10px 12px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            font-size: 0.75em;
            color: var(--text-secondary);
            margin: 0;
            white-space: pre-wrap;
            word-break: break-word;
            overflow-x: auto;
        }

        .copy-yaml-btn {
            background: var(--accent-soft);
            color: var(--accent);
            border: 1px solid rgba(96, 165, 250, 0.3);
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            font-size: 0.75em;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .copy-yaml-btn:hover {
            background: var(--accent);
            color: #fff;
        }

        /* Full Config Section */
        .full-config-container {
            margin-top: 12px;
        }

        .config-actions {
            margin-bottom: 10px;
        }

        .copy-config-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-size: 0.85em;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .copy-config-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .full-config-yaml {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 16px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            font-size: 0.8em;
            color: var(--text-secondary);
            margin: 0;
            white-space: pre;
            overflow-x: auto;
            max-height: 500px;
            overflow-y: auto;
        }

        .pii-risk-card {
            background: var(--critical-soft);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-bottom: 16px;
        }

        .pii-risk-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .pii-risk-score {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--critical);
        }

        .pii-risk-level {
            font-size: 0.85em;
            color: var(--critical);
        }

        .pii-column-item {
            background: var(--bg-elevated);
            padding: 12px;
            border-radius: var(--radius-sm);
            margin-top: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .pii-column-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .pii-type-badge {
            background: var(--critical-soft);
            color: var(--critical);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: 600;
        }

        .pii-frameworks {
            display: flex;
            gap: 6px;
        }

        .pii-framework-tag {
            background: var(--warning-soft);
            color: var(--warning);
            padding: 2px 6px;
            border-radius: 6px;
            font-size: 0.65em;
            font-weight: 600;
        }

        /* ML Analysis Section Styles */
        .beta-badge {
            background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
            color: white;
            font-size: 0.6em;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 8px;
            font-weight: 600;
            vertical-align: middle;
        }

        .accordion-icon.ml {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(99, 102, 241, 0.1) 100%);
            color: #8b5cf6;
        }

        .ml-summary-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(99, 102, 241, 0.05) 100%);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
        }

        .ml-summary-header {
            text-align: center;
            margin-bottom: 16px;
        }

        .ml-summary-count {
            font-size: 1.6em;
            font-weight: 700;
            color: #8b5cf6;
            line-height: 1;
        }

        .ml-summary-label {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .ml-findings-list {
            border-top: 1px solid rgba(139, 92, 246, 0.15);
            padding-top: 12px;
        }

        .ml-finding-item {
            padding: 8px 0;
            color: var(--text-secondary);
            font-size: 0.9em;
            border-bottom: 1px solid rgba(139, 92, 246, 0.08);
        }

        .ml-finding-item:last-child {
            border-bottom: none;
        }

        .ml-detail-section {
            background: var(--bg-elevated);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-bottom: 16px;
        }

        .ml-detail-header {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            font-size: 1em;
        }

        .ml-hint {
            background: var(--bg-tertiary);
            border-left: 3px solid #0ea5e9;
            padding: 10px 14px;
            margin-bottom: 12px;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            font-size: 0.9em;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .ml-hint em {
            font-style: normal;
            font-weight: 600;
            color: #38bdf8;
        }

        /* Collapsible ML hints */
        .ml-hint-collapse {
            margin-bottom: 14px;
        }

        .ml-hint-collapse summary {
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.85em;
            padding: 8px 0;
            list-style: none;
        }

        .ml-hint-collapse summary::-webkit-details-marker {
            display: none;
        }

        .ml-hint-collapse summary::before {
            content: '▶ ';
            font-size: 0.7em;
            margin-right: 4px;
            color: var(--text-muted);
        }

        .ml-hint-collapse[open] summary::before {
            content: '▼ ';
        }

        .ml-hint-content {
            background: var(--bg-tertiary);
            border-left: 3px solid #0ea5e9;
            padding: 10px 14px;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            margin-top: 8px;
            font-size: 0.85em;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .ml-detail-item {
            display: grid;
            grid-template-columns: 150px 100px 1fr;
            gap: 12px;
            padding: 10px;
            background: var(--bg-main);
            border-radius: var(--radius-sm);
            margin-bottom: 8px;
            align-items: center;
        }

        .ml-detail-col {
            color: var(--text-primary);
        }

        .ml-detail-count {
            color: #8b5cf6;
            font-weight: 600;
            font-size: 0.85em;
        }

        .ml-detail-desc {
            color: var(--text-secondary);
            font-size: 0.85em;
        }

        @media (max-width: 768px) {
            .ml-detail-item {
                grid-template-columns: 1fr;
                gap: 6px;
            }
        }

        /* Mobile-friendly sample rows */
        .sample-rows-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            max-width: 100%;
        }
        .sample-row-card {
            background: var(--bg-elevated);
            border-radius: 6px;
            padding: 8px 12px;
            margin-bottom: 6px;
            font-size: 11px;
        }
        .sample-row-card div {
            display: flex;
            justify-content: space-between;
            padding: 2px 0;
            border-bottom: 1px solid var(--border);
        }
        .sample-row-card div:last-child {
            border-bottom: none;
        }
        .sample-row-card .field-name {
            color: var(--text-secondary);
            font-weight: 500;
        }
        .sample-row-card .field-value {
            color: var(--text-primary);
            text-align: right;
            word-break: break-all;
        }

        .ml-charts-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .ml-chart-card {
            background: var(--bg-elevated);
            border-radius: var(--radius-md);
            padding: 16px;
        }

        .ml-chart-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            font-size: 0.9em;
        }

        .ml-chart-container {
            position: relative;
            height: 200px;
        }

        .freshness-content {
            padding: 0;
        }

        .freshness-timeline {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .freshness-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .freshness-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .freshness-dot.good { background: var(--good); box-shadow: 0 0 8px var(--good); }
        .freshness-dot.warning { background: var(--warning); box-shadow: 0 0 8px var(--warning); }

        .freshness-info {
            flex: 1;
        }

        .freshness-label {
            font-size: 0.75em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .freshness-value {
            font-size: 0.9em;
            color: var(--text-primary);
        }

        .column-search {
            margin-bottom: 12px;
        }

        .column-search input {
            width: 100%;
            padding: 10px 14px;
            background: var(--bg-main);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 0.9em;
        }

        .column-search input:focus {
            outline: none;
            border-color: var(--accent);
        }

        /* ======================================================
           SIDEBAR NAVIGATION (v3 Layout)
           ====================================================== */
        .dq-main-layout {
            display: flex;
            min-height: calc(100vh - 60px);
        }

        .dq-sidebar {
            width: var(--dq-sidebar-width);
            flex-shrink: 0;
            background: var(--dq-color-surface);
            border-right: 1px solid var(--dq-color-border-subtle);
            position: sticky;
            top: 60px;
            height: calc(100vh - 60px);
            overflow-y: auto;
            overflow-x: hidden;
            scrollbar-width: thin;
            scrollbar-color: var(--dq-color-border-strong) transparent;
        }

        .dq-sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .dq-sidebar::-webkit-scrollbar-track {
            background: transparent;
        }

        .dq-sidebar::-webkit-scrollbar-thumb {
            background: var(--dq-color-border-strong);
            border-radius: 3px;
        }

        .dq-sidebar-inner {
            padding: var(--dq-space-4);
        }

        .dq-sidebar-section {
            margin-bottom: var(--dq-space-5);
        }

        .dq-sidebar-label {
            font-size: var(--dq-font-size-xs);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--dq-color-text-subtle);
            padding: var(--dq-space-2) var(--dq-space-3);
            margin-bottom: var(--dq-space-1);
        }

        .dq-nav-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .dq-nav-item {
            margin: 0;
        }

        .dq-nav-link {
            display: flex;
            align-items: center;
            gap: var(--dq-space-2);
            padding: var(--dq-space-2) var(--dq-space-3);
            color: var(--dq-color-text-muted);
            text-decoration: none;
            font-size: var(--dq-font-size-sm);
            border-radius: var(--dq-radius-sm);
            transition: all var(--transition-fast);
            cursor: pointer;
            border: none;
            background: transparent;
            width: 100%;
            text-align: left;
        }

        .dq-nav-link:hover {
            background: var(--bg-hover);
            color: var(--dq-color-text-main);
        }

        .dq-nav-link.active {
            background: var(--dq-color-accent-soft);
            color: var(--dq-color-accent);
            font-weight: 500;
        }

        .dq-nav-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 16px;
            background: var(--dq-color-accent);
            border-radius: 0 2px 2px 0;
        }

        .dq-nav-link .nav-icon {
            font-size: 1em;
            opacity: 0.7;
            width: 20px;
            text-align: center;
            flex-shrink: 0;
        }

        .dq-nav-link .nav-num {
            font-size: var(--dq-font-size-xs);
            color: var(--dq-color-text-subtle);
            width: 18px;
            text-align: right;
            flex-shrink: 0;
        }

        .dq-sidebar-actions {
            padding: var(--dq-space-4);
            border-top: 1px solid var(--dq-color-border-subtle);
            display: flex;
            flex-direction: column;
            gap: var(--dq-space-2);
        }

        .dq-main {
            flex: 1;
            min-width: 0;
            max-width: calc(100% - var(--dq-sidebar-width));
        }

        /* Mobile: hide sidebar, show mobile nav toggle */
        .dq-mobile-nav-toggle {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--dq-color-accent);
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: var(--dq-shadow-medium);
            font-size: 1.5em;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 1024px) {
            .dq-sidebar {
                position: fixed;
                left: 0;
                top: 60px;
                z-index: 200;
                transform: translateX(-100%);
                transition: transform var(--transition-med);
            }

            .dq-sidebar.open {
                transform: translateX(0);
            }

            .dq-main {
                max-width: 100%;
            }

            .dq-mobile-nav-toggle {
                display: flex;
            }

            .dq-sidebar-backdrop {
                position: fixed;
                inset: 0;
                top: 60px;
                background: rgba(0, 0, 0, 0.5);
                z-index: 199;
                opacity: 0;
                visibility: hidden;
                transition: all var(--transition-med);
            }

            .dq-sidebar-backdrop.open {
                opacity: 1;
                visibility: visible;
            }
        }

        /* Legacy sticky-nav kept for backwards compatibility but hidden by default */
        .sticky-nav {
            display: none;
        }

        /* Action buttons in sidebar */
        .expand-all-btn {
            background: transparent;
            border: 1px solid var(--border-subtle);
            color: var(--text-muted);
            padding: 8px 12px;
            border-radius: var(--radius-md);
            font-size: var(--dq-font-size-sm);
            font-weight: 400;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s ease;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .expand-all-btn:hover {
            border-color: var(--accent);
            color: var(--text-secondary);
            background: var(--bg-hover);
        }

        .expand-all-btn.expanded {
            background: rgba(74, 144, 226, 0.1);
            border-color: var(--accent);
            color: var(--accent);
        }

        .expand-all-btn .expand-icon {
            font-weight: 600;
        }

        .export-pdf-btn {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            border: none;
            color: white;
            padding: 8px 14px;
            border-radius: var(--radius-md);
            font-size: var(--dq-font-size-sm);
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            width: 100%;
        }

        .export-pdf-btn:hover {
            background: linear-gradient(135deg, #047857 0%, #059669 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
        }

        .export-pdf-btn:active {
            transform: translateY(0);
        }

        .export-pdf-btn.exporting {
            opacity: 0.7;
            pointer-events: none;
        }

        .pdf-icon {
            font-size: 1.1em;
        }

        /* Print/PDF styles */
        @media print {
            .top-nav, .sticky-nav, .export-pdf-btn, .expand-all-btn,
            .dq-sidebar, .dq-sidebar-backdrop, .dq-mobile-nav-toggle {
                display: none !important;
            }
            .dq-main-layout {
                display: block !important;
            }
            .dq-main {
                max-width: 100% !important;
            }
            .page {
                padding: 0 !important;
                margin: 0 !important;
            }
            .accordion, .column-row, details, .insight-technical {
                break-inside: avoid;
            }
            .accordion.open .accordion-content,
            .column-row.expanded .column-details,
            details[open] summary ~ *,
            .insight-technical.open {
                display: block !important;
                max-height: none !important;
                overflow: visible !important;
            }
        }

        /* ======================================================
           EXECUTIVE SUMMARY
           ====================================================== */
        .executive-summary {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(74, 144, 226, 0.08) 100%);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-bottom: 24px;
            display: grid;
            grid-template-columns: 1fr auto;
            grid-template-rows: auto auto;
            gap: 20px;
        }

        .summary-verdict {
            grid-column: 1 / -1;
            padding: 16px 20px;
            border-radius: var(--radius-md);
            border-left: 4px solid;
        }

        .summary-verdict.good {
            background: rgba(16, 185, 129, 0.1);
            border-left-color: var(--good);
        }

        .summary-verdict.warning {
            background: rgba(251, 191, 36, 0.1);
            border-left-color: var(--warning);
        }

        .summary-verdict.critical {
            background: rgba(239, 68, 68, 0.1);
            border-left-color: var(--critical);
        }

        .verdict-text {
            font-size: 1.25em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .verdict-detail {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .summary-stats {
            display: flex;
            gap: 24px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .stat-label {
            font-size: 0.75em;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .priority-actions {
            grid-column: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .actions-header {
            font-size: 0.8em;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .action-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            background: var(--bg-main);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9em;
            transition: all 0.2s ease;
        }

        .action-item:hover {
            background: var(--bg-hover);
            border-color: var(--accent);
            color: var(--text-primary);
        }

        .action-icon {
            font-size: 1.1em;
        }

        .action-text {
            flex: 1;
        }

        .action-arrow {
            color: var(--accent);
            font-weight: bold;
        }

        .summary-tools {
            display: flex;
            align-items: flex-end;
        }

        .export-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: var(--radius-md);
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .export-btn:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }

        /* ======================================================
           COLUMN QUALITY HEATMAP
           ====================================================== */
        .column-heatmap {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 20px;
        }

        .heatmap-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .heatmap-title {
            font-size: 1em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .heatmap-legend {
            display: flex;
            gap: 16px;
            font-size: 0.8em;
            color: var(--text-muted);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 8px;
        }

        .heatmap-cell {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px 6px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        .heatmap-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .heatmap-name {
            font-size: 0.75em;
            color: rgba(255,255,255,0.9);
            text-align: center;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 100%;
        }

        .heatmap-score {
            font-size: 1.1em;
            font-weight: 700;
            color: white;
        }

        .heatmap-good, .legend-dot.heatmap-good { background: linear-gradient(135deg, #10b981, #059669); }
        .heatmap-ok, .legend-dot.heatmap-ok { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .heatmap-warning, .legend-dot.heatmap-warning { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .heatmap-critical, .legend-dot.heatmap-critical { background: linear-gradient(135deg, #ef4444, #dc2626); }

        /* ======================================================
           COLUMN SEARCH AND FILTER CONTROLS
           ====================================================== */
        .column-controls {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-box {
            position: relative;
            flex: 1;
            min-width: 200px;
        }

        .search-input {
            width: 100%;
            padding: 10px 14px 10px 36px;
            background: var(--bg-main);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 0.9em;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 0.9em;
        }

        .filter-buttons {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .filter-btn:hover {
            background: var(--bg-hover);
            border-color: var(--accent);
        }

        .filter-btn.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .sort-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sort-select {
            padding: 8px 12px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 0.85em;
            cursor: pointer;
        }

        /* ======================================================
           MOBILE RESPONSIVE STYLES
           ====================================================== */
        @media (max-width: 768px) {
            .page { padding: 16px; }
            .top-inner { padding: 12px 16px; }
            .file-meta { display: none; }
            .column-quick-stats { display: none; }
            .column-tags { display: none; }

            /* Sticky nav adjustments */
            .sticky-nav {
                margin: 0 -16px;
                padding: 0 16px;
                top: 56px;
            }

            .nav-btn {
                padding: 6px 12px;
                font-size: 0.8em;
            }

            /* Executive summary mobile */
            .executive-summary {
                display: flex;
                flex-direction: column;
                padding: 16px;
            }

            .summary-stats {
                flex-wrap: wrap;
                justify-content: space-around;
                gap: 16px;
            }

            .stat-value {
                font-size: 1.25em;
            }

            .priority-actions {
                width: 100%;
            }

            .summary-tools {
                width: 100%;
                justify-content: center;
            }

            .export-btn {
                width: 100%;
            }

            /* Heatmap mobile */
            .heatmap-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .heatmap-grid {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            }

            .heatmap-cell {
                padding: 8px 4px;
            }

            .heatmap-name {
                font-size: 0.65em;
            }

            .heatmap-score {
                font-size: 0.95em;
            }

            /* Column controls mobile */
            .column-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                width: 100%;
            }

            .filter-buttons {
                justify-content: flex-start;
            }

            .sort-controls {
                width: 100%;
            }

            .sort-select {
                width: 100%;
            }
        }

        /* Tablet adjustments */
        @media (min-width: 769px) and (max-width: 1024px) {
            .executive-summary {
                grid-template-columns: 1fr;
            }

            .summary-tools {
                justify-content: flex-start;
            }
        }

        /* ======================================================
           v2 SAMPLING COVERAGE BANNER
           ====================================================== */
        .sampling-banner {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid rgba(148, 163, 184, 0.15);
            border-radius: 16px;
            padding: 20px 24px;
            margin-bottom: 24px;
        }

        .sampling-banner-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .sampling-banner-icon {
            font-size: 1.5em;
        }

        .sampling-banner-title {
            font-size: 1em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .sampling-progress-container {
            margin-bottom: 16px;
        }

        .sampling-progress-bar {
            height: 10px;
            background: rgba(30, 41, 59, 0.8);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .sampling-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .sampling-progress-label {
            font-size: 0.9em;
            color: var(--text-secondary);
            text-align: center;
        }

        .sampling-progress-label strong {
            color: var(--accent);
        }

        .sampling-methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }

        .sampling-method {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            background: rgba(15, 23, 42, 0.6);
            border-radius: 8px;
            font-size: 0.85em;
        }

        .sampling-method-icon {
            font-size: 1.1em;
        }

        .sampling-method.full .sampling-method-icon { color: #10b981; }
        .sampling-method.sampled .sampling-method-icon { color: #f59e0b; }

        .sampling-method-text {
            color: var(--text-secondary);
        }

        .sampling-method-text strong {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Sample Size Explanation (Collapsible) */
        .sample-size-explanation {
            margin-top: 16px;
            background: rgba(15, 23, 42, 0.4);
            border-radius: 8px;
            border: 1px solid rgba(148,163,184,0.05);
        }

        .sample-size-summary {
            cursor: pointer;
            padding: 12px 16px;
            font-size: 0.85em;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
            list-style: none;
        }

        .sample-size-summary::-webkit-details-marker { display: none; }

        .sample-size-summary::after {
            content: '▸';
            margin-left: auto;
            transition: transform 0.2s;
        }

        .sample-size-explanation[open] .sample-size-summary::after {
            transform: rotate(90deg);
        }

        .sample-size-content {
            padding: 0 16px 16px;
            color: var(--text-secondary);
            font-size: 0.85em;
            line-height: 1.6;
        }

        .sample-size-content p {
            margin: 0 0 12px 0;
        }

        .sample-size-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 16px 0;
        }

        .sample-stat {
            text-align: center;
            padding: 12px;
            background: rgba(15, 23, 42, 0.6);
            border-radius: 8px;
        }

        .sample-stat-value {
            display: block;
            font-size: 1.4em;
            font-weight: 700;
            color: var(--accent);
        }

        .sample-stat-label {
            font-size: 0.75em;
            color: var(--text-muted);
            margin-top: 4px;
            display: block;
        }

        .sample-size-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
            font-size: 0.9em;
        }

        .sample-size-table th, .sample-size-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(148,163,184,0.08);
        }

        .sample-size-table th {
            color: var(--text-muted);
            font-weight: 500;
            font-size: 0.85em;
        }

        .sample-size-table .value-highlight {
            color: #10b981;
        }

        .sample-size-note {
            font-style: italic;
            color: var(--text-muted);
            border-left: 2px solid var(--accent);
            padding-left: 12px;
            margin: 16px 0 0 0;
        }

        @media (max-width: 640px) {
            .sample-size-stats {
                grid-template-columns: 1fr;
            }
        }

        /* FIBO Semantic Categories Summary */
        .fibo-summary {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, rgba(59, 130, 246, 0.05) 100%);
            border: 1px solid rgba(139, 92, 246, 0.15);
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 20px;
        }

        .fibo-summary-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 14px;
        }

        .fibo-summary-icon {
            font-size: 1.3em;
        }

        .fibo-summary-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95em;
        }

        .fibo-summary-count {
            margin-left: auto;
            font-size: 0.8em;
            color: var(--text-muted);
            background: rgba(139, 92, 246, 0.15);
            padding: 4px 10px;
            border-radius: 12px;
        }

        .fibo-categories-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .fibo-category-chip {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(15, 23, 42, 0.6);
            padding: 8px 14px;
            border-radius: 20px;
            border: 1px solid rgba(148,163,184,0.08);
            transition: all 0.2s;
        }

        .fibo-category-chip:hover {
            background: rgba(15, 23, 42, 0.8);
            border-color: rgba(139, 92, 246, 0.3);
        }

        .fibo-icon {
            font-size: 1em;
        }

        .fibo-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.85em;
        }

        .fibo-count {
            background: var(--accent);
            color: white;
            font-size: 0.7em;
            font-weight: 700;
            padding: 2px 7px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }

        .fibo-tags {
            font-size: 0.75em;
            color: var(--text-muted);
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        @media (max-width: 640px) {
            .fibo-categories-grid {
                flex-direction: column;
            }
            .fibo-tags {
                display: none;
            }
        }

        /* Semantic Classification Chips (unified FIBO + Schema.org) */
        .semantic-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.85em;
            transition: all 0.2s;
        }

        .semantic-chip.fibo {
            background: rgba(5, 150, 105, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .semantic-chip.fibo:hover {
            background: rgba(5, 150, 105, 0.25);
        }

        .semantic-chip.schema-org {
            background: rgba(59, 130, 246, 0.15);
            border: 1px solid rgba(99, 102, 241, 0.3);
        }

        .semantic-chip.schema-org:hover {
            background: rgba(59, 130, 246, 0.25);
        }

        .semantic-chip .chip-icon {
            font-size: 1em;
        }

        .semantic-chip .chip-label {
            font-weight: 600;
            color: var(--text-primary);
        }

        .semantic-chip .chip-count {
            background: rgba(255,255,255,0.2);
            color: var(--text-primary);
            font-size: 0.75em;
            font-weight: 700;
            padding: 1px 6px;
            border-radius: 8px;
        }

        .semantic-chip .chip-source {
            font-size: 0.7em;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .source-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 600;
        }

        .source-badge.fibo {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            color: white;
        }

        .source-badge.schema {
            background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
            color: white;
        }

        /* FIBO Badge - Inline with column name (for mobile visibility) */
        .column-name-row {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .fibo-badge-mobile {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: rgba(139, 92, 246, 0.12);
            color: var(--text-secondary);
            font-size: 0.7em;
            padding: 2px 8px;
            border-radius: 12px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            white-space: nowrap;
        }

        @media (min-width: 1024px) {
            /* Hide mobile badge on desktop - shown in expanded details instead */
            .fibo-badge-mobile {
                display: none;
            }
        }

        @media (max-width: 640px) {
            .fibo-badge-mobile {
                font-size: 0.65em;
                padding: 2px 6px;
            }
        }

        /* ======================================================
           v2 METRICS DASHBOARD GRID
           ====================================================== */
        .metrics-dashboard {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
        }

        .metrics-row {
            display: grid;
            gap: 12px;
        }

        .metrics-row.core {
            grid-template-columns: repeat(4, 1fr);
        }

        .metrics-row.quality {
            grid-template-columns: repeat(4, 1fr);
        }

        .metrics-row.types {
            grid-template-columns: repeat(4, 1fr);
        }

        @media (max-width: 768px) {
            .metrics-row.core,
            .metrics-row.quality,
            .metrics-row.types {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .metric-widget {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .metric-widget:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .metric-widget-label {
            font-size: 0.7em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .metric-widget-value {
            font-size: 1.6em;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .metric-widget-trend {
            font-size: 0.75em;
            margin-top: 6px;
            color: var(--text-secondary);
        }

        .metric-widget-trend.good { color: var(--good); }
        .metric-widget-trend.warning { color: var(--warning); }
        .metric-widget-trend.critical { color: var(--critical); }

        /* Quality gauge styling */
        .metric-gauge {
            position: relative;
            width: 60px;
            height: 60px;
            margin: 0 auto 8px auto;
        }

        .metric-gauge svg {
            transform: rotate(-90deg);
        }

        .metric-gauge-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.9em;
            font-weight: 700;
            color: var(--text-primary);
        }

        /* ======================================================
           v2 INSIGHT WIDGET (Masterpiece Design)
           ====================================================== */
        .insight-widget {
            background: linear-gradient(180deg, #0f172a 0%, #0a0f1a 100%);
            border: 1px solid rgba(148, 163, 184, 0.08);
            border-radius: 16px;
            padding: 0;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }

        .insight-widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 24px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            background: rgba(15, 23, 42, 0.5);
            cursor: pointer;
        }

        .insight-widget-header:hover {
            background: rgba(30, 41, 59, 0.5);
        }

        /* Add chevron to insight widget */
        .insight-widget-chevron {
            color: var(--text-muted);
            font-size: 0.8em;
            transition: transform 0.2s ease;
            margin-left: 12px;
        }

        .insight-widget.collapsed .insight-widget-chevron {
            transform: rotate(-90deg);
        }

        .insight-widget-title-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .insight-widget-icon {
            font-size: 1.3em;
        }

        .insight-widget-title {
            font-size: 1.05em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .insight-widget-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75em;
            font-weight: 600;
            background: rgba(139, 92, 246, 0.15);
            color: #a78bfa;
        }

        .insight-widget-badge.critical { background: rgba(239, 68, 68, 0.15); color: #f87171; }
        .insight-widget-badge.warning { background: rgba(245, 158, 11, 0.15); color: #fbbf24; }
        .insight-widget-badge.info { background: rgba(59, 130, 246, 0.15); color: #60a5fa; }
        .insight-widget-badge.good { background: rgba(16, 185, 129, 0.15); color: #34d399; }

        /* ML Model Badge */
        .insight-ml-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: 500;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2));
            color: #a78bfa;
            border: 1px solid rgba(139, 92, 246, 0.3);
            margin-left: 8px;
        }

        .insight-widget-body {
            padding: 24px;
            overflow: hidden;
            max-height: 2000px;
            transition: max-height 0.3s ease;
        }

        .insight-widget.collapsed .insight-widget-body {
            height: 0;
            overflow: hidden;
            padding: 0 24px;
        }

        /* Plain English Summary Section */
        .insight-summary {
            margin-bottom: 24px;
        }

        .insight-summary-label {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .insight-summary-label::before {
            content: '📘';
            font-size: 1.2em;
        }

        .insight-summary-text {
            font-size: 0.95em;
            line-height: 1.6;
            color: var(--text-secondary);
            padding: 14px 16px;
            background: rgba(var(--info-color-rgb), 0.08);
            border-radius: 0 8px 8px 0;
            border-left: 3px solid var(--info-color);
        }

        /* Example Table Section */
        .insight-examples {
            margin-bottom: 20px;
        }

        .insight-examples-label {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .insight-examples-label::before {
            content: '📋';
            font-size: 1.2em;
        }

        .insight-examples-table {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            font-size: 0.85em;
        }

        .insight-examples-table thead {
            background: rgba(15, 23, 42, 0.8);
        }

        .insight-examples-table th {
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        .insight-examples-table td {
            padding: 10px 16px;
            color: var(--text-secondary);
            border-bottom: 1px solid rgba(148, 163, 184, 0.05);
        }

        .insight-examples-table tr:last-child td {
            border-bottom: none;
        }

        .insight-examples-table tr:hover {
            background: rgba(96, 165, 250, 0.05);
        }

        .insight-examples-table .value-highlight {
            color: #f87171;
            font-weight: 600;
        }

        .insight-examples-table .value-normal {
            color: #94a3b8;
        }

        .insight-examples-table .row-id {
            color: var(--text-muted);
            font-size: 0.9em;
        }

        /* Technical Details Collapsible */
        .insight-technical {
            border-top: 1px solid rgba(148, 163, 184, 0.1);
            margin-top: 4px;
        }

        .insight-technical-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
            padding: 14px 0;
            background: transparent;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.85em;
            transition: color 0.2s ease;
        }

        .insight-technical-toggle:hover {
            color: var(--accent);
        }

        .insight-technical-toggle::before {
            content: '🔬';
            font-size: 1.1em;
        }

        .insight-technical-toggle .toggle-arrow {
            margin-left: auto;
            transition: transform 0.2s ease;
        }

        .insight-technical.open .toggle-arrow {
            transform: rotate(180deg);
        }

        .insight-technical-content {
            display: none;
            padding: 16px;
            background: rgba(15, 23, 42, 0.6);
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .insight-technical.open .insight-technical-content {
            display: block;
        }

        .insight-technical-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .insight-technical-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .insight-technical-item-label {
            font-size: 0.7em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
        }

        .insight-technical-item-value {
            font-size: 0.9em;
            color: var(--text-secondary);
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
        }

        .insight-technical-context {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid rgba(148, 163, 184, 0.08);
        }

        .insight-technical-context-title {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 10px;
        }

        .insight-technical-context-list {
            list-style: none;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .insight-technical-context-list li {
            padding: 4px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .insight-technical-context-list li::before {
            content: '•';
            color: var(--accent);
        }

        /* ======================================================
           DUAL-LAYER EXPLANATIONS (Details/Summary)
           ====================================================== */
        .dual-layer-explanation {
            margin-top: 16px;
        }

        .dual-layer-summary {
            background: rgba(var(--info-color-rgb), 0.08);
            border-left: 3px solid var(--info-color);
            padding: 12px 16px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 12px;
        }

        .dual-layer-summary-label {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--info-color);
            font-weight: 600;
            margin-bottom: 6px;
        }

        .dual-layer-summary-text {
            font-size: 0.95em;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .dual-layer-technical {
            background: var(--bg-card);
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
        }

        .dual-layer-technical summary {
            cursor: pointer;
            padding: 10px 14px;
            font-size: 0.8em;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 8px;
            user-select: none;
        }

        .dual-layer-technical summary:hover {
            color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.02);
        }

        .dual-layer-technical summary::marker {
            color: var(--accent);
        }

        .dual-layer-technical[open] summary {
            border-bottom: 1px solid var(--border-subtle);
        }

        .dual-layer-technical-content {
            padding: 14px;
        }

        .dual-layer-technical-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 12px;
        }

        .dual-layer-technical-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dual-layer-technical-item-label {
            font-size: 0.75em;
            color: var(--text-muted);
        }

        .dual-layer-technical-item-value {
            font-size: 0.85em;
            font-weight: 500;
            color: var(--text-primary);
            font-family: 'SF Mono', monospace;
        }

        .dual-layer-technical-context {
            font-size: 0.8em;
            color: var(--text-muted);
            padding-top: 10px;
            border-top: 1px solid var(--border-subtle);
        }

        .dual-layer-technical-context ul {
            margin: 0;
            padding-left: 18px;
        }

        .dual-layer-technical-context li {
            margin-bottom: 4px;
        }

        /* ======================================================
           v2 SECTION HEADERS (Observation framing)
           ====================================================== */
        .section-header-v2 {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            padding: 16px 20px;
            margin: 28px 0 16px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-header-v2-icon {
            font-size: 1.3em;
            margin-right: 12px;
        }

        .section-header-v2-title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .section-header-v2-subtitle {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        .section-header-v2-badge {
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
        }

        .section-header-v2-badge.observations { background: rgba(139, 92, 246, 0.15); color: #a78bfa; }
        .section-header-v2-badge.patterns { background: rgba(59, 130, 246, 0.15); color: #60a5fa; }
        .section-header-v2-badge.info { background: rgba(16, 185, 129, 0.15); color: #34d399; }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <header class="top-nav">
        <div class="top-inner">
            <div class="brand">
                <div class="brand-mark">DK9</div>
                <div class="brand-text">
                    <span>DataK9</span>
                    <span>Data Profiler</span>
                </div>
            </div>
            <div class="file-meta">
                <span class="file-name-pill">titanic.csv</span>
                <span><span class="pill-dot"></span>891 rows</span>
                <span><span class="pill-dot"></span>58.89 KB</span>
                <span><span class="pill-dot"></span>3.3s</span>
                <span><span class="pill-dot"></span>2025-11-30 11:49</span>
            </div>
        </div>
    </header>

    <!-- Sidebar Backdrop (mobile) -->
    <div class="dq-sidebar-backdrop" id="sidebarBackdrop" onclick="toggleSidebar()"></div>

    <!-- Main Layout with Sidebar -->
    <div class="dq-main-layout">
        <!-- Sidebar Navigation -->
        <aside class="dq-sidebar" id="dqSidebar">
            <div class="dq-sidebar-inner">
                <div class="dq-sidebar-section">
                    <div class="dq-sidebar-label">Navigation</div>
                    <ul class="dq-nav-list">
                        <li class="dq-nav-item"><button class="dq-nav-link active" data-section="overview"><span class="nav-num">1</span>Overview</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="engine"><span class="nav-num">2</span>Profiling Engine</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="structure"><span class="nav-num">3</span>Dataset Structure</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="columns"><span class="nav-num">4</span>Field Profiles</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="distributions"><span class="nav-num">5</span>Distributions</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="missingness"><span class="nav-num">6</span>Missingness & Bias</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="anomalies"><span class="nav-num">7</span>Anomalies</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="temporal"><span class="nav-num">8</span>Temporal Analysis</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="correlations"><span class="nav-num">9</span>Correlations</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="validations"><span class="nav-num">10</span>Validation Suggestions</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="yaml"><span class="nav-num">11</span>YAML / Export</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="nextsteps"><span class="nav-num">12</span>Next Steps</button></li>
                        <li class="dq-nav-item"><button class="dq-nav-link" data-section="glossary"><span class="nav-num">13</span>Glossary</button></li>
                    </ul>
                </div>
            </div>
            <div class="dq-sidebar-actions">
                <button class="expand-all-btn" id="expandAllBtn" onclick="toggleExpandAll()" title="Expand/Collapse all sections">
                    <span class="expand-icon">+</span> Expand All
                </button>
                <button class="export-pdf-btn" id="exportPdfBtn" onclick="exportToPDF()" title="Export report to PDF">
                    <span class="pdf-icon">📄</span> Export PDF
                </button>
            </div>
        </aside>

        <!-- Mobile Nav Toggle -->
        <button class="dq-mobile-nav-toggle" id="mobileNavToggle" onclick="toggleSidebar()" aria-label="Toggle navigation">
            ☰
        </button>

        <!-- Main Content Area -->
        <main class="dq-main page">
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- 1. HEADER & SAMPLING BANNER                                     -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <section class="page-header" id="section-overview">
            <div class="page-title-block">
                <h1>Data Profile Report</h1>
                <p>Analysis of 891 records across 12 columns</p>
            </div>
        </section>

        <!-- v2 Sampling Coverage Banner -->
        
        <div class="sampling-header" style="background: linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.98) 100%); border-radius: 12px; padding: 16px 20px; margin-bottom: 20px; border: 1px solid rgba(148, 163, 184, 0.1);">
            <!-- Compact Header Row -->
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="background: #10b981; color: white; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.2em;">✓</div>
                    <div>
                        <div style="font-weight: 600; color: #f1f5f9; font-size: 0.95em;">Full dataset analyzed — 891 rows</div>
                        <div style="font-size: 0.8em; color: #94a3b8;">No sampling required for this dataset size</div>
                    </div>
                </div>
                <div style="display: flex; gap: 16px; align-items: center;">
                    <div style="text-align: right;">
                        <div style="font-size: 0.75em; color: #64748b; text-transform: uppercase;">Coverage</div>
                        <div style="font-weight: 600; color: #10b981; font-size: 0.9em;">891 rows (100%)</div>
                    </div>
                </div>
            </div>

            <!-- Expandable Details -->
            <details style="margin-top: 12px;">
                <summary style="cursor: pointer; color: #94a3b8; font-size: 0.85em; padding: 8px 0; list-style: none; display: flex; align-items: center; gap: 6px;">
                    <span style="transition: transform 0.2s;">▶</span>
                    <span>How was this data analyzed?</span>
                </summary>
                <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(148, 163, 184, 0.1);">
                    <!-- Analysis Method Grid -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 16px;">
                        <!-- Full Scan Section -->
                        <div style="background: rgba(16, 185, 129, 0.1); border-radius: 8px; padding: 12px; border-left: 3px solid #10b981;">
                            <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 8px;">
                                <span style="color: #10b981; font-size: 1.1em;">✓</span>
                                <span style="font-weight: 600; color: #f1f5f9; font-size: 0.85em;">Full Dataset Scan</span>
                            </div>
                            <div style="font-size: 0.8em; color: #94a3b8; line-height: 1.5;">
                                Row count, Column types, Null detection, Basic statistics
                            </div>
                            <div style="font-size: 0.75em; color: #64748b; margin-top: 6px;">
                                Always computed on 100% of rows
                            </div>
                        </div>

                        <!-- Full Analysis Section -->
                        <div style="background: rgba(16, 185, 129, 0.1); border-radius: 8px; padding: 12px; border-left: 3px solid #10b981;">
                            <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 8px;">
                                <span style="color: #10b981; font-size: 1.1em;">✓</span>
                                <span style="font-weight: 600; color: #f1f5f9; font-size: 0.85em;">Advanced Analysis</span>
                            </div>
                            <div style="font-size: 0.8em; color: #94a3b8; line-height: 1.5;">
                                Outliers, patterns, ML anomalies, correlations
                            </div>
                            <div style="font-size: 0.75em; color: #64748b; margin-top: 6px;">
                                Dataset small enough for complete analysis
                            </div>
                        </div>
                    </div>

                    
                    <!-- Why No Sampling -->
                    <div style="background: rgba(16, 185, 129, 0.05); border-radius: 8px; padding: 12px; border: 1px solid rgba(16, 185, 129, 0.2);">
                        <div style="font-weight: 600; color: #f1f5f9; font-size: 0.85em; margin-bottom: 8px;">
                            💡 Why wasn't sampling used?
                        </div>
                        <p style="font-size: 0.8em; color: #94a3b8; margin: 0; line-height: 1.6;">
                            Your dataset has <strong>891 rows</strong>, which is small enough to analyze completely
                            without performance issues. Sampling is only applied to datasets exceeding 50,000 rows,
                            where it provides statistically equivalent results with significantly faster processing.
                        </p>
                    </div>
                </div>
            </details>
        </div>

        <!-- AI-Generated Executive Summary (only with --beta-llm flag) -->
        

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- 2. METRICS DASHBOARD (3 rows: Core, Quality, Types)             -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        
        <div class="metrics-dashboard">
            <!-- Row 1: Core Numbers -->
            <div class="metrics-row core">
                <div class="metric-widget">
                    <div class="metric-widget-label">Rows Analyzed</div>
                    <div class="metric-widget-value">891</div>
                </div>
                <div class="metric-widget">
                    <div class="metric-widget-label">Columns</div>
                    <div class="metric-widget-value">12</div>
                </div>
                <div class="metric-widget">
                    <div class="metric-widget-label">Quality Score</div>
                    <div class="metric-widget-value" style="color: var(--warning);">78%</div>
                </div>
                <div class="metric-widget">
                    <div class="metric-widget-label">Processing</div>
                    <div class="metric-widget-value">3.3s</div>
                </div>
            </div>

            <!-- Row 2: Quality Dimensions -->
            <div class="metrics-row quality">
                <div class="metric-widget">
                    <div class="metric-gauge">
                        
                <svg width="60" height="60" viewBox="0 0 60 60">
                    <circle cx="30" cy="30" r="25" fill="none" stroke="rgba(148,163,184,0.1)" stroke-width="5"/>
                    <circle cx="30" cy="30" r="25" fill="none" stroke="var(--warning)" stroke-width="5"
                            stroke-dasharray="157.0795" stroke-dashoffset="12.722675551814433"
                            stroke-linecap="round"/>
                </svg>
                        <span class="metric-gauge-value">92%</span>
                    </div>
                    <div class="metric-widget-label">Completeness</div>
                    <div class="metric-widget-trend warning">Some gaps</div>
                </div>
                <div class="metric-widget">
                    <div class="metric-gauge">
                        
                <svg width="60" height="60" viewBox="0 0 60 60">
                    <circle cx="30" cy="30" r="25" fill="none" stroke="rgba(148,163,184,0.1)" stroke-width="5"/>
                    <circle cx="30" cy="30" r="25" fill="none" stroke="var(--good)" stroke-width="5"
                            stroke-dasharray="157.0795" stroke-dashoffset="2.823632987398099"
                            stroke-linecap="round"/>
                </svg>
                        <span class="metric-gauge-value">98%</span>
                    </div>
                    <div class="metric-widget-label">Validity</div>
                    <div class="metric-widget-trend good">Formats valid</div>
                </div>
                <div class="metric-widget">
                    <div class="metric-gauge">
                        
                <svg width="60" height="60" viewBox="0 0 60 60">
                    <circle cx="30" cy="30" r="25" fill="none" stroke="rgba(148,163,184,0.1)" stroke-width="5"/>
                    <circle cx="30" cy="30" r="25" fill="none" stroke="var(--warning)" stroke-width="5"
                            stroke-dasharray="157.0795" stroke-dashoffset="42.67326416666667"
                            stroke-linecap="round"/>
                </svg>
                        <span class="metric-gauge-value">73%</span>
                    </div>
                    <div class="metric-widget-label">Consistency</div>
                    <div class="metric-widget-trend warning">Variable</div>
                </div>
                <div class="metric-widget">
                    <div class="metric-gauge">
                        
                <svg width="60" height="60" viewBox="0 0 60 60">
                    <circle cx="30" cy="30" r="25" fill="none" stroke="rgba(148,163,184,0.1)" stroke-width="5"/>
                    <circle cx="30" cy="30" r="25" fill="none" stroke="var(--info)" stroke-width="5"
                            stroke-dasharray="157.0795" stroke-dashoffset="105.85286637444034"
                            stroke-linecap="round"/>
                </svg>
                        <span class="metric-gauge-value">33%</span>
                    </div>
                    <div class="metric-widget-label">Uniqueness</div>
                    <div class="metric-widget-trend warning">Moderate</div>
                </div>
            </div>

            <!-- Row 3: Field Types -->
            <div class="metrics-row types">
                <div class="metric-widget">
                    <div class="metric-widget-value" style="color: #60a5fa;">7</div>
                    <div class="metric-widget-label">Numeric</div>
                </div>
                <div class="metric-widget">
                    <div class="metric-widget-value" style="color: #a78bfa;">5</div>
                    <div class="metric-widget-label">Text</div>
                </div>
                <div class="metric-widget">
                    <div class="metric-widget-value" style="color: #fbbf24;">0</div>
                    <div class="metric-widget-label">Dates</div>
                </div>
                <div class="metric-widget">
                    <div class="metric-widget-value" style="color: #34d399;">2</div>
                    <div class="metric-widget-label">Categorical</div>
                </div>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- 3. DATA QUALITY OVERVIEW - High-level metrics first             -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section-divider" id="section-structure" style="margin: 24px 0 16px 0; padding: 12px 20px; background: linear-gradient(135deg, #1e3a5f 0%, #0d1f3c 100%); border-radius: 8px; border-left: 4px solid #3b82f6;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="margin: 0; font-size: 1.1em; color: #f1f5f9; font-weight: 600;">Dataset Structure & Semantics</h2>
                    <p style="margin: 4px 0 0 0; font-size: 0.85em; color: #94a3b8;">Type distribution, value patterns, and quality scores by column</p>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 4px 12px; border-radius: 4px; font-size: 0.8em; font-weight: 600; color: white;">STRUCTURE</div>
            </div>
        </div>

        <div class="layout-grid">
            <div class="main-column">
                <!-- Data Types Accordion -->
                
                <div class="accordion" data-accordion="overview">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon overview">🔤</div>
                            <div>
                                <div class="accordion-title">Data Types</div>
                                <div class="accordion-subtitle">6 Integer, 5 String, 1 Float</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge info">12 columns</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-body">
                        <div class="accordion-content">
                            <div class="dual-layer-explanation">
                                <div class="dual-layer-summary">
                                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                                    <div class="dual-layer-summary-text">Your dataset has 12 columns. Most columns (7) contain numeric data like counts, amounts, or measurements. </div>
                                </div>
                                <details class="dual-layer-technical">
                                    <summary>🧠 Technical Details (click to expand)</summary>
                                    <div class="dual-layer-technical-content">
                                        <div class="dual-layer-technical-grid">
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Integer</span>
                                                <span class="dual-layer-technical-item-value">6 columns</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Float</span>
                                                <span class="dual-layer-technical-item-value">1 columns</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">String</span>
                                                <span class="dual-layer-technical-item-value">5 columns</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Datetime</span>
                                                <span class="dual-layer-technical-item-value">0 columns</span>
                                            </div>
                                        </div>
                                        <div class="dual-layer-technical-context">
                                            <ul>
                                                <li>Integer: Whole numbers (counts, IDs, quantities)</li>
                                                <li>Float: Decimal numbers (prices, percentages, measurements)</li>
                                                <li>String: Text data (names, categories, codes)</li>
                                                <li>Datetime: Date/time values for temporal analysis</li>
                                            </ul>
                                        </div>
                                    </div>
                                </details>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">Data Type Distribution</div>
                                <canvas id="typeChart" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Semantic Classification Accordion (unified FIBO + Schema.org) -->
                
                <div class="accordion" data-accordion="semantics">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon semantics" style="background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);">🏷️</div>
                            <div>
                                <div class="accordion-title">Semantic Classification</div>
                                <div class="accordion-subtitle">What type of data is in each column?</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge info">12/12 classified</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-body">
                        <div class="accordion-content">
                            <!-- Plain English Explanation -->
                            <div class="dual-layer plain-layer">
                                <div class="layer-label">📖 What is this?</div>
                                <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 12px;">
                                    DataK9 analyzes each column to understand what kind of real-world data it contains.
                                    For example, is "amount" a price? Is "cust_id" a customer identifier? This helps generate smarter validation rules.
                                </p>
                            </div>

                            <!-- How it works -->
                            <div style="background: var(--bg-tertiary); border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 12px; font-size: 0.9em;">
                                    🔍 How Classification Works
                                </div>
                                <p style="color: var(--text-secondary); font-size: 0.85em; line-height: 1.6; margin-bottom: 12px;">
                                    DataK9 checks each column against two standard vocabularies, in order of priority:
                                </p>
                                <div style="display: flex; flex-direction: column; gap: 12px;">
                                    <div style="display: flex; align-items: flex-start; gap: 12px;">
                                        <div style="background: linear-gradient(135deg, #059669 0%, #10b981 100%); color: white; padding: 4px 10px; border-radius: 6px; font-weight: 600; font-size: 0.8em; white-space: nowrap;">1. FIBO</div>
                                        <div style="font-size: 0.85em; color: var(--text-secondary);">
                                            <strong>Financial Industry Business Ontology</strong> — Matches financial patterns like account numbers, transaction amounts, currencies, and party identifiers.
                                            Best for banking, insurance, and financial datasets.
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: flex-start; gap: 12px;">
                                        <div style="background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%); color: white; padding: 4px 10px; border-radius: 6px; font-weight: 600; font-size: 0.8em; white-space: nowrap;">2. Schema.org</div>
                                        <div style="font-size: 0.85em; color: var(--text-secondary);">
                                            <strong>Web Vocabulary Standard</strong> — Matches general patterns like names, emails, dates, addresses, phone numbers, and categories.
                                            Works across all types of datasets.
                                        </div>
                                    </div>
                                </div>
                                <p style="color: var(--text-muted); font-size: 0.8em; margin-top: 12px; font-style: italic;">
                                    FIBO is checked first. If no strong financial match is found, Schema.org provides a general classification.
                                </p>
                            </div>

                            <!-- Results Summary -->
                            <div style="margin-bottom: 20px;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 12px; font-size: 0.9em;">
                                    📊 Classification Results
                                </div>
                                <div style="display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 16px;">
                                    <div style="background: var(--bg-tertiary); padding: 12px 16px; border-radius: 8px; text-align: center;">
                                        <div style="font-size: 1.5em; font-weight: 700; color: var(--success-color);">12</div>
                                        <div style="font-size: 0.75em; color: var(--text-muted);">Classified</div>
                                    </div>
                                    
                                    <div style="background: var(--bg-tertiary); padding: 12px 16px; border-radius: 8px; text-align: center;"><div style="font-size: 1.5em; font-weight: 700; color: #6366f1;">12</div><div style="font-size: 0.75em; color: var(--text-muted);">Schema.org matches</div></div>
                                    
                                </div>

                                

                                <div style="margin-bottom: 16px;">
                                    <div style="font-size: 0.8em; color: var(--text-muted); margin-bottom: 8px; display: flex; align-items: center; gap: 6px;">
                                        <span style="background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%); color: white; padding: 2px 8px; border-radius: 4px; font-weight: 600;">Schema.org</span>
                                        General patterns detected
                                    </div>
                                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                        
                <div class="semantic-chip schema-org" title="Schema.org: schema:QuantitativeValue - 3 column(s)">
                    <span class="chip-icon">📋</span>
                    <span class="chip-label">schema:QuantitativeValue</span>
                    <span class="chip-count">3</span>
                    <span class="chip-source">Schema.org</span>
                </div>
                <div class="semantic-chip schema-org" title="Schema.org: schema:identifier - 2 column(s)">
                    <span class="chip-icon">📋</span>
                    <span class="chip-label">schema:identifier</span>
                    <span class="chip-count">2</span>
                    <span class="chip-source">Schema.org</span>
                </div>
                <div class="semantic-chip schema-org" title="Schema.org: schema:CategoryCode - 2 column(s)">
                    <span class="chip-icon">📋</span>
                    <span class="chip-label">schema:CategoryCode</span>
                    <span class="chip-count">2</span>
                    <span class="chip-source">Schema.org</span>
                </div>
                <div class="semantic-chip schema-org" title="Schema.org: schema:Boolean - 1 column(s)">
                    <span class="chip-icon">📋</span>
                    <span class="chip-label">schema:Boolean</span>
                    <span class="chip-count">1</span>
                    <span class="chip-source">Schema.org</span>
                </div>
                <div class="semantic-chip schema-org" title="Schema.org: schema:name - 1 column(s)">
                    <span class="chip-icon">📋</span>
                    <span class="chip-label">schema:name</span>
                    <span class="chip-count">1</span>
                    <span class="chip-source">Schema.org</span>
                </div>
                <div class="semantic-chip schema-org" title="Schema.org: schema:GenderType - 1 column(s)">
                    <span class="chip-icon">📋</span>
                    <span class="chip-label">schema:GenderType</span>
                    <span class="chip-count">1</span>
                    <span class="chip-source">Schema.org</span>
                </div>
                <div class="semantic-chip schema-org" title="Schema.org: schema:MonetaryAmount - 1 column(s)">
                    <span class="chip-icon">📋</span>
                    <span class="chip-label">schema:MonetaryAmount</span>
                    <span class="chip-count">1</span>
                    <span class="chip-source">Schema.org</span>
                </div>
                <div class="semantic-chip schema-org" title="Schema.org: schema:PropertyValue - 1 column(s)">
                    <span class="chip-icon">📋</span>
                    <span class="chip-label">schema:PropertyValue</span>
                    <span class="chip-count">1</span>
                    <span class="chip-source">Schema.org</span>
                </div>
                                    </div>
                                </div>
                            </div>

                            

                            <!-- Technical Layer -->
                            <details style="margin-top: 16px;">
                                <summary style="cursor: pointer; color: var(--text-secondary); font-size: 0.85em; padding: 8px 0;">
                                    🔧 Technical Details: Column Mappings
                                </summary>
                                <div style="margin-top: 12px; overflow-x: auto;">
                                    <table style="width: 100%; border-collapse: collapse; font-size: 0.85em;">
                                        <thead>
                                            <tr style="border-bottom: 1px solid var(--border-subtle);">
                                                <th style="text-align: left; padding: 8px; color: var(--text-muted);">Column</th>
                                                <th style="text-align: left; padding: 8px; color: var(--text-muted);">Semantic Type</th>
                                                <th style="text-align: left; padding: 8px; color: var(--text-muted);">Source</th>
                                                <th style="text-align: left; padding: 8px; color: var(--text-muted);">Confidence</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            
                <tr>
                    <td><code>PassengerId</code></td>
                    <td>Identifier (schema:identifier)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>65%</td>
                </tr>
                <tr>
                    <td><code>Survived</code></td>
                    <td>Boolean flag (schema:Boolean)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>85%</td>
                </tr>
                <tr>
                    <td><code>Pclass</code></td>
                    <td>Category (schema:CategoryCode)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>65%</td>
                </tr>
                <tr>
                    <td><code>Name</code></td>
                    <td>Name (schema:name)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>85%</td>
                </tr>
                <tr>
                    <td><code>Sex</code></td>
                    <td>Gender (schema:GenderType)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>85%</td>
                </tr>
                <tr>
                    <td><code>Age</code></td>
                    <td>Quantity (schema:QuantitativeValue)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>70%</td>
                </tr>
                <tr>
                    <td><code>SibSp</code></td>
                    <td>Quantity (schema:QuantitativeValue)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>70%</td>
                </tr>
                <tr>
                    <td><code>Parch</code></td>
                    <td>Quantity (schema:QuantitativeValue)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>70%</td>
                </tr>
                <tr>
                    <td><code>Ticket</code></td>
                    <td>Identifier (schema:identifier)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>90%</td>
                </tr>
                <tr>
                    <td><code>Fare</code></td>
                    <td>Monetary amount (schema:MonetaryAmount)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>80%</td>
                </tr>
                <tr>
                    <td><code>Cabin</code></td>
                    <td>Property code (schema:PropertyValue)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>78%</td>
                </tr>
                <tr>
                    <td><code>Embarked</code></td>
                    <td>Category code (schema:CategoryCode)</td>
                    <td><span class="source-badge schema">Schema.org</span></td>
                    <td>85%</td>
                </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="hint-box" style="margin-top: 12px; border-left-color: #8b5cf6;">
                                    <strong>💡 About Semantic Classification:</strong><br>
                                    <strong>FIBO</strong> (Financial Industry Business Ontology) identifies financial domain patterns like accounts, transactions, and monetary values.
                                    <strong>Schema.org</strong> provides general web vocabulary for common types like Person, Organization, Email, and Address.
                                    DataK9 uses the best match from either ontology to drive intelligent validation suggestions.
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- Quality Metrics Accordion -->
                
                <div class="accordion" id="section-missingness" data-accordion="quality">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon quality">✓</div>
                            <div>
                                <div class="accordion-title">Missingness & Bias</div>
                                <div class="accordion-subtitle">Completeness, null patterns, and data coverage</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge warning">78%</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-body">
                        <div class="accordion-content">
                            <div class="dual-layer-explanation">
                                <div class="dual-layer-summary">
                                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                                    <div class="dual-layer-summary-text">Your data quality is acceptable but has some areas needing attention. The columns Age, Cabin have missing values that may affect analysis. </div>
                                </div>
                                <details class="dual-layer-technical">
                                    <summary>🧠 Technical Details (click to expand)</summary>
                                    <div class="dual-layer-technical-content">
                                        <div class="dual-layer-technical-grid">
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Overall Score</span>
                                                <span class="dual-layer-technical-item-value">78.1%</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Avg Completeness</span>
                                                <span class="dual-layer-technical-item-value">91.9%</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Avg Validity</span>
                                                <span class="dual-layer-technical-item-value">98.2%</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Columns Below 90%</span>
                                                <span class="dual-layer-technical-item-value">2</span>
                                            </div>
                                        </div>
                                        <div class="dual-layer-technical-context">
                                            <ul>
                                                <li><strong>Quality Score Formula:</strong> (0.4 × Completeness) + (0.3 × Validity) + (0.2 × Consistency) + (0.1 × Uniqueness)</li>
                                                <li>Completeness (40% weight): Percentage of non-null values</li>
                                                <li>Validity (30% weight): Values matching expected type/format</li>
                                                <li>Consistency (20% weight): Pattern uniformity across column</li>
                                                <li>Uniqueness (10% weight): Cardinality relative to column type</li>
                                            </ul>
                                        </div>
                                    </div>
                                </details>
                            </div>
                            <div class="chart-container">
                                <div class="chart-title">Quality Score by Column</div>
                                <canvas id="qualityChart" height="120"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Overview Visualizations - Quality Radar (relocated from Advanced Visualizations) -->
                

                <!-- Value Distribution Accordion -->
                
                <div class="accordion" id="section-distributions" data-accordion="distribution">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon quality">📊</div>
                            <div>
                                <div class="accordion-title">Distributions</div>
                                <div class="accordion-subtitle">Top values in categorical columns</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge info">3 charts</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-body">
                        <div class="accordion-content">
                            <div class="dual-layer-explanation">
                                <div class="dual-layer-summary">
                                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                                    <div class="dual-layer-summary-text">Your data has 2 categorical columns (Sex, Embarked), each with only a few distinct values. This is typical for label, status, or category fields.</div>
                                </div>
                                <details class="dual-layer-technical">
                                    <summary>🧠 Technical Details (click to expand)</summary>
                                    <div class="dual-layer-technical-content">
                                        <div class="dual-layer-technical-grid">
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Categorical Columns</span>
                                                <span class="dual-layer-technical-item-value">2</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Chart X-Axis</span>
                                                <span class="dual-layer-technical-item-value">Completeness</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Completeness Range</span>
                                                <span class="dual-layer-technical-item-value">77.1%</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Uniqueness Range</span>
                                                <span class="dual-layer-technical-item-value">99.8%</span>
                                            </div>
                                        </div>
                                        <div class="dual-layer-technical-context">
                                            <ul>
                                                <li>Bubble chart: Each bubble represents a column; size = unique value count</li>
                                                <li>Word cloud: Larger words appear more frequently in your data</li>
                                                <li>Use these patterns to build ValidValuesCheck validations</li>
                                            </ul>
                                        </div>
                                    </div>
                                </details>
                            </div>
                            <div style="display: grid; gap: 20px;">
                                <div class="chart-container">
                                    <div class="chart-title">Column Quality: Completeness vs Validity</div>
                                    <canvas id="bubbleChart" height="200"></canvas>
                                </div>
                                <div class="chart-container">
                                    <div class="chart-title">Categorical Values Word Cloud</div>
                                    <div style="color: var(--text-muted); font-size: 0.85em; margin-bottom: 8px;">Showing top values from: ['Sex', 'Embarked']</div>
                                    <div id="wordCloudContainer" style="width: 100%; height: 250px; background: var(--bg-elevated); border-radius: var(--radius-md);"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Distribution Visualizations (relocated from Advanced Visualizations) -->
                
                    <div class="accordion" data-accordion="viz-amounts">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <div class="accordion-title-group">
                                <div class="accordion-icon" style="background: linear-gradient(135deg, #10b981, #059669);">📊</div>
                                <div>
                                    <div class="accordion-title">Amount Distributions (Log Scale)</div>
                                    <div class="accordion-subtitle">Visualize skewed numeric data distributions</div>
                                </div>
                            </div>
                            <div class="accordion-meta">
                                <span class="accordion-badge info">1 Fields</span>
                                <span class="accordion-chevron">▼</span>
                            </div>
                        </div>
                        <div class="accordion-content">
                            <div class="dual-layer-explanation">
                                <div class="dual-layer-summary">
                                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                                    <div class="dual-layer-summary-text">
                                        These charts show how values are spread across each numeric field. We use a special scale that lets you see both small and large values clearly - otherwise big numbers would hide everything else.
                                        
                                    </div>
                                </div>
                                <details class="dual-layer-technical">
                                    <summary>🧠 Technical Details (click to expand)</summary>
                                    <div class="dual-layer-technical-content" style="padding: 12px;">
                                        <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 0.85em;">
                                            <li>Log-scaled histogram bins for wide-range numeric data</li>
                                            <li>Reveals patterns across multiple orders of magnitude</li>
                                            <li>Min/max shown from full dataset (Parquet metadata)</li>
                                        </ul>
                                    </div>
                                </details>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 16px; margin-top: 16px;">
                                
                    <div style="flex: 1; min-width: 300px; background: var(--bg-card); border-radius: 8px; padding: 16px; border: 1px solid var(--border-subtle);">
                        <h4 style="margin: 0 0 8px 0; font-size: 0.95em; color: var(--text-primary);">Fare</h4>
                        <div style="font-size: 0.8em; color: var(--text-muted); margin-bottom: 4px;">
                            Min: 0.00 | Max: 512.33 | Median: 14.50
                        </div>
                        
                        <div style="height: 180px;">
                            <canvas id="amountLogHist_0"></canvas>
                        </div>
                    </div>
                            </div>
                            <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                const amountCharts = [{"id": "amountLogHist_0", "labels": ["4", "5", "6", "7", "8", "9", "11", "12", "15", "17", "20", "24", "28", "33", "39", "45", "53", "63", "74", "87", "102", "120", "141", "165", "194", "228", "268", "315", "371", "436"], "data": [1, 1, 5, 75, 216, 51, 15, 78, 39, 19, 32, 92, 43, 20, 18, 30, 22, 22, 34, 10, 11, 11, 11, 0, 9, 8, 0, 0, 0, 3]}];
                                amountCharts.forEach(chart => {
                                    const ctx = document.getElementById(chart.id);
                                    if (ctx) {
                                        new Chart(ctx, {
                                            type: 'bar',
                                            data: {
                                                labels: chart.labels,
                                                datasets: [{
                                                    label: 'Frequency',
                                                    data: chart.data,
                                                    backgroundColor: 'rgba(16, 185, 129, 0.6)',
                                                    borderColor: 'rgba(16, 185, 129, 1)',
                                                    borderWidth: 1
                                                }]
                                            },
                                            options: {
                                                responsive: true,
                                                maintainAspectRatio: false,
                                                plugins: { legend: { display: false } },
                                                scales: {
                                                    x: {
                                                        title: { display: true, text: 'Value (log scale)', color: '#64748b' },
                                                        ticks: { display: false },
                                                        grid: { color: 'rgba(148, 163, 184, 0.1)' }
                                                    },
                                                    y: {
                                                        title: { display: true, text: 'Count', color: '#64748b' },
                                                        grid: { color: 'rgba(148, 163, 184, 0.1)' },
                                                        ticks: { color: '#64748b' }
                                                    }
                                                }
                                            }
                                        });
                                    }
                                });
                            });
                            </script>
                        </div>
                    </div>
                    <div class="accordion" data-accordion="viz-imbalance">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <div class="accordion-title-group">
                                <div class="accordion-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">⚖️</div>
                                <div>
                                    <div class="accordion-title">Class Distribution & Imbalance</div>
                                    <div class="accordion-subtitle">Low-cardinality field distributions (1 potential target detected)</div>
                                </div>
                            </div>
                            <div class="accordion-meta">
                                <span class="accordion-badge info">2 Fields</span>
                                <span class="accordion-chevron">▼</span>
                            </div>
                        </div>
                        <div class="accordion-content">
                            <div class="dual-layer-explanation">
                                <div class="dual-layer-summary">
                                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                                    <div class="dual-layer-summary-text">
                                        These charts show how values are split across categories. When one group is much smaller than others (less than 10%), it can cause problems for analysis because the small group gets overlooked.
                                        
                                    </div>
                                </div>
                                <details class="dual-layer-technical">
                                    <summary>🧠 Technical Details (click to expand)</summary>
                                    <div class="dual-layer-technical-content" style="padding: 12px;">
                                        <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 0.85em;">
                                            <li>Minority class &lt;10% = critical imbalance for ML models</li>
                                            <li>Solutions: SMOTE oversampling, class weights, stratified sampling</li>
                                            <li>Alternative metrics: F1-score, precision-recall AUC, Cohen's kappa</li>
                                        </ul>
                                        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-subtle);">
                                            <p style="font-weight: 600; margin-bottom: 8px; color: var(--text-secondary);">🎯 Target Detection Logic:</p>
                                            <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 0.85em;">
                                                <li><strong>Keyword match:</strong> target, label, class, outcome, churn, fraud, survived, etc.</li>
                                                <li><strong>Pattern match:</strong> is_*, has_*, *_flag, *_indicator prefixes/suffixes</li>
                                                <li><strong>Binary columns:</strong> Fields with exactly 2 unique values + target-like name</li>
                                                <li><strong>Low cardinality:</strong> ≤5 unique values + keyword match</li>
                                            </ul>
                                        </div>
                                    </div>
                                </details>
                            </div>
                            
                    <div style="margin-bottom: 16px;">
                        <div style="font-size: 0.75em; text-transform: uppercase; letter-spacing: 0.5px; color: #f59e0b; font-weight: 600; margin-bottom: 8px;">Detected ML Target</div>
                        <div style="display: flex; flex-wrap: wrap; gap: 16px;">
                    <div style="flex: 1; min-width: 280px; background: var(--bg-card); border-radius: 8px; padding: 16px; border: 2px solid #f59e0b; position: relative;">
                        <div style="position: absolute; top: -10px; left: 12px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; font-size: 0.7em; font-weight: 600; padding: 2px 8px; border-radius: 4px;">🎯 ML TARGET</div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; margin-top: 4px;">
                            <h4 style="margin: 0; font-size: 0.95em; color: var(--text-primary);">Survived</h4>
                            <span class="accordion-badge good">Minority class: 38.4%</span>
                        </div>
                        <div style="height: 200px;">
                            <canvas id="classImbalance_0"></canvas>
                        </div>
                        <div style="font-size: 0.8em; color: var(--text-muted); margin-top: 8px; text-align: center;">
                            Total: 891
                        </div>
                    </div></div>
                    </div>
                    <div>
                        <div style="font-size: 0.75em; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); font-weight: 600; margin-bottom: 8px;">Other Categorical Fields</div>
                        <div style="display: flex; flex-wrap: wrap; gap: 16px;">
                    <div style="flex: 1; min-width: 280px; background: var(--bg-card); border-radius: 8px; padding: 16px; border: 1px solid var(--border-subtle);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                            <h4 style="margin: 0; font-size: 0.95em; color: var(--text-primary);">Sex</h4>
                            <span class="accordion-badge good">Minority class: 35.2%</span>
                        </div>
                        <div style="height: 200px;">
                            <canvas id="classImbalance_1"></canvas>
                        </div>
                        <div style="font-size: 0.8em; color: var(--text-muted); margin-top: 8px; text-align: center;">
                            Total: 891
                        </div>
                    </div></div>
                    </div>
                            <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                const imbalanceCharts = [{"id": "classImbalance_0", "labels": ["0", "1"], "data": [549, 342], "percentages": [61.62, 38.38]}, {"id": "classImbalance_1", "labels": ["male", "female"], "data": [577, 314], "percentages": [64.76, 35.24]}];
                                const colors = ['rgba(139, 92, 246, 0.8)', 'rgba(59, 130, 246, 0.8)', 'rgba(16, 185, 129, 0.8)',
                                               'rgba(245, 158, 11, 0.8)', 'rgba(239, 68, 68, 0.8)', 'rgba(236, 72, 153, 0.8)'];
                                imbalanceCharts.forEach(chart => {
                                    const ctx = document.getElementById(chart.id);
                                    if (ctx) {
                                        new Chart(ctx, {
                                            type: 'bar',
                                            data: {
                                                labels: chart.labels,
                                                datasets: [{
                                                    label: 'Count',
                                                    data: chart.data,
                                                    backgroundColor: colors.slice(0, chart.labels.length),
                                                    borderWidth: 0,
                                                    borderRadius: 4
                                                }]
                                            },
                                            options: {
                                                responsive: true,
                                                maintainAspectRatio: false,
                                                plugins: {
                                                    legend: { display: false },
                                                    tooltip: {
                                                        callbacks: {
                                                            label: function(context) {
                                                                const pct = chart.percentages[context.dataIndex];
                                                                return `Count: ${context.raw.toLocaleString()} (${pct}%)`;
                                                            }
                                                        }
                                                    }
                                                },
                                                scales: {
                                                    x: {
                                                        grid: { display: false },
                                                        ticks: { color: '#94a3b8', font: { size: 11 } }
                                                    },
                                                    y: {
                                                        grid: { color: 'rgba(148, 163, 184, 0.1)' },
                                                        ticks: { color: '#64748b' }
                                                    }
                                                }
                                            }
                                        });
                                    }
                                });
                            });
                            </script>
                        </div>
                    </div>
                    <div class="accordion" data-accordion="viz-box-plots">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <div class="accordion-title-group">
                                <div class="accordion-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">📦</div>
                                <div>
                                    <div class="accordion-title">Numeric Distribution Summary</div>
                                    <div class="accordion-subtitle">Quartiles and outlier bounds at a glance</div>
                                </div>
                            </div>
                            <div class="accordion-meta">
                                <span class="accordion-badge info">5 Fields</span>
                                <span class="accordion-chevron">▼</span>
                            </div>
                        </div>
                        <div class="accordion-content">
                            
            <div class="dual-layer-explanation">
                <div class="dual-layer-summary">
                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                    <div class="dual-layer-summary-text">Outlier rates are low across all 5 number columns (averaging 0.00%). This means the data is well-behaved with very few extreme values. Most numbers fall in a normal-looking range. Note: this view uses only traditional box-plot rules (IQR). It may show zero classic outliers even when the ML-based anomaly detectors highlight unusual patterns.</div>
                </div>
                
                <details class="dual-layer-technical">
                    <summary>🧠 Technical Details (click to expand)</summary>
                    <div class="dual-layer-technical-content">
                        <div class="dual-layer-technical-grid">
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Method</span>
                        <span class="dual-layer-technical-item-value">IQR (Tukey's Fences)</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Fields Analyzed</span>
                        <span class="dual-layer-technical-item-value">5</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Avg Outlier Rate</span>
                        <span class="dual-layer-technical-item-value">0.00%</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Highest</span>
                        <span class="dual-layer-technical-item-value">PassengerId (0.00%)</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Lowest</span>
                        <span class="dual-layer-technical-item-value">PassengerId (0.00%)</span>
                    </div></div>
                        
                <div class="dual-layer-technical-context">
                    <ul><li>Lower bound: Q1 - 1.5 × IQR</li><li>Upper bound: Q3 + 1.5 × IQR</li><li>IQR = Q3 - Q1 (interquartile range)</li><li>Values outside bounds are flagged as outliers</li></ul>
                </div>
                    </div>
                </details>
            </div>
                            <div style="background: var(--bg-card); border-radius: 8px; padding: 16px; height: 300px;">
                                <canvas id="boxPlotChart"></canvas>
                            </div>
                            <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                const boxCtx = document.getElementById('boxPlotChart');
                                if (boxCtx) {
                                    const boxData = [{"col": "PassengerId", "min": 0.0, "q1": 0, "median": 0.0, "q3": 0, "max": 0.0, "outlier_pct": 0}, {"col": "Age", "min": 0.0, "q1": 0, "median": 0.0, "q3": 0, "max": 0.0, "outlier_pct": 0}, {"col": "SibSp", "min": 0.0, "q1": 0, "median": 0.0, "q3": 0, "max": 0.0, "outlier_pct": 0}, {"col": "Parch", "min": 0.0, "q1": 0, "median": 0.0, "q3": 0, "max": 0.0, "outlier_pct": 0}, {"col": "Fare", "min": 0.0, "q1": 0, "median": 0.0, "q3": 0, "max": 0.0, "outlier_pct": 0}];
                                    const labels = boxData.map(d => d.col.length > 15 ? d.col.slice(0, 12) + '...' : d.col);

                                    // Normalize data for comparison (show relative positions)
                                    const normalizedData = boxData.map(d => {
                                        const range = d.max - d.min;
                                        if (range === 0) return { q1: 0.25, median: 0.5, q3: 0.75, min: 0, max: 1 };
                                        return {
                                            min: 0,
                                            q1: (d.q1 - d.min) / range,
                                            median: (d.median - d.min) / range,
                                            q3: (d.q3 - d.min) / range,
                                            max: 1
                                        };
                                    });

                                    new Chart(boxCtx, {
                                        type: 'bar',
                                        data: {
                                            labels: labels,
                                            datasets: [
                                                {
                                                    label: 'IQR',
                                                    data: normalizedData.map(d => d.q3 - d.q1),
                                                    backgroundColor: 'rgba(6, 182, 212, 0.6)',
                                                    borderColor: 'rgba(6, 182, 212, 1)',
                                                    borderWidth: 1
                                                }
                                            ]
                                        },
                                        options: {
                                            responsive: true,
                                            maintainAspectRatio: false,
                                            plugins: {
                                                legend: { display: false },
                                                tooltip: {
                                                    callbacks: {
                                                        label: function(ctx) {
                                                            const d = boxData[ctx.dataIndex];
                                                            return [
                                                                `Q1: ${d.q1.toLocaleString()}`,
                                                                `Median: ${d.median.toLocaleString()}`,
                                                                `Q3: ${d.q3.toLocaleString()}`,
                                                                `Outliers: ${d.outlier_pct.toFixed(1)}%`
                                                            ];
                                                        }
                                                    }
                                                }
                                            },
                                            scales: {
                                                x: {
                                                    grid: { display: false },
                                                    ticks: { color: '#94a3b8', font: { size: 10 }, maxRotation: 45 }
                                                },
                                                y: {
                                                    display: false
                                                }
                                            }
                                        }
                                    });
                                }
                            });
                            </script>
                        </div>
                    </div>
                <div class="accordion" data-accordion="viz-outlier-comparison">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">📊</div>
                            <div>
                                <div class="accordion-title">Outlier Comparison</div>
                                <div class="accordion-subtitle">Compare outlier rates across numeric fields</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge info">5 Fields</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-content">
                        
            <div class="dual-layer-explanation">
                <div class="dual-layer-summary">
                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                    <div class="dual-layer-summary-text">Extreme values vary across columns. 'Fare' has the most (4.71%) while 'Parch' has the fewest (0.11%). Columns with more extremes may be worth looking at more closely.</div>
                </div>
                
                <details class="dual-layer-technical">
                    <summary>🧠 Technical Details (click to expand)</summary>
                    <div class="dual-layer-technical-content">
                        <div class="dual-layer-technical-grid">
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Fields Analyzed</span>
                        <span class="dual-layer-technical-item-value">5</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Total Outliers</span>
                        <span class="dual-layer-technical-item-value">64</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Avg Outlier Rate</span>
                        <span class="dual-layer-technical-item-value">1.46%</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Highest</span>
                        <span class="dual-layer-technical-item-value">Fare (4.71%)</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">High Rate (>5%)</span>
                        <span class="dual-layer-technical-item-value">0 fields</span>
                    </div></div>
                        
                <div class="dual-layer-technical-context">
                    <ul><li>Outlier detection uses IQR (Interquartile Range) method</li><li>Lower bound: Q1 - 1.5 × IQR</li><li>Upper bound: Q3 + 1.5 × IQR</li><li>Red bars: >5% outliers, Yellow: 1-5%, Green: <1%</li></ul>
                </div>
                    </div>
                </details>
            </div>
                        <div style="background: var(--bg-card); border-radius: 8px; padding: 16px; height: 300px;">
                            <canvas id="outlierComparisonChart"></canvas>
                        </div>
                        <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            const outlierCtx = document.getElementById('outlierComparisonChart');
                            if (outlierCtx) {
                                const outlierData = [{"col": "Fare", "pct": 4.7138, "count": 42}, {"col": "SibSp", "pct": 1.3468, "count": 12}, {"col": "PassengerId", "pct": 0.5612, "count": 5}, {"col": "Age", "pct": 0.5602, "count": 4}, {"col": "Parch", "pct": 0.1122, "count": 1}];
                                new Chart(outlierCtx, {
                                    type: 'bar',
                                    data: {
                                        labels: outlierData.map(d => d.col.length > 12 ? d.col.slice(0, 10) + '...' : d.col),
                                        datasets: [{
                                            label: 'Outlier %',
                                            data: outlierData.map(d => d.pct),
                                            backgroundColor: outlierData.map(d => d.pct > 5 ? 'rgba(239, 68, 68, 0.7)' : d.pct > 1 ? 'rgba(245, 158, 11, 0.7)' : 'rgba(34, 197, 94, 0.7)'),
                                            borderWidth: 0,
                                            borderRadius: 4
                                        }]
                                    },
                                    options: {
                                        responsive: true,
                                        maintainAspectRatio: false,
                                        indexAxis: 'y',
                                        plugins: {
                                            legend: { display: false },
                                            tooltip: {
                                                callbacks: {
                                                    label: function(ctx) {
                                                        const d = outlierData[ctx.dataIndex];
                                                        return `${d.pct.toFixed(2)}% (${d.count.toLocaleString()} values)`;
                                                    }
                                                }
                                            }
                                        },
                                        scales: {
                                            x: {
                                                title: { display: true, text: 'Outlier Percentage', color: '#64748b' },
                                                grid: { color: 'rgba(148, 163, 184, 0.1)' },
                                                ticks: { color: '#64748b' }
                                            },
                                            y: {
                                                grid: { display: false },
                                                ticks: { color: '#94a3b8', font: { size: 10 } }
                                            }
                                        }
                                    }
                                });
                            }
                        });
                        </script>
                    </div>
                </div>

                <!-- Temporal Analysis Accordion -->
                

                <!-- Temporal Visualizations (relocated from Advanced Visualizations) -->
                
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- 4. DATA INSIGHTS - ML-powered patterns & anomalies              -->
        <!-- ═══════════════════════════════════════════════════════════════ -->

        <!-- PII Risk Section (if detected) - still important to highlight -->
        
        <div class="accordion pii-alert" data-accordion="pii" style="border: 2px solid var(--critical); background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, var(--bg-card) 100%);">
            <div class="accordion-header" onclick="toggleAccordion(this)" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, transparent 100%);">
                <div class="accordion-title-group">
                    <div class="accordion-icon issues" style="background: var(--critical-soft);">🔒</div>
                    <div>
                        <div class="accordion-title" style="color: var(--critical);">⚠️ Privacy & PII Risk Detected</div>
                        <div class="accordion-subtitle">1 column(s) contain sensitive data</div>
                    </div>
                </div>
                <div class="accordion-meta">
                    <span class="accordion-badge critical">MEDIUM</span>
                    <span class="accordion-chevron">▼</span>
                </div>
            </div>
            <div class="accordion-body">
                <div class="accordion-content">
                    <div class="pii-risk-card">
                        <div class="pii-risk-header">
                            <div class="pii-risk-score">50 / 100</div>
                            <div class="pii-risk-level">Medium Risk</div>
                        </div>
                    </div>
                    
            <table style="width: 100%; border-collapse: collapse; margin-top: 12px;">
                <thead>
                    <tr style="text-align: left; border-bottom: 1px solid var(--border-color);">
                        <th style="padding: 8px; color: var(--text-secondary);">Column</th>
                        <th style="padding: 8px; color: var(--text-secondary);">PII Type</th>
                        <th style="padding: 8px; color: var(--text-secondary);">Frameworks</th>
                        <th style="padding: 8px; color: var(--text-secondary);">Risk</th>
                    </tr>
                </thead>
                <tbody>
                <tr>
                    <td><strong>Name</strong></td>
                    <td><span class="pii-type-badge">Name (detected)</span></td>
                    <td>N/A</td>
                    <td style="color: var(--text-primary);">50</td>
                </tr></tbody>
            </table>

                    <details class="dual-layer-technical" style="margin-top: 16px;">
                        <summary>🧠 PII Detection Logic (click to expand)</summary>
                        <div class="dual-layer-technical-content">
                            <div class="dual-layer-technical-context">
                                <p style="margin-bottom: 12px; color: var(--text-secondary);">The following semantic types are flagged as PII:</p>
                                <ul>
                                    <li><strong>Direct Identifiers:</strong> Email, Phone, SSN/National ID, Passport, Driver's License</li>
                                    <li><strong>Financial:</strong> Credit Card, Bank Account, Tax ID</li>
                                    <li><strong>Personal:</strong> Name, Birth Date, Address, Medical Record Number</li>
                                    <li><strong>Biometric:</strong> IP Address, Geolocation, Device ID</li>
                                </ul>
                                <p style="margin-top: 12px; color: var(--text-secondary);">Detection uses pattern matching (regex), column name heuristics, and semantic type inference. Risk scores (0-100) are calculated based on re-identification potential and regulatory sensitivity (GDPR, CCPA, HIPAA).</p>
                            </div>
                        </div>
                    </details>
                </div>
            </div>
        </div>

        <!-- v2 Insight Widgets (Plain English + Examples + Technical) -->
        
        <section id="section-anomalies">
            <div class="section-header-v2">
                <div>
                    <span class="section-header-v2-icon">💡</span>
                    <span class="section-header-v2-title">Anomalies & Patterns</span>
                    <div class="section-header-v2-subtitle">Patterns observed from analyzing 891 rows in 2.8s</div>
                </div>
                <span class="section-header-v2-badge observations">OBSERVATIONS</span>
            </div>
            
        <div class="insight-widget">
            <div class="insight-widget-header" onclick="this.closest('.insight-widget').classList.toggle('collapsed')">
                <div class="insight-widget-title-group">
                    <span class="insight-widget-icon">🧠</span>
                    <span class="insight-widget-title">Field-Level Outliers</span>
                    <span class="insight-ml-badge">🧠 Isolation Forest</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span class="insight-widget-badge warning">7.18% of rows</span>
                    <span class="insight-widget-chevron">▼</span>
                </div>
            </div>

            <div class="insight-widget-body">
                <!-- Plain English Summary (always visible) -->
                <div class="insight-summary">
                    <div class="insight-summary-label">Plain-English Summary</div>
                    <div class="insight-summary-text">About 7.18% of values (64 records) stand out as very different
from most other values in their columns. These might be typos, special cases, or simply
unusual but valid entries worth reviewing. These anomalies are based on statistical isolation,
not just being outside the IQR bounds. It is normal for this method to find unusual points
even when IQR outliers are rare.</div>
                </div>

                <!-- Example Table -->
                <div class="insight-examples">
                    <div class="insight-examples-label">Examples From Your Data</div>
                    <table class="insight-examples-table">
                        <thead>
                            <tr><th>Column</th><th>Outlier Value</th><th>Typical (Median)</th></tr>
                        </thead>
                        <tbody>
                            
                        <tr>
                            <td>PassengerId</td>
                            <td class="value-highlight">1.00</td>
                            <td class="value-normal">446.00</td>
                        </tr>
                        <tr>
                            <td>PassengerId</td>
                            <td class="value-highlight">2.00</td>
                            <td class="value-normal">446.00</td>
                        </tr>
                        <tr>
                            <td>Age</td>
                            <td class="value-highlight">80.00</td>
                            <td class="value-normal">28.00</td>
                        </tr>
                        <tr>
                            <td>Age</td>
                            <td class="value-highlight">74.00</td>
                            <td class="value-normal">28.00</td>
                        </tr>
                        <tr>
                            <td>SibSp</td>
                            <td class="value-highlight">8.00</td>
                            <td class="value-normal">N/A</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Semantic Confidence (if applicable) -->
                
                <div style="display: flex; align-items: center; gap: 6px; margin-top: 8px; padding: 6px 10px; background: rgba(245, 158, 11, 0.1); border-radius: 6px; font-size: 0.8em;">
                    <span style="background: #f59e0b; color: white; padding: 2px 8px; border-radius: 4px; font-weight: 600; font-size: 0.85em;">Interpret with caution</span>
                    <span style="color: var(--text-secondary);">Some columns may not be ideal for outlier detection based on their semantic types.</span>
                </div>

                <!-- Technical Details (Collapsed by default) -->
                <details class="dual-layer-technical">
                    <summary>🧠 Technical Details (click to expand)</summary>
                    <div class="dual-layer-technical-content">
                        <div class="dual-layer-technical-grid">
                            
                    <div class="insight-technical-item">
                        <span class="insight-technical-item-label">PassengerId</span>
                        <span class="insight-technical-item-value">5 outliers • isolation_forest • confidence: Medium</span>
                    </div>
                    <div class="insight-technical-item">
                        <span class="insight-technical-item-label">Age</span>
                        <span class="insight-technical-item-value">4 outliers • isolation_forest • confidence: Low</span>
                    </div>
                    <div class="insight-technical-item">
                        <span class="insight-technical-item-label">SibSp</span>
                        <span class="insight-technical-item-value">12 outliers • isolation_forest • confidence: Medium</span>
                    </div>
                        </div>
                        <div class="dual-layer-technical-context">
                            <ul>
                                <li>ML Model: Isolation Forest (unsupervised anomaly detection)</li><li>Sample Size: 891 rows</li><li>Columns Analyzed: 5</li>
                            </ul>
                        </div>
                    </div>
                </details>
            </div>
        </div>
        
        <div class="insight-widget">
            <div class="insight-widget-header" onclick="this.closest('.insight-widget').classList.toggle('collapsed')">
                <div class="insight-widget-title-group">
                    <span class="insight-widget-icon">🧠</span>
                    <span class="insight-widget-title">Row-Level Anomalies</span>
                    <span class="insight-ml-badge">🧠 autoencoder</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span class="insight-widget-badge warning">7.42%</span>
                    <span class="insight-widget-chevron">▼</span>
                </div>
            </div>

            <div class="insight-widget-body">
                <!-- Plain English Summary (always visible) -->
                <div class="insight-summary">
                    <div class="insight-summary-label">Plain-English Summary</div>
                    <div class="insight-summary-text">About 7.42% of records (53) have unusual combinations
of values across multiple fields. These rows look different from typical patterns in your
data and might be rare cases, data entry issues, or special situations worth reviewing.
These anomalies reflect rows that are hard for the model to reconstruct, which can capture
unusual combinations of values even when each individual field looks numerically well-behaved.</div>
                </div>

                <!-- Example Table -->
                <div class="insight-examples">
                    <div class="insight-examples-label">Examples From Your Data</div>
                    <table class="insight-examples-table">
                        <thead>
                            <tr><th>Sample Records with Unusual Patterns</th></tr>
                        </thead>
                        <tbody>
                            
                    <tr>
                        <td style="max-width: 400px; font-size: 0.85em;">PassengerId: 738.00 | Age: 35.00 | SibSp: 0.00 | Parch: 0.00</td>
                    </tr>
                    <tr>
                        <td style="max-width: 400px; font-size: 0.85em;">PassengerId: 259.00 | Age: 35.00 | SibSp: 0.00 | Parch: 0.00</td>
                    </tr>
                    <tr>
                        <td style="max-width: 400px; font-size: 0.85em;">PassengerId: 680.00 | Age: 36.00 | SibSp: 0.00 | Parch: 1.00</td>
                    </tr>
                    <tr>
                        <td style="max-width: 400px; font-size: 0.85em;">PassengerId: 679.00 | Age: 43.00 | SibSp: 1.00 | Parch: 6.00</td>
                    </tr>
                    <tr>
                        <td style="max-width: 400px; font-size: 0.85em;">PassengerId: 28.00 | Age: 19.00 | SibSp: 3.00 | Parch: 2.00</td>
                    </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Semantic Confidence (if applicable) -->
                
                <div style="display: flex; align-items: center; gap: 6px; margin-top: 8px; padding: 6px 10px; background: rgba(34, 197, 94, 0.1); border-radius: 6px; font-size: 0.8em;">
                    <span style="background: #22c55e; color: white; padding: 2px 8px; border-radius: 4px; font-weight: 600; font-size: 0.85em;">Good fit</span>
                    <span style="color: var(--text-secondary);">Multi-column pattern analysis considers field interactions holistically.</span>
                </div>

                <!-- Technical Details (Collapsed by default) -->
                <details class="dual-layer-technical">
                    <summary>🧠 Technical Details (click to expand)</summary>
                    <div class="dual-layer-technical-content">
                        <div class="dual-layer-technical-grid">
                            
                    <div class="insight-technical-item">
                        <span class="insight-technical-item-label">Method</span>
                        <span class="insight-technical-item-value">autoencoder</span>
                    </div>
                    <div class="insight-technical-item">
                        <span class="insight-technical-item-label">Columns Analyzed</span>
                        <span class="insight-technical-item-value">['PassengerId', 'Age', 'SibSp', 'Parch', 'Fare']</span>
                    </div>
                    <div class="insight-technical-item">
                        <span class="insight-technical-item-label">Contamination</span>
                        <span class="insight-technical-item-value">auto</span>
                    </div>
                
                        </div>
                        <div class="dual-layer-technical-context">
                            <ul>
                                <li>ML Model: autoencoder (multivariate anomaly detection)</li><li>Analyzes multiple columns together to find unusual combinations</li><li>Useful for detecting data entry errors, process anomalies, or rare edge cases</li>
                            </ul>
                        </div>
                    </div>
                </details>
            </div>
        </div>
        
        <div class="insight-widget">
            <div class="insight-widget-header" onclick="this.closest('.insight-widget').classList.toggle('collapsed')">
                <div class="insight-widget-title-group">
                    <span class="insight-widget-icon">🕳️</span>
                    <span class="insight-widget-title">Missing Data Bias: Survived</span>
                    <span class="insight-ml-badge">🧠 Missingness Analysis</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span class="insight-widget-badge warning">2 biased</span>
                    <span class="insight-widget-chevron">▼</span>
                </div>
            </div>

            <div class="insight-widget-body">
                <!-- Plain English Summary (always visible) -->
                <div class="insight-summary">
                    <div class="insight-summary-label">Plain-English Summary</div>
                    <div class="insight-summary-text">Found 2 column(s) where missing values occur more
often in some groups than others (based on 'Survived'). This means the gaps in your data
aren't random and could make certain groups under-represented if not handled carefully.</div>
                </div>

                <!-- Example Table -->
                <div class="insight-examples">
                    <div class="insight-examples-label">Examples From Your Data</div>
                    <table class="insight-examples-table">
                        <thead>
                            <tr><th>Feature</th><th>Rate Diff</th><th>Missingness by Class</th></tr>
                        </thead>
                        <tbody>
                            
                    <tr>
                        <td>Cabin</td>
                        <td class="value-highlight">27.4%</td>
                        <td style="font-size: 0.85em;">0: 87.6%, 1: 60.2%</td>
                    </tr>
                    <tr>
                        <td>Age</td>
                        <td class="value-highlight">7.6%</td>
                        <td style="font-size: 0.85em;">0: 22.8%, 1: 15.2%</td>
                    </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Semantic Confidence (if applicable) -->
                

                <!-- Technical Details (Collapsed by default) -->
                <details class="dual-layer-technical">
                    <summary>🧠 Technical Details (click to expand)</summary>
                    <div class="dual-layer-technical-content">
                        <div class="dual-layer-technical-grid">
                            
                        <div class="insight-technical-item">
                            <span class="insight-technical-item-label">Target Column</span>
                            <span class="insight-technical-item-value">Survived</span>
                        </div>
                        <div class="insight-technical-item">
                            <span class="insight-technical-item-label">Features with Bias</span>
                            <span class="insight-technical-item-value">2 of 3</span>
                        </div>
                    
                        </div>
                        <div class="dual-layer-technical-context">
                            <ul>
                                <li>Compares missing data rates across target classes</li><li>Threshold: ≥5% difference flags potential non-random missingness</li><li>Non-random missing data can bias ML models and statistical analyses</li>
                            </ul>
                        </div>
                    </div>
                </details>
            </div>
        </div>
        
        </section>
        

        <!-- Anomaly Visualizations (relocated from Advanced Visualizations) -->
        
                <div class="accordion" data-accordion="viz-autoencoder">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon" style="background: linear-gradient(135deg, #ec4899, #be185d);">🧠</div>
                            <div>
                                <div class="accordion-title">Autoencoder Reconstruction Errors</div>
                                <div class="accordion-subtitle">Deep learning anomaly detection</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge critical">53 Anomalies</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-content">
                        
            <div class="dual-layer-explanation">
                <div class="dual-layer-summary">
                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                    <div class="dual-layer-summary-text">This analysis found 53 rows (7.42%) that look unusual compared to the rest of the data. These rows have combinations of values that don't fit the typical patterns, which could indicate data entry issues, rare cases, or special situations worth reviewing.</div>
                </div>
                
                <details class="dual-layer-technical">
                    <summary>🧠 Technical Details (click to expand)</summary>
                    <div class="dual-layer-technical-content">
                        <div class="dual-layer-technical-grid">
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Median Error</span>
                        <span class="dual-layer-technical-item-value">0.2738</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Q75 Error</span>
                        <span class="dual-layer-technical-item-value">0.5601</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Anomaly Threshold</span>
                        <span class="dual-layer-technical-item-value">1.6777</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Anomaly Rate</span>
                        <span class="dual-layer-technical-item-value">7.42%</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Anomalies Found</span>
                        <span class="dual-layer-technical-item-value">53</span>
                    </div></div>
                        
                <div class="dual-layer-technical-context">
                    <ul><li>Autoencoder neural network learns normal data patterns</li><li>Reconstruction error = how different a record is from normal</li><li>Records above threshold are flagged as anomalies</li><li>Threshold based on mean + 2.5 standard deviations</li></ul>
                </div>
                    </div>
                </details>
            </div>
                        <div style="background: var(--bg-card); border-radius: 8px; padding: 16px; height: 200px; margin-top: 16px;">
                            <canvas id="reconErrorChart"></canvas>
                        </div>
                        <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            const reconCtx = document.getElementById('reconErrorChart');
                            if (reconCtx) {
                                // Use median for center (robust to outliers) and IQR-based scale
                                const median = 0.2738;
                                const q75 = 0.5601;
                                const threshold = 1.67765785;
                                // Use IQR to estimate distribution width (more robust than std)
                                const iqr = (q75 - median) * 2;  // Approximate IQR
                                const displayStd = iqr > 0 ? iqr : 0.001;  // Fallback for very tight distributions
                                const bins = 40;
                                const labels = [];
                                const data = [];
                                const bgColors = [];

                                for (let i = 0; i < bins; i++) {
                                    const x = median - 3*displayStd + (6*displayStd/bins) * i;
                                    const y = Math.exp(-0.5 * Math.pow((x - median) / displayStd, 2)) * 1000;
                                    labels.push(x.toExponential(2));
                                    data.push(Math.max(0, y));
                                    bgColors.push(x > threshold ? 'rgba(239, 68, 68, 0.7)' : 'rgba(139, 92, 246, 0.6)');
                                }

                                new Chart(reconCtx, {
                                    type: 'bar',
                                    data: {
                                        labels: labels,
                                        datasets: [{
                                            label: 'Frequency',
                                            data: data,
                                            backgroundColor: bgColors,
                                            borderWidth: 0
                                        }]
                                    },
                                    options: {
                                        responsive: true,
                                        maintainAspectRatio: false,
                                        plugins: {
                                            legend: { display: false },
                                            annotation: {
                                                annotations: {
                                                    thresholdLine: {
                                                        type: 'line',
                                                        xMin: threshold,
                                                        xMax: threshold,
                                                        borderColor: 'rgba(239, 68, 68, 1)',
                                                        borderWidth: 2,
                                                        borderDash: [5, 5],
                                                        label: {
                                                            display: true,
                                                            content: 'Threshold',
                                                            position: 'start'
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        scales: {
                                            x: {
                                                display: false
                                            },
                                            y: {
                                                grid: { color: 'rgba(148, 163, 184, 0.1)' },
                                                ticks: { display: false }
                                            }
                                        }
                                    }
                                });
                            }
                        });
                        </script>
                    </div>
                </div>
                <div class="accordion" data-accordion="viz-anomaly-scores">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon" style="background: linear-gradient(135deg, #ef4444, #b91c1c);">🔍</div>
                            <div>
                                <div class="accordion-title">Isolation Forest Anomaly Scores</div>
                                <div class="accordion-subtitle">Statistical outlier detection per numeric field</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge info">5 Fields</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-content">
                        
            <div class="dual-layer-explanation">
                <div class="dual-layer-summary">
                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                    <div class="dual-layer-summary-text">A notable number of records (64, or 7.18%) look unusual compared to the rest of the data. These values stand out because they differ significantly from what most rows contain.</div>
                </div>
                
                <details class="dual-layer-technical">
                    <summary>🧠 Technical Details (click to expand)</summary>
                    <div class="dual-layer-technical-content">
                        <div class="dual-layer-technical-grid">
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Algorithm</span>
                        <span class="dual-layer-technical-item-value">Isolation Forest</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Fields Analyzed</span>
                        <span class="dual-layer-technical-item-value">5</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Total Anomalies</span>
                        <span class="dual-layer-technical-item-value">64</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Anomaly Rate</span>
                        <span class="dual-layer-technical-item-value">7.183%</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Avg Score Range</span>
                        <span class="dual-layer-technical-item-value">-0.093 - -0.021</span>
                    </div></div>
                        
                <div class="dual-layer-technical-context">
                    <ul><li>Isolation Forest scores: lower values = more anomalous (harder to isolate)</li><li>Contamination parameter set to 'auto' (adaptive threshold)</li><li>Each column analyzed independently for outliers</li><li>Anomaly rate = total field anomalies (64) / sample size (891)</li></ul>
                </div>
                    </div>
                </details>
            </div>
                        <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 16px;">
                            
                    <div style="flex: 1; min-width: 200px; background: var(--bg-card); border-radius: 8px; padding: 16px; border: 1px solid var(--border-subtle);">
                        <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: var(--text-primary);">PassengerId</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div style="text-align: center; padding: 8px; background: rgba(139, 92, 246, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--text-primary);">5</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Anomalies</div>
                            </div>
                            <div style="text-align: center; padding: 8px; background: rgba(239, 68, 68, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--good);">0.56%</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Rate</div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; font-size: 0.75em; color: var(--text-muted);">
                            Score range: -0.035 to -0.001
                        </div>
                    </div>
                    <div style="flex: 1; min-width: 200px; background: var(--bg-card); border-radius: 8px; padding: 16px; border: 1px solid var(--border-subtle);">
                        <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: var(--text-primary);">Age</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div style="text-align: center; padding: 8px; background: rgba(139, 92, 246, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--text-primary);">4</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Anomalies</div>
                            </div>
                            <div style="text-align: center; padding: 8px; background: rgba(239, 68, 68, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--good);">0.45%</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Rate</div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; font-size: 0.75em; color: var(--text-muted);">
                            Score range: -0.054 to -0.008
                        </div>
                    </div>
                    <div style="flex: 1; min-width: 200px; background: var(--bg-card); border-radius: 8px; padding: 16px; border: 1px solid var(--border-subtle);">
                        <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: var(--text-primary);">SibSp</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div style="text-align: center; padding: 8px; background: rgba(139, 92, 246, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--text-primary);">12</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Anomalies</div>
                            </div>
                            <div style="text-align: center; padding: 8px; background: rgba(239, 68, 68, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--warning);">1.35%</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Rate</div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; font-size: 0.75em; color: var(--text-muted);">
                            Score range: -0.159 to -0.077
                        </div>
                    </div>
                    <div style="flex: 1; min-width: 200px; background: var(--bg-card); border-radius: 8px; padding: 16px; border: 1px solid var(--border-subtle);">
                        <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: var(--text-primary);">Parch</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div style="text-align: center; padding: 8px; background: rgba(139, 92, 246, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--text-primary);">1</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Anomalies</div>
                            </div>
                            <div style="text-align: center; padding: 8px; background: rgba(239, 68, 68, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--good);">0.11%</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Rate</div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; font-size: 0.75em; color: var(--text-muted);">
                            Score range: -0.016 to -0.016
                        </div>
                    </div>
                    <div style="flex: 1; min-width: 200px; background: var(--bg-card); border-radius: 8px; padding: 16px; border: 1px solid var(--border-subtle);">
                        <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: var(--text-primary);">Fare</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                            <div style="text-align: center; padding: 8px; background: rgba(139, 92, 246, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--text-primary);">42</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Anomalies</div>
                            </div>
                            <div style="text-align: center; padding: 8px; background: rgba(239, 68, 68, 0.1); border-radius: 6px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: var(--warning);">4.71%</div>
                                <div style="font-size: 0.7em; color: var(--text-muted);">Rate</div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; font-size: 0.75em; color: var(--text-muted);">
                            Score range: -0.199 to -0.003
                        </div>
                    </div>
                        </div>
                    </div>
                </div>
                    <div class="accordion" data-accordion="viz-benford">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <div class="accordion-title-group">
                                <div class="accordion-icon" style="background: linear-gradient(135deg, #f97316, #ea580c);">📐</div>
                                <div>
                                    <div class="accordion-title">Benford's Law Analysis</div>
                                    <div class="accordion-subtitle">Detect potential data fabrication in numeric columns</div>
                                </div>
                            </div>
                            <div class="accordion-meta">
                                <span class="accordion-badge info">1 Fields</span>
                                <span class="accordion-chevron">▼</span>
                            </div>
                        </div>
                        <div class="accordion-content">
                            
            <div class="dual-layer-explanation">
                <div class="dual-layer-summary">
                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                    <div class="dual-layer-summary-text">First-digit frequencies deviate significantly from the Benford distribution in 1 of 1 columns analyzed. For naturally occurring transactional datasets this may indicate anomalies, but for pricing or tariff tables it can simply reflect business structure.</div>
                </div>
                
                <details class="dual-layer-technical">
                    <summary>🧠 Technical Details (click to expand)</summary>
                    <div class="dual-layer-technical-content">
                        <div class="dual-layer-technical-grid">
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Fields Analyzed</span>
                        <span class="dual-layer-technical-item-value">1</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Deviations</span>
                        <span class="dual-layer-technical-item-value">1</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Conforming</span>
                        <span class="dual-layer-technical-item-value">0</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Avg Chi-Square</span>
                        <span class="dual-layer-technical-item-value">868.2</span>
                    </div></div>
                        
                <div class="dual-layer-technical-context">
                    <ul><li>Benford's Law: Leading digit 1 appears ~30.1% of the time in natural data</li><li>Chi-square test compares observed vs expected distributions</li><li>Higher chi-square values indicate greater deviation from expected</li><li>Works best with data spanning multiple orders of magnitude</li></ul>
                </div>
                    </div>
                </details>
            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 16px;">
                                
                    <div style="flex: 1; min-width: 280px; background: var(--bg-card); border-radius: 8px; padding: 16px; border: 1px solid var(--border-subtle);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                            <h4 style="margin: 0; font-size: 0.9em; color: var(--text-primary);">Fare</h4>
                            <span class="accordion-badge critical">Benford deviation</span>
                        </div>
                        <div style="height: 180px;">
                            <canvas id="benfordChart_0"></canvas>
                        </div>
                        <div style="font-size: 0.75em; color: var(--text-muted); margin-top: 8px;">
                            Chi-square: 868.2 | Confidence: Very High
                        </div>
                    </div>
                            </div>
                            <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                const benfordData = [{"id": "benfordChart_0", "observed": [24.2, 17.47, 7.31, 1.83, 4.91, 3.2, 27.63, 9.7, 3.77], "expected": [30.1, 17.6, 12.5, 9.7, 7.9, 6.7, 5.8, 5.1, 4.6]}];
                                benfordData.forEach(chart => {
                                    const ctx = document.getElementById(chart.id);
                                    if (ctx) {
                                        new Chart(ctx, {
                                            type: 'bar',
                                            data: {
                                                labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9'],
                                                datasets: [
                                                    {
                                                        label: 'Observed %',
                                                        data: chart.observed,
                                                        backgroundColor: 'rgba(59, 130, 246, 0.7)',
                                                        borderWidth: 0
                                                    },
                                                    {
                                                        label: 'Expected %',
                                                        data: chart.expected,
                                                        backgroundColor: 'rgba(249, 115, 22, 0.7)',
                                                        borderWidth: 0
                                                    }
                                                ]
                                            },
                                            options: {
                                                responsive: true,
                                                maintainAspectRatio: false,
                                                plugins: {
                                                    legend: { display: true, position: 'top', labels: { boxWidth: 12, font: { size: 10 } } }
                                                },
                                                scales: {
                                                    x: { grid: { display: false }, ticks: { color: '#94a3b8' } },
                                                    y: { grid: { color: 'rgba(148, 163, 184, 0.1)' }, ticks: { color: '#64748b' } }
                                                }
                                            }
                                        });
                                    }
                                });
                            });
                            </script>
                        </div>
                    </div>

        <!-- Missingness Visualizations (relocated from Advanced Visualizations) -->
        
                    <div class="accordion" data-accordion="viz-missing-pattern">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <div class="accordion-title-group">
                                <div class="accordion-icon" style="background: linear-gradient(135deg, #a855f7, #7c3aed);">🔳</div>
                                <div>
                                    <div class="accordion-title">Missing Data Pattern Analysis</div>
                                    <div class="accordion-subtitle">Detect non-random missingness across target classes</div>
                                </div>
                            </div>
                            <div class="accordion-meta">
                                <span class="accordion-badge warning">2 Biased Fields</span>
                                <span class="accordion-chevron">▼</span>
                            </div>
                        </div>
                        <div class="accordion-content">
                            
            <div class="dual-layer-explanation">
                <div class="dual-layer-summary">
                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                    <div class="dual-layer-summary-text">Missing values are not evenly spread across different groups in your data. The column 'Cabin' has a 27.38% difference in missing rates between groups. Some groups have more gaps than others, which could affect your analysis if you delete or fill in missing rows without considering this.</div>
                </div>
                
                <details class="dual-layer-technical">
                    <summary>🧠 Technical Details (click to expand)</summary>
                    <div class="dual-layer-technical-content">
                        <div class="dual-layer-technical-grid">
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Fields with Bias</span>
                        <span class="dual-layer-technical-item-value">2</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Max Differential</span>
                        <span class="dual-layer-technical-item-value">27.38%</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Avg Differential</span>
                        <span class="dual-layer-technical-item-value">17.48%</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Critical (>10%)</span>
                        <span class="dual-layer-technical-item-value">1</span>
                    </div>
                    <div class="dual-layer-technical-item">
                        <span class="dual-layer-technical-item-label">Warning (5-10%)</span>
                        <span class="dual-layer-technical-item-value">1</span>
                    </div></div>
                        
                <div class="dual-layer-technical-context">
                    <ul><li>Differential = max missingness rate difference between target classes</li><li>MCAR: Missing Completely At Random (ideal)</li><li>MAR: Missing At Random (conditional on observed data)</li><li>MNAR: Missing Not At Random (problematic for analysis)</li></ul>
                </div>
                    </div>
                </details>
            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 16px;">
                                
                            <div style="flex: 1; min-width: 180px; background: var(--bg-card); border-radius: 8px; padding: 12px; border: 1px solid var(--border-subtle);">
                                <div style="font-size: 0.85em; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">Cabin</div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                    <span style="font-size: 0.75em; color: var(--text-muted);">Overall Missing</span>
                                    <span style="font-size: 0.85em; font-weight: 500; color: var(--text-secondary);">77.1%</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="font-size: 0.75em; color: var(--text-muted);">Differential</span>
                                    <span style="font-size: 0.85em; font-weight: 600; color: var(--critical);">+27.4%</span>
                                </div>
                            </div>
                            <div style="flex: 1; min-width: 180px; background: var(--bg-card); border-radius: 8px; padding: 12px; border: 1px solid var(--border-subtle);">
                                <div style="font-size: 0.85em; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">Age</div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                    <span style="font-size: 0.75em; color: var(--text-muted);">Overall Missing</span>
                                    <span style="font-size: 0.85em; font-weight: 500; color: var(--text-secondary);">19.9%</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="font-size: 0.75em; color: var(--text-muted);">Differential</span>
                                    <span style="font-size: 0.85em; font-weight: 600; color: var(--warning);">+7.6%</span>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>

        <!-- Column Relationships / Correlations -->
        
        <div class="accordion" id="section-correlations" data-accordion="correlations" style="margin-top: 24px;">
            <div class="accordion-header" onclick="toggleAccordion(this)" style="background: linear-gradient(135deg, #4338ca 0%, #6366f1 100%); color: white; padding: 16px 20px; display: flex; align-items: center; gap: 12px; border-radius: var(--radius-lg) var(--radius-lg) 0 0;">
                <span style="font-size: 1.5em;">🔗</span>
                <div style="flex: 1;">
                    <h3 style="margin: 0; font-size: 1.1em; font-weight: 600;">Correlations & Relationships</h3>
                    <p style="margin: 4px 0 0 0; font-size: 0.85em; opacity: 0.9;">6 significant correlation(s) detected</p>
                </div>
                <div style="display: flex; gap: 8px; font-size: 0.75em; align-items: center;">
                    <span style="background: rgba(255,255,255,0.2); padding: 4px 10px; border-radius: 12px;">↑ Positive</span>
                    <span style="background: rgba(255,255,255,0.2); padding: 4px 10px; border-radius: 12px;">↓ Negative</span>
                    <span class="accordion-chevron" style="color: white;">▼</span>
                </div>
            </div>
            <div class="accordion-content" style="background: var(--bg-card); border: 1px solid var(--border-subtle); border-top: none; border-radius: 0 0 var(--radius-lg) var(--radius-lg);">
                <div style="background: rgba(67, 56, 202, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 8px; padding: 12px 16px; margin-bottom: 16px; display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 1.2em;">📊</span>
                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary);">
                        <strong style="color: var(--text-primary);">Ranked by correlation strength</strong> - Strongest relationships appear first.
                        Values closer to +1 or -1 indicate stronger associations between columns.
                    </p>
                </div>
                <div style="display: flex; flex-direction: column; gap: 0;">
                    
                <div class="correlation-card" style="background: var(--bg-card); border-radius: 12px; border-left: 4px solid #dc2626; margin-bottom: 16px; overflow: hidden; position: relative; border: 1px solid var(--border-subtle);">
                    <!-- Rank Badge -->
                    <div style="position: absolute; top: 12px; right: 12px; background: #dc2626; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85em;">#1</div>
                    <!-- Header -->
                    <div style="padding: 16px 20px; display: flex; align-items: center; gap: 14px;">
                        <div style="font-size: 1.8em; color: #dc2626;">↓</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; color: var(--text-primary); font-size: 1.1em;">
                                Pclass <span style="color: var(--text-muted); font-weight: 400;">↔</span> Fare
                            </div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-top: 4px;">
                                Strong negative relationship
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 800; font-size: 1.4em; color: #dc2626;">-0.71</div>
                            <div style="font-size: 0.75em; color: var(--text-muted);">correlation</div>
                        </div>
                    </div>

                    <!-- Dual View Tabs -->
                    <div style="border-top: 1px solid var(--border-subtle);">
                        <div class="dual-view-tabs" style="display: flex; border-bottom: 1px solid var(--border-subtle);">
                            <button class="tab-btn active" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='block'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='none'; this.classList.add('active'); this.nextElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-card); cursor: pointer; font-size: 0.85em; font-weight: 600; color: #818cf8; border-bottom: 2px solid #818cf8;">
                                📝 Plain English
                            </button>
                            <button class="tab-btn" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='none'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='block'; this.classList.add('active'); this.previousElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-primary); cursor: pointer; font-size: 0.85em; font-weight: 500; color: var(--text-secondary); border-bottom: 2px solid transparent;">
                                🔧 Technical Details
                            </button>
                        </div>
                        <div class="tab-content" style="padding: 16px 20px; background: var(--bg-card);">
                            <!-- Plain English View -->
                            <div class="plain-view">
                                <p style="margin: 0 0 10px 0; color: var(--text-primary); line-height: 1.6;">When <strong>Pclass</strong> increases, <strong>Fare</strong> tends to decrease (and vice versa).</p>
                                <div style="background: rgba(245, 158, 11, 0.15); padding: 12px; border-radius: 8px; border-left: 3px solid #f59e0b;">
                                    <div style="font-size: 0.8em; color: #fbbf24; font-weight: 600; margin-bottom: 4px;">💡 What This Means</div>
                                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary);">These columns move in opposite directions - this inverse relationship may indicate a trade-off or constraint in your data.</p>
                                </div>
                            </div>
                            <!-- Technical View -->
                            <div class="tech-view" style="display: none;">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Coefficient</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">-0.7130</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">R² (Variance Explained)</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">50.8%</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Method</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">Spearman</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Strength</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: #dc2626;">Strong</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; padding: 10px 12px; background: var(--bg-primary); border-radius: 6px; border: 1px solid var(--border-subtle);">
                                    <code style="font-size: 0.8em; color: var(--text-secondary);">corr(Pclass, Fare) = -0.7130</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
                <div class="correlation-card" style="background: var(--bg-card); border-radius: 12px; border-left: 4px solid #6b7280; margin-bottom: 16px; overflow: hidden; position: relative; border: 1px solid var(--border-subtle);">
                    <!-- Rank Badge -->
                    <div style="position: absolute; top: 12px; right: 12px; background: #6b7280; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85em;">#2</div>
                    <!-- Header -->
                    <div style="padding: 16px 20px; display: flex; align-items: center; gap: 14px;">
                        <div style="font-size: 1.8em; color: #6b7280;">↑</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; color: var(--text-primary); font-size: 1.1em;">
                                SibSp <span style="color: var(--text-muted); font-weight: 400;">↔</span> Fare
                            </div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-top: 4px;">
                                Weak positive relationship
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 800; font-size: 1.4em; color: #6b7280;">+0.43</div>
                            <div style="font-size: 0.75em; color: var(--text-muted);">correlation</div>
                        </div>
                    </div>

                    <!-- Dual View Tabs -->
                    <div style="border-top: 1px solid var(--border-subtle);">
                        <div class="dual-view-tabs" style="display: flex; border-bottom: 1px solid var(--border-subtle);">
                            <button class="tab-btn active" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='block'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='none'; this.classList.add('active'); this.nextElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-card); cursor: pointer; font-size: 0.85em; font-weight: 600; color: #818cf8; border-bottom: 2px solid #818cf8;">
                                📝 Plain English
                            </button>
                            <button class="tab-btn" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='none'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='block'; this.classList.add('active'); this.previousElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-primary); cursor: pointer; font-size: 0.85em; font-weight: 500; color: var(--text-secondary); border-bottom: 2px solid transparent;">
                                🔧 Technical Details
                            </button>
                        </div>
                        <div class="tab-content" style="padding: 16px 20px; background: var(--bg-card);">
                            <!-- Plain English View -->
                            <div class="plain-view">
                                <p style="margin: 0 0 10px 0; color: var(--text-primary); line-height: 1.6;">When <strong>SibSp</strong> increases, <strong>Fare</strong> also tends to increase.</p>
                                <div style="background: rgba(245, 158, 11, 0.15); padding: 12px; border-radius: 8px; border-left: 3px solid #f59e0b;">
                                    <div style="font-size: 0.8em; color: #fbbf24; font-weight: 600; margin-bottom: 4px;">💡 What This Means</div>
                                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary);">These columns move together - they may be derived from the same source, or one may influence the other.</p>
                                </div>
                            </div>
                            <!-- Technical View -->
                            <div class="tech-view" style="display: none;">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Coefficient</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">+0.4326</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">R² (Variance Explained)</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">18.7%</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Method</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">Spearman</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Strength</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: #6b7280;">Weak</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; padding: 10px 12px; background: var(--bg-primary); border-radius: 6px; border: 1px solid var(--border-subtle);">
                                    <code style="font-size: 0.8em; color: var(--text-secondary);">corr(SibSp, Fare) = +0.4326</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
                <div class="correlation-card" style="background: var(--bg-card); border-radius: 12px; border-left: 4px solid #6b7280; margin-bottom: 16px; overflow: hidden; position: relative; border: 1px solid var(--border-subtle);">
                    <!-- Rank Badge -->
                    <div style="position: absolute; top: 12px; right: 12px; background: #6b7280; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85em;">#3</div>
                    <!-- Header -->
                    <div style="padding: 16px 20px; display: flex; align-items: center; gap: 14px;">
                        <div style="font-size: 1.8em; color: #6b7280;">↑</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; color: var(--text-primary); font-size: 1.1em;">
                                SibSp <span style="color: var(--text-muted); font-weight: 400;">↔</span> Parch
                            </div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-top: 4px;">
                                Weak positive relationship
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 800; font-size: 1.4em; color: #6b7280;">+0.42</div>
                            <div style="font-size: 0.75em; color: var(--text-muted);">correlation</div>
                        </div>
                    </div>

                    <!-- Dual View Tabs -->
                    <div style="border-top: 1px solid var(--border-subtle);">
                        <div class="dual-view-tabs" style="display: flex; border-bottom: 1px solid var(--border-subtle);">
                            <button class="tab-btn active" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='block'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='none'; this.classList.add('active'); this.nextElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-card); cursor: pointer; font-size: 0.85em; font-weight: 600; color: #818cf8; border-bottom: 2px solid #818cf8;">
                                📝 Plain English
                            </button>
                            <button class="tab-btn" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='none'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='block'; this.classList.add('active'); this.previousElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-primary); cursor: pointer; font-size: 0.85em; font-weight: 500; color: var(--text-secondary); border-bottom: 2px solid transparent;">
                                🔧 Technical Details
                            </button>
                        </div>
                        <div class="tab-content" style="padding: 16px 20px; background: var(--bg-card);">
                            <!-- Plain English View -->
                            <div class="plain-view">
                                <p style="margin: 0 0 10px 0; color: var(--text-primary); line-height: 1.6;">When <strong>SibSp</strong> increases, <strong>Parch</strong> also tends to increase.</p>
                                <div style="background: rgba(245, 158, 11, 0.15); padding: 12px; border-radius: 8px; border-left: 3px solid #f59e0b;">
                                    <div style="font-size: 0.8em; color: #fbbf24; font-weight: 600; margin-bottom: 4px;">💡 What This Means</div>
                                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary);">These columns move together - they may be derived from the same source, or one may influence the other.</p>
                                </div>
                            </div>
                            <!-- Technical View -->
                            <div class="tech-view" style="display: none;">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Coefficient</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">+0.4246</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">R² (Variance Explained)</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">18.0%</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Method</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">Spearman</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Strength</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: #6b7280;">Weak</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; padding: 10px 12px; background: var(--bg-primary); border-radius: 6px; border: 1px solid var(--border-subtle);">
                                    <code style="font-size: 0.8em; color: var(--text-secondary);">corr(SibSp, Parch) = +0.4246</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
                <div class="correlation-card" style="background: var(--bg-card); border-radius: 12px; border-left: 4px solid #6b7280; margin-bottom: 16px; overflow: hidden; position: relative; border: 1px solid var(--border-subtle);">
                    <!-- Rank Badge -->
                    <div style="position: absolute; top: 12px; right: 12px; background: #6b7280; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85em;">#4</div>
                    <!-- Header -->
                    <div style="padding: 16px 20px; display: flex; align-items: center; gap: 14px;">
                        <div style="font-size: 1.8em; color: #6b7280;">↑</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; color: var(--text-primary); font-size: 1.1em;">
                                Parch <span style="color: var(--text-muted); font-weight: 400;">↔</span> Fare
                            </div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-top: 4px;">
                                Weak positive relationship
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 800; font-size: 1.4em; color: #6b7280;">+0.39</div>
                            <div style="font-size: 0.75em; color: var(--text-muted);">correlation</div>
                        </div>
                    </div>

                    <!-- Dual View Tabs -->
                    <div style="border-top: 1px solid var(--border-subtle);">
                        <div class="dual-view-tabs" style="display: flex; border-bottom: 1px solid var(--border-subtle);">
                            <button class="tab-btn active" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='block'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='none'; this.classList.add('active'); this.nextElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-card); cursor: pointer; font-size: 0.85em; font-weight: 600; color: #818cf8; border-bottom: 2px solid #818cf8;">
                                📝 Plain English
                            </button>
                            <button class="tab-btn" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='none'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='block'; this.classList.add('active'); this.previousElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-primary); cursor: pointer; font-size: 0.85em; font-weight: 500; color: var(--text-secondary); border-bottom: 2px solid transparent;">
                                🔧 Technical Details
                            </button>
                        </div>
                        <div class="tab-content" style="padding: 16px 20px; background: var(--bg-card);">
                            <!-- Plain English View -->
                            <div class="plain-view">
                                <p style="margin: 0 0 10px 0; color: var(--text-primary); line-height: 1.6;">When <strong>Parch</strong> increases, <strong>Fare</strong> also tends to increase.</p>
                                <div style="background: rgba(245, 158, 11, 0.15); padding: 12px; border-radius: 8px; border-left: 3px solid #f59e0b;">
                                    <div style="font-size: 0.8em; color: #fbbf24; font-weight: 600; margin-bottom: 4px;">💡 What This Means</div>
                                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary);">These columns move together - they may be derived from the same source, or one may influence the other.</p>
                                </div>
                            </div>
                            <!-- Technical View -->
                            <div class="tech-view" style="display: none;">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Coefficient</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">+0.3908</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">R² (Variance Explained)</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">15.3%</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Method</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">Spearman</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Strength</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: #6b7280;">Weak</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; padding: 10px 12px; background: var(--bg-primary); border-radius: 6px; border: 1px solid var(--border-subtle);">
                                    <code style="font-size: 0.8em; color: var(--text-secondary);">corr(Parch, Fare) = +0.3908</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
                <div class="correlation-card" style="background: var(--bg-card); border-radius: 12px; border-left: 4px solid #6b7280; margin-bottom: 16px; overflow: hidden; position: relative; border: 1px solid var(--border-subtle);">
                    <!-- Rank Badge -->
                    <div style="position: absolute; top: 12px; right: 12px; background: #6b7280; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85em;">#5</div>
                    <!-- Header -->
                    <div style="padding: 16px 20px; display: flex; align-items: center; gap: 14px;">
                        <div style="font-size: 1.8em; color: #6b7280;">↓</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; color: var(--text-primary); font-size: 1.1em;">
                                Survived <span style="color: var(--text-muted); font-weight: 400;">↔</span> Pclass
                            </div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-top: 4px;">
                                Weak None relationship
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 800; font-size: 1.4em; color: #6b7280;">-0.34</div>
                            <div style="font-size: 0.75em; color: var(--text-muted);">correlation</div>
                        </div>
                    </div>

                    <!-- Dual View Tabs -->
                    <div style="border-top: 1px solid var(--border-subtle);">
                        <div class="dual-view-tabs" style="display: flex; border-bottom: 1px solid var(--border-subtle);">
                            <button class="tab-btn active" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='block'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='none'; this.classList.add('active'); this.nextElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-card); cursor: pointer; font-size: 0.85em; font-weight: 600; color: #818cf8; border-bottom: 2px solid #818cf8;">
                                📝 Plain English
                            </button>
                            <button class="tab-btn" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='none'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='block'; this.classList.add('active'); this.previousElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-primary); cursor: pointer; font-size: 0.85em; font-weight: 500; color: var(--text-secondary); border-bottom: 2px solid transparent;">
                                🔧 Technical Details
                            </button>
                        </div>
                        <div class="tab-content" style="padding: 16px 20px; background: var(--bg-card);">
                            <!-- Plain English View -->
                            <div class="plain-view">
                                <p style="margin: 0 0 10px 0; color: var(--text-primary); line-height: 1.6;">When <strong>Survived</strong> increases, <strong>Pclass</strong> tends to decrease (and vice versa).</p>
                                <div style="background: rgba(245, 158, 11, 0.15); padding: 12px; border-radius: 8px; border-left: 3px solid #f59e0b;">
                                    <div style="font-size: 0.8em; color: #fbbf24; font-weight: 600; margin-bottom: 4px;">💡 What This Means</div>
                                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary);">These columns move in opposite directions - this inverse relationship may indicate a trade-off or constraint in your data.</p>
                                </div>
                            </div>
                            <!-- Technical View -->
                            <div class="tech-view" style="display: none;">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Coefficient</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">-0.3385</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">R² (Variance Explained)</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">11.5%</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Method</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">Pearson</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Strength</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: #6b7280;">Weak</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; padding: 10px 12px; background: var(--bg-primary); border-radius: 6px; border: 1px solid var(--border-subtle);">
                                    <code style="font-size: 0.8em; color: var(--text-secondary);">corr(Survived, Pclass) = -0.3385</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
                <div class="correlation-card" style="background: var(--bg-card); border-radius: 12px; border-left: 4px solid #6b7280; margin-bottom: 16px; overflow: hidden; position: relative; border: 1px solid var(--border-subtle);">
                    <!-- Rank Badge -->
                    <div style="position: absolute; top: 12px; right: 12px; background: #6b7280; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85em;">#6</div>
                    <!-- Header -->
                    <div style="padding: 16px 20px; display: flex; align-items: center; gap: 14px;">
                        <div style="font-size: 1.8em; color: #6b7280;">↑</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; color: var(--text-primary); font-size: 1.1em;">
                                Survived <span style="color: var(--text-muted); font-weight: 400;">↔</span> Fare
                            </div>
                            <div style="font-size: 0.85em; color: var(--text-secondary); margin-top: 4px;">
                                Weak positive relationship
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 800; font-size: 1.4em; color: #6b7280;">+0.31</div>
                            <div style="font-size: 0.75em; color: var(--text-muted);">correlation</div>
                        </div>
                    </div>

                    <!-- Dual View Tabs -->
                    <div style="border-top: 1px solid var(--border-subtle);">
                        <div class="dual-view-tabs" style="display: flex; border-bottom: 1px solid var(--border-subtle);">
                            <button class="tab-btn active" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='block'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='none'; this.classList.add('active'); this.nextElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-card); cursor: pointer; font-size: 0.85em; font-weight: 600; color: #818cf8; border-bottom: 2px solid #818cf8;">
                                📝 Plain English
                            </button>
                            <button class="tab-btn" onclick="this.parentElement.nextElementSibling.querySelector('.plain-view').style.display='none'; this.parentElement.nextElementSibling.querySelector('.tech-view').style.display='block'; this.classList.add('active'); this.previousElementSibling.classList.remove('active');"
                                style="flex: 1; padding: 10px; border: none; background: var(--bg-primary); cursor: pointer; font-size: 0.85em; font-weight: 500; color: var(--text-secondary); border-bottom: 2px solid transparent;">
                                🔧 Technical Details
                            </button>
                        </div>
                        <div class="tab-content" style="padding: 16px 20px; background: var(--bg-card);">
                            <!-- Plain English View -->
                            <div class="plain-view">
                                <p style="margin: 0 0 10px 0; color: var(--text-primary); line-height: 1.6;">When <strong>Survived</strong> increases, <strong>Fare</strong> also tends to increase.</p>
                                <div style="background: rgba(245, 158, 11, 0.15); padding: 12px; border-radius: 8px; border-left: 3px solid #f59e0b;">
                                    <div style="font-size: 0.8em; color: #fbbf24; font-weight: 600; margin-bottom: 4px;">💡 What This Means</div>
                                    <p style="margin: 0; font-size: 0.9em; color: var(--text-secondary);">These columns move together - they may be derived from the same source, or one may influence the other.</p>
                                </div>
                            </div>
                            <!-- Technical View -->
                            <div class="tech-view" style="display: none;">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Coefficient</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">+0.3056</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">R² (Variance Explained)</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">9.3%</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Method</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: var(--text-primary);">Spearman</div>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 12px; border-radius: 8px; border: 1px solid var(--border-subtle);">
                                        <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Strength</div>
                                        <div style="font-size: 1.2em; font-weight: 700; color: #6b7280;">Weak</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; padding: 10px 12px; background: var(--bg-primary); border-radius: 6px; border: 1px solid var(--border-subtle);">
                                    <code style="font-size: 0.8em; color: var(--text-secondary);">corr(Survived, Fare) = +0.3056</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
                </div>
            </div>
        </div>
        

        <!-- Correlation Visualizations (relocated from Advanced Visualizations) -->
        

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- 5. COLUMN-LEVEL QUALITY SUMMARY                                 -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section-divider" id="section-columns" style="margin: 24px 0 16px 0; padding: 12px 20px; background: linear-gradient(135deg, #374151 0%, #1f2937 100%); border-radius: 8px; border-left: 4px solid #6b7280;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="margin: 0; font-size: 1.1em; color: #f1f5f9; font-weight: 600;">Column-Level Analysis</h2>
                    <p style="margin: 4px 0 0 0; font-size: 0.85em; color: #9ca3af;">Detailed statistics, patterns, and quality metrics for each field</p>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 4px 12px; border-radius: 4px; font-size: 0.8em; font-weight: 600; color: white;">12 COLUMNS</div>
            </div>
        </div>

        <div class="layout-grid">
            <div class="main-column">
                <!-- Column Explorer -->
                
                <!-- Column Quality Heatmap -->
                
        <div class="column-heatmap">
            <div class="heatmap-header">
                <span class="heatmap-title">Column Quality Overview</span>
                <div class="heatmap-legend">
                    <span class="legend-item"><span class="legend-dot heatmap-good"></span>90+</span>
                    <span class="legend-item"><span class="legend-dot heatmap-ok"></span>70-89</span>
                    <span class="legend-item"><span class="legend-dot heatmap-warning"></span>50-69</span>
                    <span class="legend-item"><span class="legend-dot heatmap-critical"></span>&lt;50</span>
                </div>
            </div>
            <div class="heatmap-grid">
                
            <div class="heatmap-cell heatmap-good" title="PassengerId: 98%">
                <span class="heatmap-name">PassengerId</span>
                <span class="heatmap-score">98</span>
            </div>
            <div class="heatmap-cell heatmap-ok" title="Survived: 80%">
                <span class="heatmap-name">Survived</span>
                <span class="heatmap-score">80</span>
            </div>
            <div class="heatmap-cell heatmap-ok" title="Pclass: 80%">
                <span class="heatmap-name">Pclass</span>
                <span class="heatmap-score">80</span>
            </div>
            <div class="heatmap-cell heatmap-ok" title="Name: 80%">
                <span class="heatmap-name">Name</span>
                <span class="heatmap-score">80</span>
            </div>
            <div class="heatmap-cell heatmap-ok" title="Sex: 72%">
                <span class="heatmap-name">Sex</span>
                <span class="heatmap-score">72</span>
            </div>
            <div class="heatmap-cell heatmap-ok" title="Age: 73%">
                <span class="heatmap-name">Age</span>
                <span class="heatmap-score">73</span>
            </div>
            <div class="heatmap-cell heatmap-ok" title="SibSp: 80%">
                <span class="heatmap-name">SibSp</span>
                <span class="heatmap-score">80</span>
            </div>
            <div class="heatmap-cell heatmap-ok" title="Parch: 80%">
                <span class="heatmap-name">Parch</span>
                <span class="heatmap-score">80</span>
            </div>
            <div class="heatmap-cell heatmap-ok" title="Ticket: 85%">
                <span class="heatmap-name">Ticket</span>
                <span class="heatmap-score">85</span>
            </div>
            <div class="heatmap-cell heatmap-warning" title="Fare: 66%">
                <span class="heatmap-name">Fare</span>
                <span class="heatmap-score">66</span>
            </div>
            <div class="heatmap-cell heatmap-warning" title="Cabin: 62%">
                <span class="heatmap-name">Cabin</span>
                <span class="heatmap-score">62</span>
            </div>
            <div class="heatmap-cell heatmap-ok" title="Embarked: 80%">
                <span class="heatmap-name">Embarked</span>
                <span class="heatmap-score">80</span>
            </div>
            </div>
        </div>

                <div class="accordion column-explorer" data-accordion="columns" id="section-columns">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon columns">📋</div>
                            <div>
                                <div class="accordion-title">Column Explorer</div>
                                <div class="accordion-subtitle">12 columns with semantic analysis</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge info">12 tagged</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-body">
                        <div class="accordion-content">
                            <div class="dual-layer-explanation">
                                <div class="dual-layer-summary">
                                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                                    <div class="dual-layer-summary-text">Your dataset has 12 columns. 1 column(s) appear to contain sensitive personal information that may need protection. 2 column(s) have quality concerns (below 70% score) that may need attention. Click any column in the list below for detailed statistics and patterns.</div>
                                </div>
                                <details class="dual-layer-technical">
                                    <summary>🧠 Technical Details (click to expand)</summary>
                                    <div class="dual-layer-technical-content">
                                        <div class="dual-layer-technical-grid">
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Total Columns</span>
                                                <span class="dual-layer-technical-item-value">12</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Semantically Tagged</span>
                                                <span class="dual-layer-technical-item-value">12</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">PII Detected</span>
                                                <span class="dual-layer-technical-item-value">1</span>
                                            </div>
                                            <div class="dual-layer-technical-item">
                                                <span class="dual-layer-technical-item-label">Quality Concerns</span>
                                                <span class="dual-layer-technical-item-value">2</span>
                                            </div>
                                        </div>
                                        <div class="dual-layer-technical-context">
                                            <ul>
                                                <li><strong>Row Count, Null Count, Min/Max:</strong> Computed from ALL rows (exact values)</li>
                                                <li><strong>Mean, Std Dev, Median, ML Analysis:</strong> Computed from analysis sample</li>
                                                <li><strong>Top Values:</strong> Adaptively tracked per column (low cardinality: all values; high cardinality: capped)</li>
                                                <li><strong>Semantic tags:</strong> MONEY, TIMESTAMP, ACCOUNT_ID, etc. based on FIBO ontology</li>
                                            </ul>
                                        </div>
                                    </div>
                                </details>
                            </div>
                            
        <div class="column-controls">
            <div class="search-box">
                <input type="text" id="columnSearch" placeholder="Search columns..."
                       onkeyup="filterColumns()" class="search-input">
                <span class="search-icon">🔍</span>
            </div>
            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterByType('all')">All</button>
                <button class="filter-btn" onclick="filterByType('issues')">⚠️ With Issues</button>
                <button class="filter-btn" onclick="filterByType('numeric')">Numeric</button>
                <button class="filter-btn" onclick="filterByType('string')">String</button>
                <button class="filter-btn" onclick="filterByType('date')">Date</button>
            </div>
            <div class="sort-controls">
                <select id="columnSort" onchange="sortColumns()" class="sort-select">
                    <option value="name">Sort by Name</option>
                    <option value="quality">Sort by Quality</option>
                    <option value="completeness">Sort by Completeness</option>
                    <option value="issues">Sort by Issues</option>
                </select>
            </div>
        </div>
                            <div class="column-list" id="columnList">
                                
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="PassengerId" data-type="integer" data-quality="98.0" data-completeness="100.0" data-issues="false">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon number">🔑</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">PassengerId</span>
                                                <span class="fibo-badge-mobile" title="Identifier (schema:identifier)">🔑 Identifier (schema:identifier)</span>
                                            </div>
                                            <div class="column-type">integer (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>100% complete</span>
                                            <span>100.00% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Identifier (schema:identifier)</span>
                                        </div>
                                        <span class="column-quality-score good" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 98%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Identifier (schema:identifier)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field contains identifier-style codes that uniquely label records or entities.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">0</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">891*</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Mean</div>
                                                <div class="column-stat-value">446.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Median</div>
                                                <div class="column-stat-value">446.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Std Dev</div>
                                                <div class="column-stat-value">257.21</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Min</div>
                                                <div class="column-stat-value">1.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Max</div>
                                                <div class="column-stat-value">891.00</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Top Values</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">1</span>
                                                        <span class="top-value-count">1</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">2</span>
                                                        <span class="top-value-count">1</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">3</span>
                                                        <span class="top-value-count">1</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">4</span>
                                                        <span class="top-value-count">1</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">5</span>
                                                        <span class="top-value-count">1</span>
                                                    </div></div>
                                                <div class="sampled-note">Top 5 of 891 distinct values; full column scan used</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Survived" data-type="integer" data-quality="80.0" data-completeness="100.0" data-issues="true">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon number">✓</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Survived</span>
                                                <span class="fibo-badge-mobile" title="Boolean flag (schema:Boolean)">✓ Boolean flag (schema:Boolean)</span>
                                            </div>
                                            <div class="column-type">integer (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>100% complete</span>
                                            <span>0.22% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Boolean flag (schema:Boolean)</span>
                                        </div>
                                        <span class="column-quality-score good" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 80%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Boolean flag (schema:Boolean)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field contains boolean (yes/no, true/false) values.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">0</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">2</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Mean</div>
                                                <div class="column-stat-value">0.38</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Median</div>
                                                <div class="column-stat-value">0.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Std Dev</div>
                                                <div class="column-stat-value">0.49</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Min</div>
                                                <div class="column-stat-value">0.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Max</div>
                                                <div class="column-stat-value">1.00</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Value Distribution</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">0</span>
                                                        <span class="top-value-count">549</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">1</span>
                                                        <span class="top-value-count">342</span>
                                                    </div></div>
                                                <div class="sampled-note">Values tracked: 2 distinct categories</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Pclass" data-type="integer" data-quality="80.1" data-completeness="100.0" data-issues="true">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon number">🏷️</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Pclass</span>
                                                <span class="fibo-badge-mobile" title="Category (schema:CategoryCode)">🏷️ Category (schema:CategoryCode)</span>
                                            </div>
                                            <div class="column-type">integer (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>100% complete</span>
                                            <span>0.34% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Category (schema:CategoryCode)</span>
                                        </div>
                                        <span class="column-quality-score good" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 80%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Category (schema:CategoryCode)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field uses a small set of short codes to represent categories, locations, or statuses.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">0</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">3</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Mean</div>
                                                <div class="column-stat-value">2.31</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Median</div>
                                                <div class="column-stat-value">3.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Std Dev</div>
                                                <div class="column-stat-value">0.84</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Min</div>
                                                <div class="column-stat-value">1.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Max</div>
                                                <div class="column-stat-value">3.00</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Value Distribution</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">3</span>
                                                        <span class="top-value-count">491</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">1</span>
                                                        <span class="top-value-count">216</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">2</span>
                                                        <span class="top-value-count">184</span>
                                                    </div></div>
                                                <div class="sampled-note">Values tracked: 3 distinct categories</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Name" data-type="string" data-quality="80.4" data-completeness="100.0" data-issues="false">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon string">📛</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Name</span>
                                                <span class="fibo-badge-mobile" title="Name (schema:name)">📛 Name (schema:name)</span>
                                            </div>
                                            <div class="column-type">string (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>100% complete</span>
                                            <span>100.00% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag pii">PII</span><span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Name (schema:name)</span>
                                        </div>
                                        <span class="column-quality-score good" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 80%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Name (schema:name)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field contains names, likely referring to people, places, or entities.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">0</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">891*</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Length</div>
                                                <div class="column-stat-value">12-82 chars</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Pattern</div>
                                                <div class="column-stat-value">AAAAA, AA. AAAA</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Top Values</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">Braund, Mr. Owen Har</span>
                                                        <span class="top-value-count">1</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">Cumings, Mrs. John B</span>
                                                        <span class="top-value-count">1</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">Heikkinen, Miss. Lai</span>
                                                        <span class="top-value-count">1</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">Futrelle, Mrs. Jacqu</span>
                                                        <span class="top-value-count">1</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">Allen, Mr. William H</span>
                                                        <span class="top-value-count">1</span>
                                                    </div></div>
                                                <div class="sampled-note">Top 5 of 891 distinct values; full column scan used</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Sex" data-type="string" data-quality="72.2" data-completeness="100.0" data-issues="true">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon string">⚧</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Sex</span>
                                                <span class="fibo-badge-mobile" title="Gender (schema:GenderType)">⚧ Gender (schema:GenderType)</span>
                                            </div>
                                            <div class="column-type">string (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>100% complete</span>
                                            <span>0.22% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Gender (schema:GenderType)</span>
                                        </div>
                                        <span class="column-quality-score warning" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 72%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Gender (schema:GenderType)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field indicates gender classification.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">0</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">2*</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Length</div>
                                                <div class="column-stat-value">4-6 chars</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Pattern</div>
                                                <div class="column-stat-value">AAAA</div>
                                            </div>
                                            <div class="column-stat" style="background: rgba(var(--info-color-rgb), 0.1); border: 1px dashed var(--info-color);" title="Unique values tracked for Top Values (memory optimization for high-cardinality columns)">
                                                <div class="column-stat-label" style="color: var(--info-color);">📊 Values Tracked</div>
                                                <div class="column-stat-value" style="font-size: 0.75em;">2</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Value Distribution</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">male</span>
                                                        <span class="top-value-count">577</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">female</span>
                                                        <span class="top-value-count">314</span>
                                                    </div></div>
                                                <div class="sampled-note">Values tracked: 2 distinct categories</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Age" data-type="integer" data-quality="73.5" data-completeness="80.1" data-issues="true">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon number">🔢</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Age</span>
                                                <span class="fibo-badge-mobile" title="Quantity (schema:QuantitativeValue)">🔢 Quantity (schema:QuantitativeValue)</span>
                                            </div>
                                            <div class="column-type">integer (96% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>80.1% complete</span>
                                            <span>12.32% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Quantity (schema:QuantitativeValue)</span>
                                        </div>
                                        <span class="column-quality-score warning" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 73%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Quantity (schema:QuantitativeValue)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field contains a quantity or measurement.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">177</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">88</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Mean</div>
                                                <div class="column-stat-value">29.70</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Median</div>
                                                <div class="column-stat-value">28.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Std Dev</div>
                                                <div class="column-stat-value">14.52</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Min</div>
                                                <div class="column-stat-value">0.42</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Max</div>
                                                <div class="column-stat-value">80.00</div>
                                            </div>
                                            <div class="column-stat" style="background: rgba(var(--info-color-rgb), 0.1); border: 1px dashed var(--info-color);" title="Unique values tracked for Top Values (memory optimization for high-cardinality columns)">
                                                <div class="column-stat-label" style="color: var(--info-color);">📊 Values Tracked</div>
                                                <div class="column-stat-value" style="font-size: 0.75em;">714</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Top Values (sampled)</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">24.0</span>
                                                        <span class="top-value-count">30</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">22.0</span>
                                                        <span class="top-value-count">27</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">18.0</span>
                                                        <span class="top-value-count">26</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">28.0</span>
                                                        <span class="top-value-count">25</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">30.0</span>
                                                        <span class="top-value-count">25</span>
                                                    </div></div>
                                                <div class="sampled-note">Based on 714 row sample of 891 total rows</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="SibSp" data-type="integer" data-quality="80.2" data-completeness="100.0" data-issues="true">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon number">🔢</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">SibSp</span>
                                                <span class="fibo-badge-mobile" title="Quantity (schema:QuantitativeValue)">🔢 Quantity (schema:QuantitativeValue)</span>
                                            </div>
                                            <div class="column-type">integer (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>100% complete</span>
                                            <span>0.79% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Quantity (schema:QuantitativeValue)</span>
                                        </div>
                                        <span class="column-quality-score good" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 80%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Quantity (schema:QuantitativeValue)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field contains a quantity or measurement.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">0</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">7</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Mean</div>
                                                <div class="column-stat-value">0.52</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Median</div>
                                                <div class="column-stat-value">0.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Std Dev</div>
                                                <div class="column-stat-value">1.10</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Min</div>
                                                <div class="column-stat-value">0.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Max</div>
                                                <div class="column-stat-value">8.00</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Value Distribution</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">0</span>
                                                        <span class="top-value-count">608</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">1</span>
                                                        <span class="top-value-count">209</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">2</span>
                                                        <span class="top-value-count">28</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">4</span>
                                                        <span class="top-value-count">18</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">3</span>
                                                        <span class="top-value-count">16</span>
                                                    </div></div>
                                                <div class="sampled-note">Values tracked: 7 distinct categories</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Parch" data-type="integer" data-quality="80.2" data-completeness="100.0" data-issues="true">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon number">🔢</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Parch</span>
                                                <span class="fibo-badge-mobile" title="Quantity (schema:QuantitativeValue)">🔢 Quantity (schema:QuantitativeValue)</span>
                                            </div>
                                            <div class="column-type">integer (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>100% complete</span>
                                            <span>0.79% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Quantity (schema:QuantitativeValue)</span>
                                        </div>
                                        <span class="column-quality-score good" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 80%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Quantity (schema:QuantitativeValue)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field contains a quantity or measurement.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">0</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">7</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Mean</div>
                                                <div class="column-stat-value">0.38</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Median</div>
                                                <div class="column-stat-value">0.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Std Dev</div>
                                                <div class="column-stat-value">0.81</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Min</div>
                                                <div class="column-stat-value">0.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Max</div>
                                                <div class="column-stat-value">6.00</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Value Distribution</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">0</span>
                                                        <span class="top-value-count">678</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">1</span>
                                                        <span class="top-value-count">118</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">2</span>
                                                        <span class="top-value-count">80</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">5</span>
                                                        <span class="top-value-count">5</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">3</span>
                                                        <span class="top-value-count">5</span>
                                                    </div></div>
                                                <div class="sampled-note">Values tracked: 7 distinct categories</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Ticket" data-type="string" data-quality="84.9" data-completeness="100.0" data-issues="false">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon string">🔑</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Ticket</span>
                                                <span class="fibo-badge-mobile" title="Identifier (schema:identifier)">🔑 Identifier (schema:identifier)</span>
                                            </div>
                                            <div class="column-type">string (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>100% complete</span>
                                            <span>76.43% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Identifier (schema:identifier)</span>
                                        </div>
                                        <span class="column-quality-score good" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 85%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Identifier (schema:identifier)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field contains identifier-style codes that uniquely label records or entities.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">0</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">681*</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Length</div>
                                                <div class="column-stat-value">3-18 chars</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Pattern</div>
                                                <div class="column-stat-value">999999</div>
                                            </div>
                                            <div class="column-stat" style="background: rgba(var(--info-color-rgb), 0.1); border: 1px dashed var(--info-color);" title="Unique values tracked for Top Values (memory optimization for high-cardinality columns)">
                                                <div class="column-stat-label" style="color: var(--info-color);">📊 Values Tracked</div>
                                                <div class="column-stat-value" style="font-size: 0.75em;">661</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Top Values (sampled)</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">347082</span>
                                                        <span class="top-value-count">7</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">1601</span>
                                                        <span class="top-value-count">7</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">CA. 2343</span>
                                                        <span class="top-value-count">7</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">3101295</span>
                                                        <span class="top-value-count">6</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">CA 2144</span>
                                                        <span class="top-value-count">6</span>
                                                    </div></div>
                                                <div class="sampled-note">Based on 661 row sample of 891 total rows</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Fare" data-type="float" data-quality="65.9" data-completeness="100.0" data-issues="true">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon number">💰</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Fare</span>
                                                <span class="fibo-badge-mobile" title="Monetary amount (schema:MonetaryAmount)">💰 Monetary amount (schema:MonetaryAmount)</span>
                                            </div>
                                            <div class="column-type">float (82% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>100% complete</span>
                                            <span>27.83% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Monetary amount (schema:MonetaryAmount)</span>
                                        </div>
                                        <span class="column-quality-score warning" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 66%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Monetary amount (schema:MonetaryAmount)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field represents a monetary value such as price, amount, or currency.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">0</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">248</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Mean</div>
                                                <div class="column-stat-value">32.20</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Median</div>
                                                <div class="column-stat-value">14.45</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Std Dev</div>
                                                <div class="column-stat-value">49.67</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Min</div>
                                                <div class="column-stat-value">0.00</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Max</div>
                                                <div class="column-stat-value">512.33</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Top Values</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">8.05</span>
                                                        <span class="top-value-count">43</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">13.0</span>
                                                        <span class="top-value-count">42</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">7.8958</span>
                                                        <span class="top-value-count">38</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">7.75</span>
                                                        <span class="top-value-count">34</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">26.0</span>
                                                        <span class="top-value-count">31</span>
                                                    </div></div>
                                                <div class="sampled-note">Top 5 of 248 distinct values; full column scan used</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Cabin" data-type="string" data-quality="62.1" data-completeness="22.9" data-issues="true">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon string">🏷️</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Cabin</span>
                                                <span class="fibo-badge-mobile" title="Property code (schema:PropertyValue)">🏷️ Property code (schema:PropertyValue)</span>
                                            </div>
                                            <div class="column-type">string (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>22.9% complete</span>
                                            <span>72.06% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag sparse">SPARSE</span><span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Property code (schema:PropertyValue)</span>
                                        </div>
                                        <span class="column-quality-score warning" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 62%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Property code (schema:PropertyValue)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field contains structured property codes such as seat, cabin, room, or other location-like identifiers.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">687</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">147*</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Length</div>
                                                <div class="column-stat-value">1-15 chars</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Pattern</div>
                                                <div class="column-stat-value">A99</div>
                                            </div>
                                            <div class="column-stat" style="background: rgba(var(--info-color-rgb), 0.1); border: 1px dashed var(--info-color);" title="Unique values tracked for Top Values (memory optimization for high-cardinality columns)">
                                                <div class="column-stat-label" style="color: var(--info-color);">📊 Values Tracked</div>
                                                <div class="column-stat-value" style="font-size: 0.75em;">147</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Top Values (sampled)</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">G6</span>
                                                        <span class="top-value-count">4</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">C23 C25 C27</span>
                                                        <span class="top-value-count">4</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">B96 B98</span>
                                                        <span class="top-value-count">4</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">F2</span>
                                                        <span class="top-value-count">3</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">D</span>
                                                        <span class="top-value-count">3</span>
                                                    </div></div>
                                                <div class="sampled-note">Based on 147 row sample of 891 total rows</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column-row" onclick="toggleColumnRow(this)" data-name="Embarked" data-type="string" data-quality="80.0" data-completeness="99.8" data-issues="true">
                                    <div class="column-row-header">
                                        <span class="column-expand-icon">▶</span>
                                        <div class="column-type-icon string">🏷️</div>
                                        <div class="column-info">
                                            <div class="column-name-row">
                                                <span class="column-name">Embarked</span>
                                                <span class="fibo-badge-mobile" title="Category code (schema:CategoryCode)">🏷️ Category code (schema:CategoryCode)</span>
                                            </div>
                                            <div class="column-type">string (100% confidence)</div>
                                        </div>
                                        <div class="column-quick-stats">
                                            <span>99.78% complete</span>
                                            <span>0.34% unique</span>
                                        </div>
                                        <div class="column-tags">
                                            <span class="column-tag semantic" title="🌐 Semantic type from Schema.org">Category code (schema:CategoryCode)</span>
                                        </div>
                                        <span class="column-quality-score good" title="Overall Quality Score: Combines completeness, validity, consistency, and uniqueness metrics">Quality 80%</span>
                                    </div>
                                    <div class="column-details">
                                        <div class="column-details-content">
                                            
            <div class="semantic-summary" style="padding: 10px 12px; background: var(--card-darker); border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--primary);">
                <div style="font-size: 0.75em; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">
                    Field Meaning (Schema.org)
                </div>
                
            <span style="display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px; font-size: 0.85em; background: rgba(59, 130, 246, 0.15); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3);">
                🏷️ Category code (schema:CategoryCode)
            </span>
        
                
            <div style="color: var(--text-secondary); font-size: 0.85em; margin-top: 6px; line-height: 1.4;">
                This field uses a small set of short codes to represent categories, locations, or statuses.
            </div>
        
            </div>
        
                                            <div class="column-stats-grid">
                                            <div class="column-stat">
                                                <div class="column-stat-label">Row Count</div>
                                                <div class="column-stat-value">891</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Null Count</div>
                                                <div class="column-stat-value">2</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Unique Values</div>
                                                <div class="column-stat-value">3*</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Length</div>
                                                <div class="column-stat-value">1-1 chars</div>
                                            </div>
                                            <div class="column-stat">
                                                <div class="column-stat-label">Pattern</div>
                                                <div class="column-stat-value">A</div>
                                            </div>
                                            <div class="column-stat" style="background: rgba(var(--info-color-rgb), 0.1); border: 1px dashed var(--info-color);" title="Unique values tracked for Top Values (memory optimization for high-cardinality columns)">
                                                <div class="column-stat-label" style="color: var(--info-color);">📊 Values Tracked</div>
                                                <div class="column-stat-value" style="font-size: 0.75em;">3</div>
                                            </div></div>
                                            
                                            <div class="top-values-section">
                                                <div class="top-values-title">Value Distribution</div>
                                                <div class="top-values-grid">
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">S</span>
                                                        <span class="top-value-count">644</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">C</span>
                                                        <span class="top-value-count">168</span>
                                                    </div>
                                                    <div class="top-value-item">
                                                        <span class="top-value-name">Q</span>
                                                        <span class="top-value-count">77</span>
                                                    </div></div>
                                                <div class="sampled-note">Values tracked: 3 distinct categories</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- 6. RECOMMENDED VALIDATIONS                                      -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section-divider" id="section-validations" style="margin: 24px 0 16px 0; padding: 12px 20px; background: linear-gradient(135deg, #065f46 0%, #022c22 100%); border-radius: 8px; border-left: 4px solid #10b981;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="margin: 0; font-size: 1.1em; color: #f1f5f9; font-weight: 600;">Recommended Validations</h2>
                    <p style="margin: 4px 0 0 0; font-size: 0.85em; color: #6ee7b7;">Based on our analysis, implement these rules to protect data quality</p>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 4px 12px; border-radius: 4px; font-size: 0.8em; font-weight: 600; color: white;">ACTION</div>
            </div>
        </div>

        <div class="layout-grid">
            <div class="main-column">
                <!-- Validation Suggestions -->
                
                <div class="accordion" data-accordion="suggestions">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon quality">💡</div>
                            <div>
                                <div class="accordion-title">Validation Suggestions</div>
                                <div class="accordion-subtitle">16 suggested checks</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge info">16 suggestions</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-body">
                        <div class="accordion-content">
                            <div class="dual-layer-explanation">
                                <div class="dual-layer-summary">
                                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                                    <div class="dual-layer-summary-text">
                                        Based on what we learned about your data, here are recommended validations to help catch issues early. Each suggestion includes copy-ready configuration you can add to your validation file.
                                    </div>
                                </div>
                                <details class="dual-layer-technical">
                                    <summary>🧠 Technical Details (click to expand)</summary>
                                    <div class="dual-layer-technical-content" style="padding: 12px;">
                                        <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 0.85em;">
                                            <li>Suggestions are derived from column statistics, patterns, and anomalies</li>
                                            <li>Higher confidence scores indicate stronger signals from the data</li>
                                            <li>Each YAML snippet can be copied directly into your validation config</li>
                                        </ul>
                                    </div>
                                </details>
                            </div>
                            
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">EmptyFileCheck</div>
                                    <div class="suggestion-confidence">100% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Prevent empty file loads</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "EmptyFileCheck"
        severity: "ERROR"</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "EmptyFileCheck"
        severity: "ERROR"`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">MandatoryFieldCheck</div>
                                    <div class="suggestion-confidence">95% confidence</div>
                                </div>
                                <div class="suggestion-field">Field: <strong>Embarked</strong></div>
                                <div class="suggestion-reason">10 fields have >95% completeness</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "MandatoryFieldCheck"
        severity: "WARNING"
          fields:
            - "Embarked"
            - "Fare"
            - "Name"
            - "Parch"
            - "PassengerId"
            - "Pclass"
            - "Sex"
            - "SibSp"
            - "Survived"
            - "Ticket"</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "MandatoryFieldCheck"
        severity: "WARNING"\n          fields:\n            - "Embarked"\n            - "Fare"\n            - "Name"\n            - "Parch"\n            - "PassengerId"\n            - "Pclass"\n            - "Sex"\n            - "SibSp"\n            - "Survived"\n            - "Ticket"`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">UniqueKeyCheck</div>
                                    <div class="suggestion-confidence">95% confidence</div>
                                </div>
                                <div class="suggestion-field">Field: <strong>PassengerId</strong></div>
                                <div class="suggestion-reason">Field classified as identifier type</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "UniqueKeyCheck"
        severity: "WARNING"
          fields:
            - "PassengerId"</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "UniqueKeyCheck"
        severity: "WARNING"\n          fields:\n            - "PassengerId"`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">StringLengthCheck</div>
                                    <div class="suggestion-confidence">95% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">All values have consistent length (1 characters)</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "StringLengthCheck"
        severity: "WARNING"
          field: "Embarked"
          min_length: 1
          max_length: 1</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "StringLengthCheck"
        severity: "WARNING"\n          field: "Embarked"\n          min_length: 1\n          max_length: 1`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">BooleanCheck</div>
                                    <div class="suggestion-confidence">90% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Binary flag field (boolean values)</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "BooleanCheck"
        severity: "WARNING"
          field: "Survived"
          true_values:
            - "1"
            - "1"
            - "true"
            - "yes"
            - "y"
            - "True"
            - "Yes"
            - "Y"
          false_values:
            - "0"
            - "0"
            - "false"
            - "no"
            - "n"
            - "False"
            - "No"
            - "N"</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "BooleanCheck"
        severity: "WARNING"\n          field: "Survived"\n          true_values:\n            - "1"\n            - "1"\n            - "true"\n            - "yes"\n            - "y"\n            - "True"\n            - "Yes"\n            - "Y"\n          false_values:\n            - "0"\n            - "0"\n            - "false"\n            - "no"\n            - "n"\n            - "False"\n            - "No"\n            - "N"`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">RangeCheck</div>
                                    <div class="suggestion-confidence">90% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Age field with human-sensible bounds (0-120 years)</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "RangeCheck"
        severity: "WARNING"
          field: "Age"
          min_value: 0
          max_value: 120</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "RangeCheck"
        severity: "WARNING"\n          field: "Age"\n          min_value: 0\n          max_value: 120`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">RangeCheck</div>
                                    <div class="suggestion-confidence">90% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Monetary field (must be non-negative)</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "RangeCheck"
        severity: "WARNING"
          field: "Fare"
          min_value: 0
          max_value: null</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "RangeCheck"
        severity: "WARNING"\n          field: "Fare"\n          min_value: 0\n          max_value: null`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">ValidValuesCheck</div>
                                    <div class="suggestion-confidence">85% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Low cardinality field with 3 unique values</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "ValidValuesCheck"
        severity: "WARNING"
          field: "Pclass"
          valid_values:
            - "3"
            - "1"
            - "2"</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "ValidValuesCheck"
        severity: "WARNING"\n          field: "Pclass"\n          valid_values:\n            - "3"\n            - "1"\n            - "2"`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">ValidValuesCheck</div>
                                    <div class="suggestion-confidence">85% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Low cardinality field with 2 unique values</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "ValidValuesCheck"
        severity: "WARNING"
          field: "Sex"
          valid_values:
            - "male"
            - "female"</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "ValidValuesCheck"
        severity: "WARNING"\n          field: "Sex"\n          valid_values:\n            - "male"\n            - "female"`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">ValidValuesCheck</div>
                                    <div class="suggestion-confidence">85% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Low cardinality field with 7 unique values</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "ValidValuesCheck"
        severity: "WARNING"
          field: "SibSp"
          valid_values:
            - "0"
            - "1"
            - "2"
            - "4"
            - "3"
            - "8"
            - "5"</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "ValidValuesCheck"
        severity: "WARNING"\n          field: "SibSp"\n          valid_values:\n            - "0"\n            - "1"\n            - "2"\n            - "4"\n            - "3"\n            - "8"\n            - "5"`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">ValidValuesCheck</div>
                                    <div class="suggestion-confidence">85% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Low cardinality field with 7 unique values</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "ValidValuesCheck"
        severity: "WARNING"
          field: "Parch"
          valid_values:
            - "0"
            - "1"
            - "2"
            - "5"
            - "3"
            - "4"
            - "6"</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "ValidValuesCheck"
        severity: "WARNING"\n          field: "Parch"\n          valid_values:\n            - "0"\n            - "1"\n            - "2"\n            - "5"\n            - "3"\n            - "4"\n            - "6"`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card high-priority">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">ValidValuesCheck</div>
                                    <div class="suggestion-confidence">85% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Low cardinality field with 3 unique values</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "ValidValuesCheck"
        severity: "WARNING"
          field: "Embarked"
          valid_values:
            - "S"
            - "C"
            - "Q"</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "ValidValuesCheck"
        severity: "WARNING"\n          field: "Embarked"\n          valid_values:\n            - "S"\n            - "C"\n            - "Q"`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card ">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">RowCountRangeCheck</div>
                                    <div class="suggestion-confidence">80% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Expect approximately 891 rows based on profile</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "RowCountRangeCheck"
        severity: "ERROR"
          min_rows: 445
          max_rows: 1782</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "RowCountRangeCheck"
        severity: "ERROR"\n          min_rows: 445\n          max_rows: 1782`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card ">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">StringLengthCheck</div>
                                    <div class="suggestion-confidence">80% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">Length varies within small range (4-6 characters)</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "StringLengthCheck"
        severity: "WARNING"
          field: "Sex"
          min_length: 4
          max_length: 6</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "StringLengthCheck"
        severity: "WARNING"\n          field: "Sex"\n          min_length: 4\n          max_length: 6`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card ">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">StatisticalOutlierCheck</div>
                                    <div class="suggestion-confidence">75% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">High variability detected (CV=154.2%)</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "StatisticalOutlierCheck"
        severity: "WARNING"
          field: "Fare"
          method: "zscore"
          threshold: 3.0</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "StatisticalOutlierCheck"
        severity: "WARNING"\n          field: "Fare"\n          method: "zscore"\n          threshold: 3.0`)">📋 Copy</button>
                                </div>
                            </div>
                            <div class="suggestion-card ">
                                <div class="suggestion-header">
                                    <div class="suggestion-type">BenfordLawCheck</div>
                                    <div class="suggestion-confidence">75% confidence</div>
                                </div>
                                
                                <div class="suggestion-reason">First-digit frequencies deviate from Benford's Law (χ²=868.18, p=0.0000). For naturally occurring transactional datasets this can indicate anomalies, but for structured pricing or tariff-like fields it may simply reflect business rules. Treat this as a weak signal and confirm with domain experts.</div>
                                <div class="suggestion-yaml-container">
                                    <pre class="suggestion-yaml">      - type: "BenfordLawCheck"
        severity: "WARNING"
          field: "Fare"
          significance_level: 0.05</pre>
                                    <button class="copy-yaml-btn" onclick="copyYaml(`      - type: "BenfordLawCheck"
        severity: "WARNING"\n          field: "Fare"\n          significance_level: 0.05`)">📋 Copy</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Full Validation Config -->
                
                <div class="accordion" data-accordion="config" id="section-yaml">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon quality">⚙️</div>
                            <div>
                                <div class="accordion-title">YAML / Export</div>
                                <div class="accordion-subtitle">Ready-to-use validation configuration</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge good">Ready</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-body">
                        <div class="accordion-content">
                            <div class="dual-layer-explanation">
                                <div class="dual-layer-summary">
                                    <div class="dual-layer-summary-label">📘 Plain-English Summary</div>
                                    <div class="dual-layer-summary-text">
                                        This is your complete validation configuration file, ready to use. Copy it, save as a .yaml file, and run validations with the DataK9 CLI command shown below.
                                    </div>
                                </div>
                                <details class="dual-layer-technical">
                                    <summary>🧠 Technical Details (click to expand)</summary>
                                    <div class="dual-layer-technical-content" style="padding: 12px;">
                                        <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 0.85em;">
                                            <li>Run command: <code>python3 -m validation_framework.cli validate config.yaml</code></li>
                                            <li>Configuration includes all suggested validations from the profile</li>
                                            <li>Adjust thresholds and parameters based on your specific requirements</li>
                                        </ul>
                                    </div>
                                </details>
                            </div>
                            <div class="full-config-container">
                                <div class="config-actions">
                                    <button class="copy-config-btn" onclick="copyFullConfig()">📋 Copy Full Config</button>
                                </div>
                                <pre class="full-config-yaml" id="fullConfigYaml"># Auto-generated validation configuration
# Generated from profile of: titanic.csv
# Generated at: 2025-11-30 11:49:40
# File size: 0.1 MB, Rows: 891
# Recommended chunk size: 2,000,000 rows (Using maximum chunk size (2,000,000). Sufficient memory available.)

validation_job:
  name: "Validation for titanic.csv"
  description: "Auto-generated from data profile"

settings:
  chunk_size: 2000000  # Optimized for csv format, 15 validations (complex complexity)
  max_sample_failures: 100

files:
  - name: "titanic"
    path: "/home/daniel/www/test-data/titanic.csv"
    format: "csv"

    validations:
      - type: "EmptyFileCheck"
        severity: "ERROR"
        # Prevent empty file loads

      - type: "MandatoryFieldCheck"
        severity: "WARNING"
        params:
          fields:
            - "Embarked"
            - "Fare"
            - "Name"
            - "Parch"
            - "PassengerId"
            - "Pclass"
            - "Sex"
            - "SibSp"
            - "Survived"
            - "Ticket"
        # 10 fields have &gt;95% completeness

      - type: "UniqueKeyCheck"
        severity: "WARNING"
        params:
          fields:
            - "PassengerId"
        # Field classified as identifier type

      - type: "StringLengthCheck"
        severity: "WARNING"
        params:
          field: "Embarked"
          min_length: 1
          max_length: 1
        # All values have consistent length (1 characters)

      - type: "BooleanCheck"
        severity: "WARNING"
        params:
          field: "Survived"
          true_values:
            - 1
            - "1"
            - "true"
            - "yes"
            - "y"
            - "True"
            - "Yes"
            - "Y"
          false_values:
            - 0
            - "0"
            - "false"
            - "no"
            - "n"
            - "False"
            - "No"
            - "N"
        # Binary flag field (boolean values)

      - type: "RangeCheck"
        severity: "WARNING"
        params:
          field: "Age"
          min_value: 0
          max_value: 120
        # Age field with human-sensible bounds (0-120 years)

      - type: "RangeCheck"
        severity: "WARNING"
        params:
          field: "Fare"
          min_value: 0
          max_value: None
        # Monetary field (must be non-negative)

      - type: "ValidValuesCheck"
        severity: "WARNING"
        params:
          field: "Pclass"
          valid_values:
            - "3"
            - "1"
            - "2"
        # Low cardinality field with 3 unique values

      - type: "ValidValuesCheck"
        severity: "WARNING"
        params:
          field: "Sex"
          valid_values:
            - "male"
            - "female"
        # Low cardinality field with 2 unique values

      - type: "ValidValuesCheck"
        severity: "WARNING"
        params:
          field: "SibSp"
          valid_values:
            - "0"
            - "1"
            - "2"
            - "4"
            - "3"
            - "8"
            - "5"
        # Low cardinality field with 7 unique values

      - type: "ValidValuesCheck"
        severity: "WARNING"
        params:
          field: "Parch"
          valid_values:
            - "0"
            - "1"
            - "2"
            - "5"
            - "3"
            - "4"
            - "6"
        # Low cardinality field with 7 unique values

      - type: "ValidValuesCheck"
        severity: "WARNING"
        params:
          field: "Embarked"
          valid_values:
            - "S"
            - "C"
            - "Q"
        # Low cardinality field with 3 unique values

      - type: "RowCountRangeCheck"
        severity: "ERROR"
        params:
          min_rows: 445
          max_rows: 1782
        # Expect approximately 891 rows based on profile

      - type: "StringLengthCheck"
        severity: "WARNING"
        params:
          field: "Sex"
          min_length: 4
          max_length: 6
        # Length varies within small range (4-6 characters)

      - type: "StatisticalOutlierCheck"
        severity: "WARNING"
        params:
          field: "Fare"
          method: "zscore"
          threshold: 3.0
        # High variability detected (CV=154.2%)
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- 13. GLOSSARY SECTION                                            -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section-divider" id="section-glossary" style="margin: 24px 0 16px 0; padding: 12px 20px; background: linear-gradient(135deg, #374151 0%, #1f2937 100%); border-radius: 8px; border-left: 4px solid #9ca3af;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="margin: 0; font-size: 1.1em; color: #f1f5f9; font-weight: 600;">📖 Glossary</h2>
                    <p style="margin: 4px 0 0 0; font-size: 0.85em; color: #94a3b8;">Key terms and concepts used in this report</p>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 4px 12px; border-radius: 4px; font-size: 0.8em; font-weight: 600; color: #94a3b8;">REFERENCE</div>
            </div>
        </div>

        <div class="layout-grid">
            <div class="main-column">
                <div class="accordion" data-accordion="glossary-terms">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="accordion-title-group">
                            <div class="accordion-icon" style="background: linear-gradient(135deg, #6b7280, #4b5563);">📚</div>
                            <div>
                                <div class="accordion-title">Data Quality & Analysis Terms</div>
                                <div class="accordion-subtitle">Understanding the metrics and methods in this report</div>
                            </div>
                        </div>
                        <div class="accordion-meta">
                            <span class="accordion-badge info">Reference</span>
                            <span class="accordion-chevron">▼</span>
                        </div>
                    </div>
                    <div class="accordion-content">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px;">
                            <!-- Data Quality Metrics -->
                            <div style="background: var(--bg-card); border-radius: 8px; padding: 16px; border-left: 3px solid #3b82f6;">
                                <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: #3b82f6; text-transform: uppercase; letter-spacing: 0.5px;">Quality Metrics</h4>
                                <dl style="margin: 0; font-size: 0.85em;">
                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 8px;">Completeness</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Percentage of non-null values in a field. Higher is better for required fields.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">Validity</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Percentage of values that match expected format/type. Based on pattern consistency.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">Uniqueness</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Ratio of distinct values to total values. Important for ID fields (should be 100%).</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">Consistency</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">How well values follow a single pattern/format. Measures data standardization.</dd>
                                </dl>
                            </div>

                            <!-- Statistical Terms -->
                            <div style="background: var(--bg-card); border-radius: 8px; padding: 16px; border-left: 3px solid #8b5cf6;">
                                <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: #8b5cf6; text-transform: uppercase; letter-spacing: 0.5px;">Statistical Terms</h4>
                                <dl style="margin: 0; font-size: 0.85em;">
                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 8px;">IQR (Interquartile Range)</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Range between 25th and 75th percentiles. Values beyond 1.5×IQR are outliers.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">Cardinality</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Number of unique values. Low cardinality (≤10) suggests categorical data.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">Skewness</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Measure of distribution asymmetry. Positive = right tail, negative = left tail.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">Kurtosis</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Measure of distribution "tailedness". High = more outliers than normal distribution.</dd>
                                </dl>
                            </div>

                            <!-- ML/Anomaly Terms -->
                            <div style="background: var(--bg-card); border-radius: 8px; padding: 16px; border-left: 3px solid #ef4444;">
                                <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: #ef4444; text-transform: uppercase; letter-spacing: 0.5px;">Anomaly Detection</h4>
                                <dl style="margin: 0; font-size: 0.85em;">
                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 8px;">Isolation Forest</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">ML algorithm that isolates anomalies by random partitioning. Unusual points are easier to isolate.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">Reconstruction Error</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">How poorly a model recreates a data point. High error = unusual pattern combination.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">Benford's Law</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Natural distribution of leading digits. Real-world data follows this; deviations may indicate fraud.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">DBSCAN Clustering</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Groups similar records together. Points not fitting any cluster are labeled "noise" (potential anomalies).</dd>
                                </dl>
                            </div>

                            <!-- Semantic Terms -->
                            <div style="background: var(--bg-card); border-radius: 8px; padding: 16px; border-left: 3px solid #10b981;">
                                <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: #10b981; text-transform: uppercase; letter-spacing: 0.5px;">Semantic Analysis</h4>
                                <dl style="margin: 0; font-size: 0.85em;">
                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 8px;">Semantic Type</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">The meaning/purpose of data (e.g., Email, Currency, Date) beyond its technical type.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">PII (Personally Identifiable Information)</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Data that can identify an individual: names, emails, SSN, phone numbers, addresses.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">Schema.org</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Web vocabulary for structured data. Used for standardized semantic type mapping.</dd>

                                    <dt style="font-weight: 600; color: var(--text-primary); margin-top: 12px;">FIBO (Financial Industry Business Ontology)</dt>
                                    <dd style="margin: 4px 0 0 0; color: var(--text-secondary);">Standard vocabulary for financial concepts. Used for finance-specific semantic types.</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    </div><!-- end dq-main-layout -->

    <script>

        // Accordion toggle - uses 'collapsed' class (content visible by default)
        function toggleAccordion(header) {
            const accordion = header.closest('.accordion');
            accordion.classList.toggle('collapsed');
        }

        // Column row toggle
        function toggleColumnRow(row) {
            row.classList.toggle('expanded');
        }

        // ======================================================
        // EXPAND ALL TOGGLE
        // ======================================================
        let allExpanded = false;  // Starts collapsed by default

        function toggleExpandAll() {
            const btn = document.getElementById('expandAllBtn');
            allExpanded = !allExpanded;

            // Update button appearance
            btn.classList.toggle('expanded', allExpanded);
            btn.innerHTML = allExpanded
                ? '<span class="expand-icon">-</span> Collapse All'
                : '<span class="expand-icon">+</span> Expand All';

            // Toggle all accordions (using 'collapsed' class)
            document.querySelectorAll('.accordion').forEach(acc => {
                if (allExpanded) {
                    acc.classList.remove('collapsed');
                } else {
                    acc.classList.add('collapsed');
                }
            });

            // Toggle all column rows
            document.querySelectorAll('.column-row').forEach(row => {
                if (allExpanded) {
                    row.classList.add('expanded');
                } else {
                    row.classList.remove('expanded');
                }
            });

            // Toggle all <details> elements
            document.querySelectorAll('details').forEach(details => {
                details.open = allExpanded;
            });

            // Toggle all technical sections
            document.querySelectorAll('.insight-technical').forEach(section => {
                if (allExpanded) {
                    section.classList.add('open');
                } else {
                    section.classList.remove('open');
                }
            });
        }

        // ======================================================
        // PDF EXPORT
        // ======================================================
        function exportToPDF() {
            const btn = document.getElementById('exportPdfBtn');
            const originalText = btn.innerHTML;

            // Show loading state
            btn.classList.add('exporting');
            btn.innerHTML = '<span class="pdf-icon">⏳</span> Preparing...';

            // First, expand all sections to ensure nothing is hidden
            // Expand all accordions
            document.querySelectorAll('.accordion').forEach(acc => {
                acc.classList.add('open');
            });

            // Expand all column rows
            document.querySelectorAll('.column-row').forEach(row => {
                row.classList.add('expanded');
            });

            // Open all <details> elements
            document.querySelectorAll('details').forEach(details => {
                details.open = true;
            });

            // Expand all technical sections
            document.querySelectorAll('.insight-technical').forEach(section => {
                section.classList.add('open');
            });

            // Switch all dual-view tabs to show both Plain English content
            // (Technical is still available in print via CSS)
            document.querySelectorAll('.plain-view').forEach(view => {
                view.style.display = 'block';
            });
            document.querySelectorAll('.tech-view').forEach(view => {
                view.style.display = 'block';
            });

            // Update expand button state
            const expandBtn = document.getElementById('expandAllBtn');
            allExpanded = true;
            expandBtn.classList.add('expanded');
            expandBtn.innerHTML = '<span class="expand-icon">-</span> Collapse All';

            // Small delay to let DOM update, then trigger print
            setTimeout(() => {
                // Create print-specific styles
                const printStyle = document.createElement('style');
                printStyle.id = 'pdf-print-style';
                printStyle.textContent = `
                    @media print {
                        * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
                        body { background: white !important; }
                        .page { max-width: none !important; padding: 20px !important; }
                        .accordion-content { display: block !important; max-height: none !important; }
                        .column-details { display: block !important; max-height: none !important; }
                        .insight-technical { display: block !important; max-height: none !important; }
                        .plain-view, .tech-view { display: block !important; }
                        .dual-view-tabs { display: none !important; }
                        .nav-btn, .expand-all-btn, .export-pdf-btn { display: none !important; }
                        canvas { max-width: 100% !important; height: auto !important; }
                    }
                `;
                document.head.appendChild(printStyle);

                // Trigger print dialog (saves as PDF)
                window.print();

                // Clean up after print
                setTimeout(() => {
                    const style = document.getElementById('pdf-print-style');
                    if (style) style.remove();

                    // Restore button
                    btn.classList.remove('exporting');
                    btn.innerHTML = originalText;
                }, 500);
            }, 300);
        }

        // ======================================================
        // SIDEBAR NAVIGATION
        // ======================================================
        const sidebar = document.getElementById('dqSidebar');
        const backdrop = document.getElementById('sidebarBackdrop');
        const navLinks = document.querySelectorAll('.dq-nav-link');

        // Section IDs mapped to navigation
        const sections = {
            'overview': document.getElementById('section-overview') || document.getElementById('section-summary'),
            'engine': document.getElementById('section-engine'),
            'structure': document.getElementById('section-structure'),
            'columns': document.getElementById('section-columns'),
            'distributions': document.getElementById('section-distributions'),
            'missingness': document.getElementById('section-missingness'),
            'anomalies': document.getElementById('section-anomalies'),
            'temporal': document.getElementById('section-temporal'),
            'correlations': document.getElementById('section-correlations'),
            'validations': document.getElementById('section-validations'),
            'yaml': document.getElementById('section-yaml'),
            'nextsteps': document.getElementById('section-nextsteps'),
            'glossary': document.getElementById('section-glossary')
        };

        // Toggle sidebar for mobile
        function toggleSidebar() {
            sidebar.classList.toggle('open');
            backdrop.classList.toggle('open');
        }

        // Close sidebar on mobile when clicking a link
        function closeSidebarOnMobile() {
            if (window.innerWidth <= 1024) {
                sidebar.classList.remove('open');
                backdrop.classList.remove('open');
            }
        }

        // Handle nav link clicks
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                const sectionId = this.dataset.section;
                const section = sections[sectionId];

                // Update active state
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');

                if (section) {
                    // Calculate offset for mobile (account for mobile toggle button)
                    const isMobile = window.innerWidth <= 1024;
                    const offset = isMobile ? 70 : 20; // Mobile needs more offset for floating button

                    // Smooth scroll with offset
                    const targetPosition = section.getBoundingClientRect().top + window.pageYOffset - offset;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }

                closeSidebarOnMobile();
            });
        });

        // Update nav on scroll (highlight active section)
        let scrollTimeout;
        window.addEventListener('scroll', function() {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(function() {
                let currentSection = 'overview';
                const scrollPos = window.scrollY + 150;

                for (const [name, el] of Object.entries(sections)) {
                    if (el && el.offsetTop <= scrollPos) {
                        currentSection = name;
                    }
                }

                navLinks.forEach(link => {
                    link.classList.toggle('active', link.dataset.section === currentSection);
                });
            }, 50);
        });

        // ======================================================
        // COLUMN SEARCH AND FILTER
        // ======================================================
        let currentFilter = 'all';
        let currentSort = 'name';

        function filterColumns() {
            const query = document.getElementById('columnSearch')?.value?.toLowerCase() || '';
            const rows = document.querySelectorAll('.column-row');

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                const type = row.dataset?.type || '';
                const hasIssues = row.dataset?.issues === 'true';

                // Apply text search
                let showBySearch = !query || text.includes(query);

                // Apply filter
                let showByFilter = true;
                switch(currentFilter) {
                    case 'issues':
                        showByFilter = hasIssues;
                        break;
                    case 'numeric':
                        showByFilter = ['integer', 'float'].includes(type);
                        break;
                    case 'string':
                        showByFilter = type === 'string';
                        break;
                    case 'date':
                        showByFilter = ['date', 'datetime'].includes(type);
                        break;
                    default:
                        showByFilter = true;
                }

                row.style.display = (showBySearch && showByFilter) ? '' : 'none';
            });
        }

        function filterByType(type) {
            currentFilter = type;

            // Update button states
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent.toLowerCase().includes(type) ||
                    (type === 'all' && btn.textContent === 'All'));
            });

            filterColumns();
        }

        function sortColumns() {
            const sortBy = document.getElementById('columnSort')?.value || 'name';
            currentSort = sortBy;

            const container = document.querySelector('.column-explorer .accordion-content');
            if (!container) return;

            const rows = Array.from(container.querySelectorAll('.column-row'));

            rows.sort((a, b) => {
                switch(sortBy) {
                    case 'quality':
                        return parseFloat(b.dataset?.quality || 0) - parseFloat(a.dataset?.quality || 0);
                    case 'completeness':
                        return parseFloat(b.dataset?.completeness || 0) - parseFloat(a.dataset?.completeness || 0);
                    case 'issues':
                        const aIssues = a.dataset?.issues === 'true' ? 1 : 0;
                        const bIssues = b.dataset?.issues === 'true' ? 1 : 0;
                        return bIssues - aIssues;
                    default:
                        return (a.dataset?.name || '').localeCompare(b.dataset?.name || '');
                }
            });

            rows.forEach(row => container.appendChild(row));
        }

        // ======================================================
        // EXPORT ANOMALIES TO CSV
        // ======================================================
        function exportAnomalies() {
            // Gather all issues from the report
            const issues = [];

            // Collect column issues
            document.querySelectorAll('.column-row').forEach(row => {
                const colName = row.dataset?.name || 'Unknown';
                const quality = row.dataset?.quality || 'N/A';
                row.querySelectorAll('.issue-item, .alert-item').forEach(issue => {
                    issues.push({
                        column: colName,
                        quality_score: quality,
                        issue_type: 'Column Issue',
                        description: issue.textContent.trim()
                    });
                });
            });

            // Collect ML findings
            document.querySelectorAll('.ml-finding-card').forEach(card => {
                const title = card.querySelector('.finding-title')?.textContent || 'ML Finding';
                card.querySelectorAll('.anomaly-item, .alert-text').forEach(item => {
                    issues.push({
                        column: 'ML Analysis',
                        quality_score: 'N/A',
                        issue_type: title,
                        description: item.textContent.trim()
                    });
                });
            });

            // Collect alerts
            document.querySelectorAll('.alert-badge').forEach(alert => {
                issues.push({
                    column: 'Alert',
                    quality_score: 'N/A',
                    issue_type: alert.classList.contains('critical') ? 'Critical' :
                               alert.classList.contains('warning') ? 'Warning' : 'Info',
                    description: alert.textContent.trim()
                });
            });

            if (issues.length === 0) {
                alert('No issues found to export.');
                return;
            }

            // Generate CSV
            const headers = ['Column', 'Quality Score', 'Issue Type', 'Description'];
            const csvRows = [headers.join(',')];

            issues.forEach(issue => {
                const row = [
                    '"' + (issue.column || '').replace(/"/g, '""') + '"',
                    issue.quality_score,
                    '"' + (issue.issue_type || '').replace(/"/g, '""') + '"',
                    '"' + (issue.description || '').replace(/"/g, '""') + '"'
                ];
                csvRows.push(row.join(','));
            });

            const csvContent = csvRows.join('\n');

            // Download CSV
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'data_quality_issues.csv';
            link.click();

            // Update button to show success
            const btn = event?.target;
            if (btn) {
                const originalText = btn.textContent;
                btn.textContent = '✓ Exported!';
                btn.style.background = '#10b981';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 1500);
            }
        }

        // ======================================================
        // HEATMAP CLICK TO SCROLL
        // ======================================================
        document.querySelectorAll('.heatmap-cell').forEach(cell => {
            cell.addEventListener('click', function() {
                const colName = this.title.split(':')[0];
                const row = document.querySelector(`.column-row[data-name="${colName}"]`);
                if (row) {
                    row.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    row.classList.add('expanded');
                    setTimeout(() => row.style.outline = '2px solid var(--accent)', 300);
                    setTimeout(() => row.style.outline = '', 1500);
                }
            });
        });

        // Copy YAML to clipboard
        function copyYaml(yamlContent) {
            navigator.clipboard.writeText(yamlContent).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '✓ Copied!';
                btn.style.background = '#10b981';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 1500);
            });
        }

        // Copy full config to clipboard
        function copyFullConfig() {
            const yamlEl = document.getElementById('fullConfigYaml');
            if (yamlEl) {
                navigator.clipboard.writeText(yamlEl.textContent).then(() => {
                    const btn = event.target;
                    const originalText = btn.textContent;
                    btn.textContent = '✓ Copied!';
                    setTimeout(() => {
                        btn.textContent = originalText;
                    }, 1500);
                });
            }
        }

        // Initialize charts when library is ready
        function initCharts() {
            if (typeof Chart === 'undefined') {
                setTimeout(initCharts, 100);
                return;
            }

            // Chart defaults
            const chartDefaults = {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    labels: {
                        color: '#94a3b8',
                        font: { size: 11 }
                    }
                }
            }
        };

        // Type Distribution Chart
        new Chart(document.getElementById('typeChart'), {
            type: 'doughnut',
            data: {
                labels: ["Integer (6)", "String (5)", "Float (1)"],
                datasets: [{
                    data: [6, 5, 1],
                    backgroundColor: [
                        'rgba(139, 92, 246, 0.8)',
                        'rgba(59, 130, 246, 0.8)',
                        'rgba(16, 185, 129, 0.8)',
                        'rgba(245, 158, 11, 0.8)',
                        'rgba(239, 68, 68, 0.8)'
                    ],
                    borderColor: 'transparent',
                    borderWidth: 0
                }]
            },
            options: {
                ...chartDefaults,
                cutout: '65%',
                plugins: {
                    legend: {
                        position: 'right',
                        labels: { color: '#94a3b8', padding: 16 }
                    }
                }
            }
        });

        // Quality by Column Chart
        new Chart(document.getElementById('qualityChart'), {
            type: 'bar',
            data: {
                labels: ["PassengerI", "Survived", "Pclass", "Name", "Sex", "Age", "SibSp", "Parch", "Ticket", "Fare", "Cabin", "Embarked"],
                datasets: [{
                    label: 'Quality Score',
                    data: [98.0, 80.0448933782267, 80.06734006734007, 80.4, 72.2448933782267, 73.45496986673457, 80.15712682379349, 80.15712682379349, 84.88619528619529, 65.94590347923682, 62.080451574569224, 80.00015149621449],
                    backgroundColor: function(context) {
                        const value = context.raw;
                        if (value >= 80) return 'rgba(16, 185, 129, 0.8)';
                        if (value >= 70) return 'rgba(59, 130, 246, 0.8)';
                        if (value >= 60) return 'rgba(245, 158, 11, 0.8)';
                        return 'rgba(239, 68, 68, 0.8)';
                    },
                    borderRadius: 4
                }]
            },
            options: {
                ...chartDefaults,
                plugins: { legend: { display: false } },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        grid: { color: 'rgba(148, 163, 184, 0.1)' },
                        ticks: {
                            color: '#64748b',
                            callback: value => value + '%'
                        }
                    },
                    x: {
                        grid: { display: false },
                        ticks: {
                            color: '#64748b',
                            maxRotation: 45,
                            font: { size: 9 }
                        }
                    }
                }
            }
        });

        // Bubble Chart
        new Chart(document.getElementById('bubbleChart'), {
            type: 'bubble',
            data: {
                datasets: [{
                    label: 'Columns',
                    data: [{"x": 100.0, "y": 100.0, "r": 5, "label": "PassengerId"}, {"x": 100.0, "y": 100.0, "r": 5, "label": "Survived"}, {"x": 100.0, "y": 100.0, "r": 5, "label": "Pclass"}, {"x": 100.0, "y": 100.0, "r": 5, "label": "Name"}, {"x": 100.0, "y": 100.0, "r": 5, "label": "Sex"}, {"x": 80.13468013468014, "y": 96.49859943977592, "r": 5, "label": "Age"}, {"x": 100.0, "y": 100.0, "r": 5, "label": "SibSp"}, {"x": 100.0, "y": 100.0, "r": 5, "label": "Parch"}, {"x": 100.0, "y": 100.0, "r": 5, "label": "Ticket"}, {"x": 100.0, "y": 81.9304152637486, "r": 5, "label": "Fare"}, {"x": 22.895622895622893, "y": 100.0, "r": 5, "label": "Cabin"}, {"x": 99.77553310886644, "y": 100.0, "r": 5, "label": "Embarked"}],
                    backgroundColor: function(context) {
                        const y = context.raw?.y;
                        if (!y) return 'rgba(148, 163, 184, 0.5)';
                        if (y >= 95) return 'rgba(16, 185, 129, 0.6)';
                        if (y >= 90) return 'rgba(59, 130, 246, 0.6)';
                        return 'rgba(245, 158, 11, 0.6)';
                    }
                }]
            },
            options: {
                ...chartDefaults,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.raw.label + ': ' + context.raw.y + '% validity';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: { display: true, text: 'Completeness %', color: '#64748b' },
                        min: Math.max(0, Math.min(...[100.0, 100.0, 100.0, 100.0, 100.0, 80.13468013468014, 100.0, 100.0, 100.0, 100.0, 22.895622895622893, 99.77553310886644]) - 5),
                        max: 101,
                        grid: { color: 'rgba(148, 163, 184, 0.1)' },
                        ticks: { color: '#64748b' }
                    },
                    y: {
                        title: { display: true, text: 'Validity %', color: '#64748b' },
                        min: Math.max(0, Math.min(...[100.0, 100.0, 100.0, 100.0, 100.0, 96.49859943977592, 100.0, 100.0, 100.0, 81.9304152637486, 100.0, 100.0]) - 5),
                        max: 101,
                        grid: { color: 'rgba(148, 163, 184, 0.1)' },
                        ticks: { color: '#64748b' }
                    }
                }
            }
        });
        } // end initCharts

        // Call initCharts when page is ready
        if (document.readyState === 'complete') {
            initCharts();
        } else {
            window.addEventListener('load', initCharts);
        }

        // Collapse all accordions after page load (Safari-friendly: render first, then collapse)
        function collapseAllAccordions() {
            document.querySelectorAll('.accordion').forEach(acc => {
                acc.classList.add('collapsed');
            });
            document.querySelectorAll('.insight-widget').forEach(widget => {
                widget.classList.add('collapsed');
            });
        }
        // Run after DOM is ready but content has rendered
        if (document.readyState === 'complete') {
            setTimeout(collapseAllAccordions, 100);
        } else {
            window.addEventListener('load', () => setTimeout(collapseAllAccordions, 100));
        }

        // Word Cloud - wait for library to load
        function initWordCloud() {
            const wordCloudContainer = document.getElementById('wordCloudContainer');
            if (!wordCloudContainer) return;

            if (typeof WordCloud === 'undefined') {
                // Library not loaded yet, retry in 100ms
                setTimeout(initWordCloud, 100);
                return;
            }

            const wordCloudData = [["male", 577], ["female", 314], ["S", 644], ["C", 168], ["Q", 77]];
            if (wordCloudData.length > 0) {
                // Normalize weights to a reasonable range for display
                const maxWeight = Math.max(...wordCloudData.map(w => w[1]));
                const normalizedData = wordCloudData.map(w => [w[0], (w[1] / maxWeight) * 100]);

                WordCloud(wordCloudContainer, {
                    list: normalizedData,
                    gridSize: 4,
                    weightFactor: function(size) {
                        return Math.max(14, size * 0.5);
                    },
                    fontFamily: 'system-ui, -apple-system, sans-serif',
                    color: function(word, weight) {
                        if (weight > 80) return '#8b5cf6';
                        if (weight > 50) return '#60a5fa';
                        if (weight > 25) return '#10b981';
                        return '#94a3b8';
                    },
                    backgroundColor: 'transparent',
                    rotateRatio: 0.2,
                    rotationSteps: 2,
                    shuffle: true,
                    drawOutOfBound: false,
                    shrinkToFit: true
                });
            }
        }
        // Initialize word cloud after page load
        if (document.readyState === 'complete') {
            initWordCloud();
        } else {
            window.addEventListener('load', initWordCloud);
        }

    </script>
</body>
</html>