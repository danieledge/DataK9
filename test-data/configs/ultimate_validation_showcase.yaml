validation_job:
  name: "Ultimate Validation Showcase - All Available Validation Types"
  description: |
    Comprehensive test of DataK9 framework using IBM AML Banking dataset.
    Tests 31 validation types (excluding SQL) across 357M rows in 2 files.

    Dataset: HI-Large (179M rows) + LI-Large (177M rows) = 357M rows, 10.1 GB
    Validations: 31 types across 10 categories
    Cross-file: 3 validations testing referential integrity

  files:
    # ==========================================================================
    # FILE 1: HI-Large Transactions (179M rows) - High Illicit Activity
    # ==========================================================================
    - name: "HI-Large Banking Transactions"
      path: "../../test-data/HI-Large_Trans.parquet"
      format: "parquet"

      validations:
        # ======================================================================
        # FILE-LEVEL VALIDATIONS (3 types)
        # ======================================================================

        - type: "EmptyFileCheck"
          severity: "ERROR"
          enabled: true

        - type: "RowCountRangeCheck"
          severity: "WARNING"
          enabled: true
          params:
            min_rows: 100000000
            max_rows: 200000000

        - type: "FileSizeCheck"
          severity: "WARNING"
          enabled: true
          params:
            min_size_mb: 4000
            max_size_mb: 6000

        # ======================================================================
        # SCHEMA VALIDATIONS (2 types)
        # ======================================================================

        - type: "SchemaMatchCheck"
          severity: "ERROR"
          enabled: true
          params:
            expected_schema:
              - "Timestamp"
              - "From Bank"
              - "Account"
              - "To Bank"
              - "Account.1"
              - "Amount Received"
              - "Receiving Currency"
              - "Amount Paid"
              - "Payment Currency"
              - "Payment Format"
              - "Is Laundering"

        - type: "ColumnPresenceCheck"
          severity: "ERROR"
          enabled: true
          params:
            required_columns:
              - "Timestamp"
              - "Amount Received"
              - "Amount Paid"

        # ======================================================================
        # FIELD-LEVEL VALIDATIONS (5 types)
        # ======================================================================

        - type: "MandatoryFieldCheck"
          severity: "ERROR"
          enabled: true
          params:
            field: "Timestamp"

        - type: "MandatoryFieldCheck"
          severity: "ERROR"
          enabled: true
          params:
            field: "From Bank"

        - type: "RegexCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "Timestamp"
            pattern: "^\\d{4}-\\d{2}-\\d{2}"

        - type: "ValidValuesCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "Payment Format"
            valid_values:
              - "Reinvestment"
              - "Cheque"
              - "ACH"
              - "Wire"
              - "Credit"
              - "Cash"

        - type: "RangeCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "From Bank"
            min_value: 0
            max_value: 10000000

        - type: "DateFormatCheck"
          severity: "ERROR"
          enabled: true
          params:
            field: "Timestamp"
            date_format: "%Y-%m-%d"

        # ======================================================================
        # RECORD-LEVEL VALIDATIONS (3 types)
        # ======================================================================

        - type: "DuplicateRowCheck"
          severity: "WARNING"
          enabled: true
          params:
            subset:
              - "Timestamp"
              - "From Bank"
              - "To Bank"
              - "Amount Received"

        - type: "BlankRecordCheck"
          severity: "WARNING"
          enabled: true

        - type: "UniqueKeyCheck"
          severity: "WARNING"
          enabled: true
          params:
            key_fields:
              - "Timestamp"
              - "From Bank"
              - "Account"

        # ======================================================================
        # ADVANCED VALIDATIONS (6 types)
        # ======================================================================

        - type: "StatisticalOutlierCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "Amount Received"
            method: "iqr"
            threshold: 1.5

        - type: "CrossFieldComparisonCheck"
          severity: "WARNING"
          enabled: true
          params:
            field_a: "Amount Received"
            operator: ">="
            field_b: "Amount Paid"

        - type: "FreshnessCheck"
          severity: "WARNING"
          enabled: true
          params:
            check_type: "data"
            date_field: "Timestamp"
            max_age_hours: 87600

        - type: "CompletenessCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "Timestamp"
            min_completeness: 0.95

        - type: "StringLengthCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "Payment Format"
            min_length: 3
            max_length: 20

        - type: "NumericPrecisionCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "Amount Received"
            max_decimal_places: 6

        # ======================================================================
        # INLINE VALIDATIONS (3 types)
        # ======================================================================

        - type: "InlineRegexCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "Receiving Currency"
            pattern: "^[A-Z]{3}$"

        - type: "InlineBusinessRuleCheck"
          severity: "ERROR"
          enabled: true
          params:
            field: "Amount Received"
            expression: "Amount Received >= 0"

        - type: "InlineLookupCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "Payment Format"
            lookup_values:
              - "Reinvestment"
              - "Cheque"
              - "ACH"
              - "Wire"
              - "Credit"
              - "Cash"

        # ======================================================================
        # STATISTICAL VALIDATIONS (3 types)
        # ======================================================================

        - type: "DistributionCheck"
          severity: "WARNING"
          enabled: true
          params:
            column: "Amount Received"
            expected_distribution: "normal"
            significance_level: 0.05

        - type: "CorrelationCheck"
          severity: "WARNING"
          enabled: true
          params:
            column1: "Amount Received"
            column2: "Amount Paid"
            min_correlation: 0.7
            max_correlation: 1.0

        - type: "AdvancedAnomalyDetectionCheck"
          severity: "WARNING"
          enabled: true
          params:
            column: "Amount Received"
            method: "isolation_forest"
            threshold: 0.01
            max_anomaly_pct: 5

        # ======================================================================
        # TEMPORAL VALIDATIONS (2 types)
        # ======================================================================

        - type: "BaselineComparisonCheck"
          severity: "WARNING"
          enabled: true
          params:
            metric: "count"
            baseline_file: "../../test-data/HI-Large_Trans_baseline.parquet"
            tolerance_pct: 10

        - type: "TrendDetectionCheck"
          severity: "WARNING"
          enabled: true
          params:
            metric: "count"
            baseline_file: "../../test-data/HI-Large_Trans_daily.parquet"
            max_growth_pct: 20
            max_decline_pct: 20

        # ======================================================================
        # CONDITIONAL VALIDATION (1 type)
        # ======================================================================

        - type: "ConditionalValidation"
          severity: "WARNING"
          enabled: true
          params:
            condition: "Is Laundering == 1"
            validation:
              type: "RangeCheck"
              params:
                field: "Amount Received"
                min_value: 10000

    # ==========================================================================
    # FILE 2: LI-Large Transactions (177M rows) - Low Illicit Activity
    # ==========================================================================
    - name: "LI-Large Banking Transactions"
      path: "../../test-data/LI-Large_Trans.parquet"
      format: "parquet"

      validations:
        # Basic validations for second file
        - type: "EmptyFileCheck"
          severity: "ERROR"
          enabled: true

        - type: "MandatoryFieldCheck"
          severity: "ERROR"
          enabled: true
          params:
            field: "Timestamp"

        - type: "MandatoryFieldCheck"
          severity: "ERROR"
          enabled: true
          params:
            field: "Amount Received"

        - type: "RangeCheck"
          severity: "WARNING"
          enabled: true
          params:
            field: "Amount Received"
            min_value: 0
            max_value: 10000000000000

        # ======================================================================
        # CROSS-FILE VALIDATIONS (5 types)
        # ======================================================================

        - type: "ReferentialIntegrityCheck"
          severity: "ERROR"
          enabled: true
          params:
            foreign_key: "From Bank"
            reference_file: "../../test-data/HI-Large_Trans.parquet"
            reference_key: "From Bank"
            reference_file_format: "parquet"

        - type: "CrossFileComparisonCheck"
          severity: "WARNING"
          enabled: true
          params:
            aggregation: "mean"
            column: "Amount Received"
            comparison: "=="
            reference_file: "../../test-data/HI-Large_Trans.parquet"
            reference_aggregation: "mean"
            reference_column: "Amount Received"
            reference_file_format: "parquet"
            tolerance_pct: 50

        - type: "CrossFileDuplicateCheck"
          severity: "WARNING"
          enabled: true
          params:
            columns:
              - "Timestamp"
              - "From Bank"
              - "To Bank"
              - "Amount Received"
            reference_files:
              - "../../test-data/HI-Large_Trans.parquet"
            reference_file_format: "parquet"

  # ============================================================================
  # PROCESSING SETTINGS - Optimized for 357M Rows with 16GB RAM
  # ============================================================================
  processing:
    chunk_size: 1000000  # 1M rows per chunk (optimized for 16GB RAM)
    max_sample_failures: 1000
    parallel_files: false  # Sequential to avoid memory spikes on cross-file validations

  output:
    html_report: "ultimate_showcase_report.html"
    json_summary: "ultimate_showcase_report.json"
